import{s as ce,n as Z,r as Ve,j as se,y as Ne,b as R,c as Ie,o as ke,a as We,z as De}from"../chunks/scheduler.DVqiRabw.js";import{S as fe,i as pe,e as L,s as X,c as O,a as A,f as F,k as Ce,d as k,l as _,C as V,g as $,h as D,D as be,m as q,E as ve,F as Xe,G as ae,x as ie,y as oe,z as re,v as Fe,q as Ue,r as J,p as x,A as ue,H as Le}from"../chunks/index.BanqFhYS.js";import{e as _e,u as Ye,o as ze,a as ge,c as K,b as we}from"../chunks/animate.C9o6I5aN.js";/* empty css                      */import{b as de,w as Ge}from"../chunks/paths.DUQzck51.js";import{_ as Ke}from"../chunks/preload-helper.D6kgxu3v.js";function Qe(a){let e,t,s,n,o,p=`<span class="close-icon svelte-1fkoqn4" style="-webkit-mask: url(${de}/images/svg/cancel.svg) no-repeat center / contain; mask: url(${de}/images/svg/cancel.svg) no-repeat center / contain;"></span>`,c,m;return{c(){e=L("div"),t=L("div"),s=L("input"),n=X(),o=L("button"),o.innerHTML=p,this.h()},l(i){e=O(i,"DIV",{class:!0});var h=A(e);t=O(h,"DIV",{role:!0,tabindex:!0,class:!0,draggable:!0});var f=A(t);s=O(f,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),n=F(f),o=O(f,"BUTTON",{class:!0,draggable:!0,"data-svelte-h":!0}),Ce(o)!=="svelte-97uq8h"&&(o.innerHTML=p),f.forEach(k),h.forEach(k),this.h()},h(){_(s,"autocorrect","off"),_(s,"autocomplete","off"),_(s,"spellcheck","false"),_(s,"type","text"),_(s,"class","svelte-1fkoqn4"),_(o,"class","close-button svelte-1fkoqn4"),_(o,"draggable","true"),_(t,"role","button"),_(t,"tabindex","0"),_(t,"class","tab svelte-1fkoqn4"),_(t,"draggable","true"),V(t,"active",a[1]),_(e,"class","container svelte-1fkoqn4"),V(e,"preventHover",a[2])},m(i,h){$(i,e,h),D(e,t),D(t,s),a[8](s),be(s,a[0]),D(t,n),D(t,o),c||(m=[q(s,"input",a[9]),q(o,"click",ve(function(){se(a[3])&&a[3].apply(this,arguments)})),q(o,"dragstart",ve(Xe(a[7]))),q(t,"dblclick",ae(a[10])),q(t,"mousedown",ae(function(){se(a[4])&&a[4].apply(this,arguments)})),q(t,"touchstart",ae(function(){se(a[4])&&a[4].apply(this,arguments)})),q(t,"dragstart",ae(function(){se(a[5])&&a[5].apply(this,arguments)}))],c=!0)},p(i,[h]){a=i,h&1&&s.value!==a[0]&&be(s,a[0]),h&2&&V(t,"active",a[1]),h&4&&V(e,"preventHover",a[2])},i:Z,o:Z,d(i){i&&k(e),a[8](null),c=!1,Ve(m)}}}function je(a,e,t){let{title:s=""}=e,{active:n=!1}=e,{preventHover:o=!1}=e,{onClose:p=()=>{}}=e,{onPointerdown:c=r=>{}}=e,{onDragstart:m=r=>{}}=e,i;function h(r){Ne.call(this,a,r)}function f(r){R[r?"unshift":"push"](()=>{i=r,t(6,i)})}function d(){s=this.value,t(0,s)}const C=()=>i.select();return a.$$set=r=>{"title"in r&&t(0,s=r.title),"active"in r&&t(1,n=r.active),"preventHover"in r&&t(2,o=r.preventHover),"onClose"in r&&t(3,p=r.onClose),"onPointerdown"in r&&t(4,c=r.onPointerdown),"onDragstart"in r&&t(5,m=r.onDragstart)},[s,n,o,p,c,m,i,h,f,d,C]}class Oe extends fe{constructor(e){super(),pe(this,e,je,Qe,ce,{title:0,active:1,preventHover:2,onClose:3,onPointerdown:4,onDragstart:5})}}let Ze=0;const M=Ge({tabs:[],activeIndex:0,placeholderIndex:-1}),P={newTab:a=>{const{data:e={id:Ze++,title:"Untitled",DeltaOps:[]},index:t=-1,callback:s=()=>{}}=a||{};M.update(n=>(n.tabs.some(o=>o.id==e.id)||(t<0?(n.tabs.push(e),n.activeIndex=n.tabs.length-1):(n.tabs.splice(t,0,e),n.activeIndex=t)),n)),s()},removeTab:a=>{M.update(e=>(a<0||a>=e.tabs.length||(e.placeholderIndex==a&&(e.placeholderIndex=-1),e.tabs.splice(a,1),a==e.activeIndex-1?e.activeIndex=Math.max(0,a):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:a=>{M.update(e=>(a<0?e.activeIndex=0:a>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=a,e))},setPlaceholderIndex:a=>{M.update(e=>(e.placeholderIndex=a===void 0||a<0||a>=e.tabs.length?-1:a,e))},moveTab:(a,e,t=()=>{})=>{a!=e&&(M.update(s=>{if(a<0||a>=s.tabs.length||e<0||e>=s.tabs.length)return s;const n=s.tabs[a];return s.tabs.splice(a,1),s.tabs.splice(e,0,n),s.activeIndex==a&&(s.activeIndex=e),s.placeholderIndex==a&&(s.placeholderIndex=e),s}),t())}};function ye(a,e,t){const s=a.slice();return s[38]=e[t],s[39]=e,s[40]=t,s}function Te(a,e){let t,s,n,o,p=e[40],c,m,i;function h(){return e[14](e[40])}function f(...w){return e[15](e[40],...w)}function d(w){e[16](w,e[40])}let C={active:e[8].activeIndex==e[40],preventHover:e[7],onClose:h,onPointerdown:f,onDragstart:e[12]};e[8].tabs[e[40]].title!==void 0&&(C.title=e[8].tabs[e[40]].title),s=new Oe({props:C}),R.push(()=>Le(s,"title",d));const r=()=>e[17](t,p),H=()=>e[17](null,p);return{key:a,first:null,c(){t=L("div"),ie(s.$$.fragment),o=X(),this.h()},l(w){t=O(w,"DIV",{class:!0});var y=A(t);oe(s.$$.fragment,y),o=F(y),y.forEach(k),this.h()},h(){_(t,"class","tab-container svelte-1yl1m0u"),V(t,"placeholder",e[8].placeholderIndex==e[40]),this.first=t},m(w,y){$(w,t,y),re(s,t,null),D(t,o),r(),c=!0,m||(i=We(e[11].call(null,t)),m=!0)},p(w,y){e=w;const I={};y[0]&256&&(I.active=e[8].activeIndex==e[40]),y[0]&128&&(I.preventHover=e[7]),y[0]&256&&(I.onClose=h),y[0]&256&&(I.onPointerdown=f),!n&&y[0]&256&&(n=!0,I.title=e[8].tabs[e[40]].title,De(()=>n=!1)),s.$set(I),p!==e[40]&&(H(),p=e[40],r()),(!c||y[0]&256)&&V(t,"placeholder",e[8].placeholderIndex==e[40])},i(w){c||(J(s.$$.fragment,w),c=!0)},o(w){x(s.$$.fragment,w),c=!1},d(w){w&&k(t),ue(s),H(),m=!1,i()}}}function Je(a){let e,t,s,n=[],o=new Map,p,c,m,i=`<div class="new-tab-icon svelte-1yl1m0u" style="-webkit-mask: url(${de}/images/svg/plus.svg) no-repeat center / contain; mask: url(${de}/images/svg/plus.svg) no-repeat center / contain;"></div>`,h,f,d,C,r,H,w,y,I=_e(a[8].tabs);const N=v=>v[38];for(let v=0;v<I.length;v+=1){let b=ye(a,I,v),T=N(b);o.set(T,n[v]=Te(T,b))}return d=new Oe({props:{title:a[3],active:!a[5],preventHover:!0}}),{c(){e=L("div"),t=L("div"),s=L("div");for(let v=0;v<n.length;v+=1)n[v].c();p=X(),c=L("div"),m=L("button"),m.innerHTML=i,h=X(),f=L("div"),ie(d.$$.fragment),C=X(),r=L("div"),this.h()},l(v){e=O(v,"DIV",{});var b=A(e);t=O(b,"DIV",{class:!0});var T=A(t);s=O(T,"DIV",{class:!0});var ee=A(s);for(let U=0;U<n.length;U+=1)n[U].l(ee);ee.forEach(k),p=F(T),c=O(T,"DIV",{class:!0});var te=A(c);m=O(te,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(m)!=="svelte-15g65px"&&(m.innerHTML=i),te.forEach(k),h=F(T),f=O(T,"DIV",{class:!0});var ne=A(f);oe(d.$$.fragment,ne),ne.forEach(k),T.forEach(k),C=F(b),r=O(b,"DIV",{class:!0}),A(r).forEach(k),b.forEach(k),this.h()},h(){_(s,"class","tabs svelte-1yl1m0u"),_(m,"class","new-tab-button svelte-1yl1m0u"),_(c,"class","buttons svelte-1yl1m0u"),_(f,"class","clone svelte-1yl1m0u"),V(f,"dragging",a[0]),_(t,"class","tabbar svelte-1yl1m0u"),_(r,"class","separator svelte-1yl1m0u")},m(v,b){$(v,e,b),D(e,t),D(t,s);for(let T=0;T<n.length;T+=1)n[T]&&n[T].m(s,null);a[18](s),D(t,p),D(t,c),D(c,m),D(t,h),D(t,f),re(d,f,null),a[19](f),D(e,C),D(e,r),a[20](e),H=!0,w||(y=q(m,"click",a[9]),w=!0)},p(v,b){b[0]&13700&&(I=_e(v[8].tabs),Fe(),n=Ye(n,b,N,1,v,I,o,s,ze,Te,null,ye),Ue());const T={};b[0]&8&&(T.title=v[3]),b[0]&32&&(T.active=!v[5]),d.$set(T),(!H||b[0]&1)&&V(f,"dragging",v[0])},i(v){if(!H){for(let b=0;b<I.length;b+=1)J(n[b]);J(d.$$.fragment,v),H=!0}},o(v){for(let b=0;b<n.length;b+=1)x(n[b]);x(d.$$.fragment,v),H=!1},d(v){v&&k(e);for(let b=0;b<n.length;b+=1)n[b].d();a[18](null),ue(d),a[19](null),a[20](null),w=!1,y()}}}const xe=12,le=140,Q=70,j=200,$e=1600,Ee=.3;function et(a,e,t){let s;Ie(a,M,l=>t(8,s=l));let n,o=[],p=0,c=null,m=-1,i="",h,f,d,C=!1,r=!1,H=0,w=0,y=0,I,N=!1;const v=(l,u=300)=>{let g;return(...E)=>{clearTimeout(g),g=setTimeout(()=>{l.apply(this,E)},u)}};function b(){P.newTab()}const T=l=>{if(!o[l]){console.warn("Cannot close tab!");return}p=o[l].getBoundingClientRect().width,l<s.tabs.length-1&&(n.style.setProperty("--tab-max-width",`${p}px`),ee()),l==s.tabs.length-1?P.setActiveIndex(l-1):l==s.activeIndex&&P.setActiveIndex(l+1),ge({duration:j,easing:K,onStep:(u,g)=>{l==0?t(1,n.style.gridTemplateColumns=`minmax(${g*Q}px, ${g*p}px)`,n):t(1,n.style.gridTemplateColumns=`repeat(${l}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${g*Q}px, ${g*p}px)`,n)},onEnd:()=>{t(1,n.style.gridTemplateColumns="",n),P.removeTab(l)}})},ee=v(()=>{n&&(n.style.setProperty("--tab-max-width",`${le}px`),ge({duration:j,easing:K,onStep:(l,u)=>{n.style.setProperty("--tab-max-width",`${p+l*(le-p)}px`)},onEnd:()=>{n.style.setProperty("--tab-max-width",`${le}px`)}}))},$e);function te(l){if(!n)return;const u=l.getBoundingClientRect().width;ge({duration:j,easing:K,onStep:(g,E)=>{s.tabs.length==1?t(1,n.style.gridTemplateColumns=`minmax(${g*Q}px, ${g*u}px)`,n):t(1,n.style.gridTemplateColumns=`repeat(${s.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${g*Q}px, ${g*u}px)`,n),t(1,n.scrollLeft=n.scrollWidth,n)},onEnd:()=>{t(1,n.style.gridTemplateColumns="",n)}})}const ne=(l,u)=>{const g=o[0].getBoundingClientRect().width;P.moveTab(l,u,()=>{if(l>u)for(let E=u;E<l;E++)we(o[E],{duration:j,easing:K,css:(z,B)=>`transform: translateX(-${B*g}px);`});if(l<u)for(let E=u;E>l;E--)we(o[E],{duration:j,easing:K,css:(z,B)=>`transform: translateX(${B*g}px);`})})};function U(l){!l.target||!l.dataTransfer||(l.dataTransfer.setData("text/plain",m.toString()),l.dataTransfer.setDragImage(new Image,0,0))}function He(l,u){if(l==0&&u==0){t(4,d.style.left="-1000px",d),t(4,d.style.top="-1000px",d);return}let g=I.getBoundingClientRect();if(l<g.left||l>g.right||u<g.top||u>g.bottom){r||(y=0),t(4,d.style.left=`${l+H}px`,d),t(4,d.style.top=`${u+w}px`,d),t(5,r=!0);return}r&&t(5,r=!1),t(4,d.style.left=`${l+H}px`,d),t(4,d.style.top=`${f.top}px`,d);const E=-n.scrollLeft,z=o[0].getBoundingClientRect().width;let B=-1;if(l>E+s.tabs.length*z)B=s.tabs.length-1;else for(let G=0;G<s.tabs.length;G++)if(l>E+G*z&&l<E+(G+1)*z){B=G;break}l<20?(y=-Ee,requestAnimationFrame(he)):l>n.clientWidth-10?(y=Ee,requestAnimationFrame(he)):y=0,!(B==-1||B==s.placeholderIndex)&&ne(s.placeholderIndex,B)}let Y=0;function he(l){if(!C||y==0){Y=0;return}Y==0&&(Y=l);const u=l-Y;Y=l,n.scrollBy({left:y*u}),requestAnimationFrame(he)}function me(l,u){if(!l.target)return;let g,E;l instanceof TouchEvent?(g=l.touches[0].clientX,E=l.touches[0].clientY,l.preventDefault()):(g=l.clientX,E=l.clientY),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",S),window.addEventListener("mousemove",W),window.addEventListener("mouseup",S),window.addEventListener("drag",W),window.addEventListener("dragend",S),window.addEventListener("blur",S),P.setActiveIndex(u),h=l.target,f=h.getBoundingClientRect(),c=[g,E],H=f.left-g,w=f.top-E,t(4,d.style.width=`${f.width}px`,d),t(4,d.style.left=`${f.left}px`,d),t(4,d.style.top=`${f.top}px`,d),m=u,t(3,i=s.tabs[u].title)}function W(l){let u,g;if(l instanceof TouchEvent?(u=l.touches[0].clientX,g=l.touches[0].clientY,l.preventDefault()):(u=l.clientX,g=l.clientY),C){He(u,g);return}c===null||Math.hypot(c[0]-u,c[1]-g)<xe||(t(0,C=!0),P.setPlaceholderIndex(m),P.setActiveIndex(m))}function S(){window.removeEventListener("touchmove",W),window.removeEventListener("touchend",S),window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",S),window.removeEventListener("drag",W),window.removeEventListener("dragend",S),window.removeEventListener("blur",S),c=null,t(5,r=!1),m=-1,H=0,w=0,P.setPlaceholderIndex(),t(0,C=!1)}ke(()=>{n.style.setProperty("--tab-max-width",`${le}px`),n.style.setProperty("--tab-min-width",`${Q}px`)});const Ae=l=>T(l),Pe=(l,u)=>me(u,l);function Be(l,u){a.$$.not_equal(s.tabs[u].title,l)&&(s.tabs[u].title=l,M.set(s))}function Se(l,u){R[l?"unshift":"push"](()=>{o[u]=l,t(2,o)})}function qe(l){R[l?"unshift":"push"](()=>{n=l,t(1,n)})}function Me(l){R[l?"unshift":"push"](()=>{d=l,t(4,d)})}function Re(l){R[l?"unshift":"push"](()=>{I=l,t(6,I)})}return a.$$.update=()=>{a.$$.dirty[0]&1&&(C?t(7,N=!0):setTimeout(()=>t(7,N=!1),20))},[C,n,o,i,d,r,I,N,s,b,T,te,U,me,Ae,Pe,Be,Se,qe,Me,Re]}class tt extends fe{constructor(e){super(),pe(this,e,et,Je,ce,{},null,[-1,-1])}}function nt(a){let e,t;return{c(){e=L("div"),t=L("div"),this.h()},l(s){e=O(s,"DIV",{id:!0,class:!0});var n=A(e);t=O(n,"DIV",{id:!0,class:!0}),A(t).forEach(k),n.forEach(k),this.h()},h(){_(t,"id","quill-editor"),_(t,"class","svelte-1259osz"),_(e,"id","quill-editor-wrapper"),_(e,"class","svelte-1259osz")},m(s,n){$(s,e,n),D(e,t),a[3](t)},p:Z,i:Z,o:Z,d(s){s&&k(e),a[3](null)}}}function st(a,e,t){let{deltaOps:s}=e,n,o;async function p(){const{default:i}=await Ke(()=>import("../chunks/quill.BqYzQad1.js"),[],import.meta.url);o&&(t(2,n=new i(o,{formats:["bold","italic","underline","strike","code"],placeholder:"Enter text here"})),n.setContents(s),n.on("text-change",c))}function c(i,h,f){f!=="api"&&s.push(...i.ops)}ke(()=>{p().then(()=>{n.keyboard.addBinding({key:"/",altKey:!0},()=>{n.format("code",!n.getFormat().code)}),n.keyboard.addBinding({key:"-",altKey:!0},()=>{n.format("strike",!n.getFormat().strike)})})});function m(i){R[i?"unshift":"push"](()=>{o=i,t(0,o)})}return a.$$set=i=>{"deltaOps"in i&&t(1,s=i.deltaOps)},a.$$.update=()=>{a.$$.dirty&6&&n&&n.setContents(s)},[o,s,n,m]}class at extends fe{constructor(e){super(),pe(this,e,st,nt,ce,{deltaOps:1})}}function lt(a){let e,t,s,n,o,p;t=new tt({});function c(i){a[2](i)}let m={};return a[0]!==void 0&&(m.deltaOps=a[0]),n=new at({props:m}),R.push(()=>Le(n,"deltaOps",c)),{c(){e=L("div"),ie(t.$$.fragment),s=X(),ie(n.$$.fragment),this.h()},l(i){e=O(i,"DIV",{class:!0});var h=A(e);oe(t.$$.fragment,h),s=F(h),oe(n.$$.fragment,h),h.forEach(k),this.h()},h(){_(e,"class","container svelte-1gpimha")},m(i,h){$(i,e,h),re(t,e,null),D(e,s),re(n,e,null),p=!0},p(i,[h]){const f={};!o&&h&1&&(o=!0,f.deltaOps=i[0],De(()=>o=!1)),n.$set(f)},i(i){p||(J(t.$$.fragment,i),J(n.$$.fragment,i),p=!0)},o(i){x(t.$$.fragment,i),x(n.$$.fragment,i),p=!1},d(i){i&&k(e),ue(t),ue(n)}}}function it(a,e,t){let s,n;Ie(a,M,c=>t(1,n=c));const o=[{insert:"Testing "},{insert:"inline",attributes:{code:!0}},{insert:" code!"}];P.newTab({data:{id:0,title:"Hey 👋",DeltaOps:o}});function p(c){s=c,t(0,s),t(1,n)}return a.$$.update=()=>{a.$$.dirty&2&&t(0,s=n.tabs.length>0?n.tabs[n.activeIndex].DeltaOps:[{insert:"Click the "},{insert:"+",attributes:{code:!0}},{insert:" to create a new tab"}])},[s,n,p]}class pt extends fe{constructor(e){super(),pe(this,e,it,lt,ce,{})}}export{pt as component};
