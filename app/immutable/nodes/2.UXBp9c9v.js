import{s as J,n as H,j as oe,r as Ne,b as N,c as ve,o as Le,a as qe,y as Ie}from"../chunks/scheduler.enZu1EuY.js";import{S as K,i as Q,e as k,c as T,a as C,d as I,l as w,u as ee,g as S,h as E,m as X,C as We,s as q,x as U,f as W,y as z,D as fe,E as se,z as Y,F as de,p as V,o as P,A as F,v as we,r as ke,q as te,G as Te}from"../chunks/index.CRfKgsjb.js";import{e as he,u as He,o as Oe,a as ae,b as me,c as j}from"../chunks/animate.CysUV05B.js";import{b as re,w as Xe}from"../chunks/paths.CG3uVDCK.js";function Ue(t){let e,n,s,l;return{c(){e=k("button"),n=k("div"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var o=C(e);n=T(o,"DIV",{class:!0,style:!0}),C(n).forEach(I),o.forEach(I),this.h()},h(){w(n,"class","icon svelte-fsrv9v"),ee(n,"-webkit-mask","url("+t[1]+") no-repeat center / contain"),ee(n,"mask","url("+t[1]+") no-repeat center / contain"),w(e,"class","svelte-fsrv9v")},m(a,o){S(a,e,o),E(e,n),s||(l=X(e,"click",We(function(){oe(t[0])&&t[0].apply(this,arguments)})),s=!0)},p(a,[o]){t=a,o&2&&ee(n,"-webkit-mask","url("+t[1]+") no-repeat center / contain"),o&2&&ee(n,"mask","url("+t[1]+") no-repeat center / contain")},i:H,o:H,d(a){a&&I(e),s=!1,l()}}}function ze(t,e,n){let{onClick:s=()=>{}}=e,{url:l=""}=e;return t.$$set=a=>{"onClick"in a&&n(0,s=a.onClick),"url"in a&&n(1,l=a.url)},[s,l]}class ue extends K{constructor(e){super(),Q(this,e,ze,Ue,J,{onClick:0,url:1})}}function Ye(t){let e,n,s,l,a,o,_,f,d;return o=new ue({props:{url:re+"/images/svg/cancel.svg",onClick:t[2]}}),{c(){e=k("div"),n=k("button"),s=k("input"),l=q(),a=k("div"),U(o.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0});var p=C(e);n=T(p,"BUTTON",{class:!0});var c=C(n);s=T(c,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),l=W(c),a=T(c,"DIV",{class:!0});var M=C(a);z(o.$$.fragment,M),M.forEach(I),c.forEach(I),p.forEach(I),this.h()},h(){w(s,"autocorrect","off"),w(s,"autocomplete","off"),w(s,"spellcheck","false"),w(s,"type","text"),w(s,"class","svelte-luvzq6"),w(a,"class","close-button svelte-luvzq6"),w(n,"class","tab svelte-luvzq6"),fe(n,"active",t[1]),w(e,"class","container svelte-luvzq6")},m(r,p){S(r,e,p),E(e,n),E(n,s),t[6](s),se(s,t[0]),E(n,l),E(n,a),Y(o,a,null),_=!0,f||(d=[X(s,"input",t[7]),X(n,"dblclick",de(t[8])),X(n,"click",function(){oe(t[3])&&t[3].apply(this,arguments)}),X(n,"mousedown",de(function(){oe(t[4])&&t[4].apply(this,arguments)}))],f=!0)},p(r,[p]){t=r,p&1&&s.value!==t[0]&&se(s,t[0]);const c={};p&4&&(c.onClick=t[2]),o.$set(c),(!_||p&2)&&fe(n,"active",t[1])},i(r){_||(V(o.$$.fragment,r),_=!0)},o(r){P(o.$$.fragment,r),_=!1},d(r){r&&I(e),t[6](null),F(o),f=!1,Ne(d)}}}function Fe(t,e,n){let{title:s=""}=e,{active:l=!1}=e,{onClose:a=()=>{}}=e,{onClick:o=()=>{}}=e,{onMousedown:_=c=>{}}=e,f;function d(c){N[c?"unshift":"push"](()=>{f=c,n(5,f)})}function r(){s=this.value,n(0,s)}const p=()=>f.select();return t.$$set=c=>{"title"in c&&n(0,s=c.title),"active"in c&&n(1,l=c.active),"onClose"in c&&n(2,a=c.onClose),"onClick"in c&&n(3,o=c.onClick),"onMousedown"in c&&n(4,_=c.onMousedown)},[s,l,a,o,_,f,d,r,p]}class Ge extends K{constructor(e){super(),Q(this,e,Fe,Ye,J,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}const R=Xe({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:t=>{const{title:e="Untitled",text:n="",callback:s=()=>{}}=t||{};R.update(l=>(l.tabs.push({title:e,text:n}),l.activeIndex=l.tabs.length-1,l)),s()},removeTab:t=>{R.update(e=>(e.tabs.splice(t,1),t==e.activeIndex-1?e.activeIndex=Math.max(0,t):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1),e))},setActiveIndex:t=>{R.update(e=>(t<0?e.activeIndex=0:t>=e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=t,e))},setPlaceholderIndex:t=>{R.update(e=>(e.placeholderIndex=t===void 0||t<0||t>=e.tabs.length?-1:t,e))},swapTabs:(t,e,n=()=>{})=>{R.update(s=>{const l=s.tabs[t];return s.tabs[t]=s.tabs[e],s.tabs[e]=l,s.activeIndex==t?s.activeIndex=e:s.activeIndex==e&&(s.activeIndex=t),s.placeholderIndex==t?s.placeholderIndex=e:s.placeholderIndex==e&&(s.placeholderIndex=t),s}),n()}};function ge(t,e,n){const s=t.slice();return s[34]=e[n],s[35]=e,s[36]=n,s}function je(t){let e,n,s,l,a=t[36],o,_,f;function d(){return t[13](t[36])}function r(){return t[14](t[36])}function p(...g){return t[15](t[36],...g)}function c(g){t[16](g,t[36])}let M={active:t[5].activeIndex==t[36],onClose:d,onClick:r,onMousedown:p};t[5].tabs[t[36]].title!==void 0&&(M.title=t[5].tabs[t[36]].title),n=new Ge({props:M}),N.push(()=>Te(n,"title",c));const A=()=>t[17](e,a),y=()=>t[17](null,a);return{c(){e=k("div"),U(n.$$.fragment),l=q(),this.h()},l(g){e=T(g,"DIV",{class:!0});var h=C(e);z(n.$$.fragment,h),l=W(h),h.forEach(I),this.h()},h(){w(e,"class","tab-container svelte-1u8aw5h")},m(g,h){S(g,e,h),Y(n,e,null),E(e,l),A(),o=!0,_||(f=qe(t[8].call(null,e)),_=!0)},p(g,h){t=g;const u={};h[0]&32&&(u.active=t[5].activeIndex==t[36]),h[0]&32&&(u.onClose=d),h[0]&32&&(u.onClick=r),h[0]&32&&(u.onMousedown=p),!s&&h[0]&32&&(s=!0,u.title=t[5].tabs[t[36]].title,Ie(()=>s=!1)),n.$set(u),a!==t[36]&&(y(),a=t[36],A())},i(g){o||(V(n.$$.fragment,g),o=!0)},o(g){P(n.$$.fragment,g),o=!1},d(g){g&&I(e),F(n),y(),_=!1,f()}}}function Ze(t){let e,n=t[36];const s=()=>t[12](e,n),l=()=>t[12](null,n);return{c(){e=k("div"),this.h()},l(a){e=T(a,"DIV",{class:!0}),C(e).forEach(I),this.h()},h(){w(e,"class","tab-container placeholder svelte-1u8aw5h")},m(a,o){S(a,e,o),s()},p(a,o){t=a,n!==t[36]&&(l(),n=t[36],s())},i:H,o:H,d(a){a&&I(e),l()}}}function pe(t,e){let n,s,l,a,o;const _=[Ze,je],f=[];function d(r,p){return r[5].placeholderIndex==r[36]?0:1}return s=d(e),l=f[s]=_[s](e),{key:t,first:null,c(){n=te(),l.c(),a=te(),this.h()},l(r){n=te(),l.l(r),a=te(),this.h()},h(){this.first=n},m(r,p){S(r,n,p),f[s].m(r,p),S(r,a,p),o=!0},p(r,p){e=r;let c=s;s=d(e),s===c?f[s].p(e,p):(we(),P(f[c],1,1,()=>{f[c]=null}),ke(),l=f[s],l?l.p(e,p):(l=f[s]=_[s](e),l.c()),V(l,1),l.m(a.parentNode,a))},i(r){o||(V(l),o=!0)},o(r){P(l),o=!1},d(r){r&&(I(n),I(a)),f[s].d(r)}}}function be(t){let e;return{c(){e=k("div"),this.h()},l(n){e=T(n,"DIV",{draggable:!0,class:!0}),C(e).forEach(I),this.h()},h(){w(e,"draggable","true"),w(e,"class","cloned-tab tab-container svelte-1u8aw5h")},m(n,s){S(n,e,s),t[20](e)},p:H,d(n){n&&I(e),t[20](null)}}}function Je(t){let e,n,s,l=[],a=new Map,o,_,f,d,r,p,c,M,A,y=he(t[5].tabs);const g=u=>u[34];for(let u=0;u<y.length;u+=1){let m=ge(t,y,u),D=g(m);a.set(D,l[u]=pe(D,m))}f=new ue({props:{url:re+"/images/svg/plus.svg",onClick:t[7]}}),r=new ue({props:{url:re+"/images/svg/swap.svg",onClick:t[19]}});let h=t[3]&&be(t);return{c(){e=k("div"),n=k("div"),s=k("div");for(let u=0;u<l.length;u+=1)l[u].c();o=q(),_=k("div"),U(f.$$.fragment),d=q(),U(r.$$.fragment),p=q(),c=k("div"),M=q(),h&&h.c(),this.h()},l(u){e=T(u,"DIV",{});var m=C(e);n=T(m,"DIV",{class:!0});var D=C(n);s=T(D,"DIV",{class:!0});var x=C(s);for(let O=0;O<l.length;O+=1)l[O].l(x);x.forEach(I),o=W(D),_=T(D,"DIV",{class:!0});var L=C(_);z(f.$$.fragment,L),d=W(L),z(r.$$.fragment,L),L.forEach(I),D.forEach(I),p=W(m),c=T(m,"DIV",{class:!0}),C(c).forEach(I),M=W(m),h&&h.l(m),m.forEach(I),this.h()},h(){w(s,"class","tabs svelte-1u8aw5h"),w(_,"class","buttons svelte-1u8aw5h"),w(n,"class","toolbar svelte-1u8aw5h"),w(c,"class","separator svelte-1u8aw5h")},m(u,m){S(u,e,m),E(e,n),E(n,s);for(let D=0;D<l.length;D+=1)l[D]&&l[D].m(s,null);t[18](s),E(n,o),E(n,_),Y(f,_,null),E(_,d),Y(r,_,null),E(e,p),E(e,c),E(e,M),h&&h.m(e,null),t[21](e),A=!0},p(u,m){m[0]&2658&&(y=he(u[5].tabs),we(),l=He(l,m,g,1,u,y,a,s,Oe,pe,null,ge),ke()),u[3]?h?h.p(u,m):(h=be(u),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(u){if(!A){for(let m=0;m<y.length;m+=1)V(l[m]);V(f.$$.fragment,u),V(r.$$.fragment,u),A=!0}},o(u){for(let m=0;m<l.length;m+=1)P(l[m]);P(f.$$.fragment,u),P(r.$$.fragment,u),A=!1},d(u){u&&I(e);for(let m=0;m<l.length;m+=1)l[m].d();t[18](null),F(f),F(r),h&&h.d(),t[21](null)}}}const _e=200,Ke=12,ne=140,Z=70,ie=160,Qe=1600;function xe(t,e,n){let s;ve(t,R,i=>n(5,s=i));let l,a=[],o=0;Le(()=>{l.style.setProperty("--tab-max-width",`${ne}px`),l.style.setProperty("--tab-min-width",`${Z}px`)});const _=(i,b=300)=>{let v;return(...G)=>{clearTimeout(v),v=setTimeout(()=>{i.apply(this,G)},b)}};function f(i){B.setActiveIndex(i),l.children[i].scrollIntoView({behavior:"smooth"})}function d(){B.newTab()}function r(i){if(!l)return;const b=i.getBoundingClientRect().width;ae({duration:ie,easing:j,onStep:(v,G)=>{s.tabs.length==1?n(0,l.style.gridTemplateColumns=`minmax(${v*Z}px, ${v*b}px)`,l):n(0,l.style.gridTemplateColumns=`repeat(${s.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*Z}px, ${v*b}px)`,l),n(0,l.scrollLeft=l.scrollWidth,l)},onEnd:()=>{n(0,l.style.gridTemplateColumns="",l)}})}const p=_(()=>{if(!l)return;l.style.setProperty("--tab-max-width",`${ne}px`);const i=a[0].getBoundingClientRect().width;ae({duration:ie,easing:j,onStep:(b,v)=>{l.style.setProperty("--tab-max-width",`${o+b*(i-o)}px`)},onEnd:()=>{l.style.setProperty("--tab-max-width",`${ne}px`)}})},Qe);function c(i){s.tabs.length!=1&&(o=a[i].getBoundingClientRect().width,i<s.tabs.length-1&&o<ne&&(l.style.setProperty("--tab-max-width",`${o}px`),p()),i==s.tabs.length-1?B.setActiveIndex(i-1):i==s.activeIndex&&B.setActiveIndex(i+1),ae({duration:ie,easing:j,onStep:(b,v)=>{i==0?n(0,l.style.gridTemplateColumns=`minmax(${v*Z}px, ${v*o}px)`,l):n(0,l.style.gridTemplateColumns=`repeat(${i}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*Z}px, ${v*o}px)`,l)},onEnd:()=>{n(0,l.style.gridTemplateColumns="",l),B.removeTab(i)}}))}const M=(i,b)=>{const v=l.children[i],G=l.children[b],ce=v.getBoundingClientRect().left-G.getBoundingClientRect().left;B.swapTabs(i,b,()=>{me(v,{duration:_e,easing:j,css:(Pe,le)=>`transform: translateX(${ce*le}px);`}),me(G,{duration:_e,easing:j,css:(Pe,le)=>`transform: translateX(${-ce*le}px);`})})};let A=null,y=-1,g,h=!1,u=!1,m;function D(i,b){console.log("weee!!!!");let v=m.getBoundingClientRect();if(i<v.left||i>v.right||b<v.top||b>v.bottom){u||(n(2,g.style.cssText="",g),g.addEventListener("dragstart",x),g.dispatchEvent(new Event("dragstart"))),u=!0;return}u=!1}function x(i){var b,v;console.log("dragstart"),!(!i.dataTransfer||!g)&&((b=i.dataTransfer)==null||b.setDragImage(g,0,0),(v=i.dataTransfer)==null||v.setData("text/plain",g.id),i.preventDefault())}function L(i,b){if(!i.target)return;let v=i.target;window.addEventListener("mousemove",O),window.addEventListener("mouseup",$),window.addEventListener("blur",$),B.setActiveIndex(b),n(2,g=v.cloneNode(!0)),A=[i.clientX,i.clientY],v.getBoundingClientRect().left-i.clientX,v.getBoundingClientRect().top-i.clientY,y=b}function O(i){if(h){D(i.clientX,i.clientY);return}A===null||Math.hypot(A[0]-i.clientX,A[1]-i.clientY)<Ke||(n(3,h=!0),B.setPlaceholderIndex(y),B.setActiveIndex(y),g.classList.add("cloned-tab"),i.preventDefault(),console.log("dragging tab: ",y))}function $(){window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",$),window.removeEventListener("blur",$),A=null,n(3,h=!1),u=!1,y=-1,B.setPlaceholderIndex(),console.log("stop dragging")}function Ee(i,b){N[i?"unshift":"push"](()=>{a[b]=i,n(1,a)})}const Ce=i=>c(i),ye=i=>f(i),De=(i,b)=>L(b,i);function Ae(i,b){t.$$.not_equal(s.tabs[b].title,i)&&(s.tabs[b].title=i,R.set(s))}function Me(i,b){N[i?"unshift":"push"](()=>{a[b]=i,n(1,a)})}function Be(i){N[i?"unshift":"push"](()=>{l=i,n(0,l)})}const Se=()=>{M(0,1)};function Re(i){N[i?"unshift":"push"](()=>{g=i,n(2,g)})}function Ve(i){N[i?"unshift":"push"](()=>{m=i,n(4,m)})}return[l,a,g,h,m,s,f,d,r,c,M,L,Ee,Ce,ye,De,Ae,Me,Be,Se,Re,Ve]}class $e extends K{constructor(e){super(),Q(this,e,xe,Je,J,{},null,[-1,-1])}}function et(t){let e,n,s,l;return{c(){e=k("div"),n=k("textarea"),this.h()},l(a){e=T(a,"DIV",{id:!0,class:!0});var o=C(e);n=T(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),C(n).forEach(I),o.forEach(I),this.h()},h(){w(n,"spellcheck","false"),w(n,"name","editor"),w(n,"id","text"),w(n,"class","svelte-7cpmmf"),w(e,"id","editor"),w(e,"class","svelte-7cpmmf")},m(a,o){S(a,e,o),E(e,n),se(n,t[0]),s||(l=X(n,"input",t[1]),s=!0)},p(a,[o]){o&1&&se(n,a[0])},i:H,o:H,d(a){a&&I(e),s=!1,l()}}}function tt(t,e,n){let{text:s}=e;function l(){s=this.value,n(0,s)}return t.$$set=a=>{"text"in a&&n(0,s=a.text)},[s,l]}class nt extends K{constructor(e){super(),Q(this,e,tt,et,J,{text:0})}}function st(t){let e,n,s,l,a,o;n=new $e({});function _(d){t[1](d)}let f={};return t[0].tabs[t[0].activeIndex].text!==void 0&&(f.text=t[0].tabs[t[0].activeIndex].text),l=new nt({props:f}),N.push(()=>Te(l,"text",_)),{c(){e=k("div"),U(n.$$.fragment),s=q(),U(l.$$.fragment),this.h()},l(d){e=T(d,"DIV",{class:!0});var r=C(e);z(n.$$.fragment,r),s=W(r),z(l.$$.fragment,r),r.forEach(I),this.h()},h(){w(e,"class","container svelte-16qa0xo")},m(d,r){S(d,e,r),Y(n,e,null),E(e,s),Y(l,e,null),o=!0},p(d,[r]){const p={};!a&&r&1&&(a=!0,p.text=d[0].tabs[d[0].activeIndex].text,Ie(()=>a=!1)),l.$set(p)},i(d){o||(V(n.$$.fragment,d),V(l.$$.fragment,d),o=!0)},o(d){P(n.$$.fragment,d),P(l.$$.fragment,d),o=!1},d(d){d&&I(e),F(n),F(l)}}}function lt(t,e,n){let s;ve(t,R,a=>n(0,s=a)),B.newTab({title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.18"});function l(a){t.$$.not_equal(s.tabs[s.activeIndex].text,a)&&(s.tabs[s.activeIndex].text=a,R.set(s))}return[s,l]}class ut extends K{constructor(e){super(),Q(this,e,lt,st,J,{})}}export{ut as component};
