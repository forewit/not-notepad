import{s as tt,n as ot,i as ct,r as Pt,b as W,c as _t,o as Lt,y as Wt,z as vt}from"../chunks/scheduler.DvlNEcs7.js";import{S as et,i as nt,e as T,c as C,a as E,d as w,o as _,p as at,g as Z,h as k,C as O,D as Ht,s as j,u as q,f as Y,v as U,E as F,F as rt,w as G,G as ht,k as H,l as N,x as z,q as Nt,n as Xt,H as wt}from"../chunks/index.CJAcPUyC.js";import{e as pt,u as Ot,o as jt,a as ut,b as Q,d as gt}from"../chunks/animate.BtsrPL5E.js";import{b as kt,w as Yt}from"../chunks/paths.cyoRetKE.js";function qt(l){let t,e,n,s;return{c(){t=T("button"),e=T("div"),this.h()},l(i){t=C(i,"BUTTON",{class:!0});var o=E(t);e=C(o,"DIV",{class:!0,style:!0}),E(e).forEach(w),o.forEach(w),this.h()},h(){_(e,"class","icon svelte-fsrv9v"),at(e,"-webkit-mask","url("+l[1]+") no-repeat center / contain"),at(e,"mask","url("+l[1]+") no-repeat center / contain"),_(t,"class","svelte-fsrv9v")},m(i,o){Z(i,t,o),k(t,e),n||(s=O(t,"click",Ht(function(){ct(l[0])&&l[0].apply(this,arguments)})),n=!0)},p(i,[o]){l=i,o&2&&at(e,"-webkit-mask","url("+l[1]+") no-repeat center / contain"),o&2&&at(e,"mask","url("+l[1]+") no-repeat center / contain")},i:ot,o:ot,d(i){i&&w(t),n=!1,s()}}}function Ut(l,t,e){let{onClick:n=()=>{}}=t,{url:s=""}=t;return l.$$set=i=>{"onClick"in i&&e(0,n=i.onClick),"url"in i&&e(1,s=i.url)},[n,s]}class Tt extends et{constructor(t){super(),nt(this,t,Ut,qt,tt,{onClick:0,url:1})}}function Ft(l){let t,e,n,s,i,o,b,m,p;return o=new Tt({props:{url:kt+"/images/svg/cancel.svg",onClick:l[2]}}),{c(){t=T("div"),e=T("button"),n=T("input"),s=j(),i=T("div"),q(o.$$.fragment),this.h()},l(f){t=C(f,"DIV",{class:!0});var g=E(t);e=C(g,"BUTTON",{class:!0});var d=E(e);n=C(d,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),s=Y(d),i=C(d,"DIV",{class:!0});var A=E(i);U(o.$$.fragment,A),A.forEach(w),d.forEach(w),g.forEach(w),this.h()},h(){_(n,"autocorrect","off"),_(n,"autocomplete","off"),_(n,"spellcheck","false"),_(n,"type","text"),_(n,"class","svelte-1tws2uh"),_(i,"class","close-button svelte-1tws2uh"),_(e,"class","tab svelte-1tws2uh"),F(e,"active",l[1]),_(t,"class","container svelte-1tws2uh")},m(f,g){Z(f,t,g),k(t,e),k(e,n),l[6](n),rt(n,l[0]),k(e,s),k(e,i),G(o,i,null),b=!0,m||(p=[O(n,"input",l[7]),O(e,"dblclick",ht(l[8])),O(e,"click",function(){ct(l[3])&&l[3].apply(this,arguments)}),O(e,"mousedown",ht(function(){ct(l[4])&&l[4].apply(this,arguments)}))],m=!0)},p(f,[g]){l=f,g&1&&n.value!==l[0]&&rt(n,l[0]);const d={};g&4&&(d.onClick=l[2]),o.$set(d),(!b||g&2)&&F(e,"active",l[1])},i(f){b||(H(o.$$.fragment,f),b=!0)},o(f){N(o.$$.fragment,f),b=!1},d(f){f&&w(t),l[6](null),z(o),m=!1,Pt(p)}}}function Gt(l,t,e){let{title:n=""}=t,{active:s=!1}=t,{onClose:i=()=>{}}=t,{onClick:o=()=>{}}=t,{onMousedown:b=d=>{}}=t,m;function p(d){W[d?"unshift":"push"](()=>{m=d,e(5,m)})}function f(){n=this.value,e(0,n)}const g=()=>m.select();return l.$$set=d=>{"title"in d&&e(0,n=d.title),"active"in d&&e(1,s=d.active),"onClose"in d&&e(2,i=d.onClose),"onClick"in d&&e(3,o=d.onClick),"onMousedown"in d&&e(4,b=d.onMousedown)},[n,s,i,o,b,m,p,f,g]}class Ct extends et{constructor(t){super(),nt(this,t,Gt,Ft,tt,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}let zt=0;const V=Yt({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:l=>{const{data:t={id:zt++,title:"Untitled",text:""},index:e=-1,callback:n=()=>{}}=l||{};V.update(s=>(s.tabs.some(i=>i.id==t.id)||(e<0?(s.tabs.push(t),s.activeIndex=s.tabs.length-1):(s.tabs.splice(e,0,t),s.activeIndex=e)),s)),n()},removeTab:l=>{V.update(t=>(l<0||l>=t.tabs.length||(t.placeholderIndex==l&&(t.placeholderIndex=-1),t.tabs.splice(l,1),l==t.activeIndex-1?t.activeIndex=Math.max(0,l):t.activeIndex=Math.min(t.activeIndex,t.tabs.length-1)),t))},setActiveIndex:l=>{V.update(t=>(l<0?t.activeIndex=0:l>t.tabs.length?t.activeIndex=t.tabs.length-1:t.activeIndex=l,t))},setPlaceholderIndex:l=>{V.update(t=>(t.placeholderIndex=l===void 0||l<0||l>=t.tabs.length?-1:l,t))},moveTab:(l,t,e=()=>{})=>{l!=t&&(V.update(n=>{if(l<0||l>=n.tabs.length||t<0||t>=n.tabs.length)return n;const s=n.tabs[l];return n.tabs.splice(l,1),n.tabs.splice(t,0,s),n.activeIndex==l&&(n.activeIndex=t),n.placeholderIndex==l&&(n.placeholderIndex=t),n}),e())}};function mt(l,t,e){const n=l.slice();return n[35]=t[e],n[36]=t,n[37]=e,n}function bt(l,t){let e,n,s,i,o=t[37],b,m,p;function f(){return t[13](t[37])}function g(){return t[14](t[37])}function d(...u){return t[15](t[37],...u)}function A(u){t[16](u,t[37])}let I={active:t[7].activeIndex==t[37],onClose:f,onClick:g,onMousedown:d};t[7].tabs[t[37]].title!==void 0&&(I.title=t[7].tabs[t[37]].title),n=new Ct({props:I}),W.push(()=>wt(n,"title",A));const D=()=>t[17](e,o),S=()=>t[17](null,o);return{key:l,first:null,c(){e=T("div"),q(n.$$.fragment),i=j(),this.h()},l(u){e=C(u,"DIV",{class:!0});var r=E(e);U(n.$$.fragment,r),i=Y(r),r.forEach(w),this.h()},h(){_(e,"class","tab-container svelte-13jp0dd"),F(e,"placeholder",t[7].placeholderIndex==t[37]),this.first=e},m(u,r){Z(u,e,r),G(n,e,null),k(e,i),D(),b=!0,m||(p=Wt(t[10].call(null,e)),m=!0)},p(u,r){t=u;const c={};r[0]&128&&(c.active=t[7].activeIndex==t[37]),r[0]&128&&(c.onClose=f),r[0]&128&&(c.onClick=g),r[0]&128&&(c.onMousedown=d),!s&&r[0]&128&&(s=!0,c.title=t[7].tabs[t[37]].title,vt(()=>s=!1)),n.$set(c),o!==t[37]&&(S(),o=t[37],D()),(!b||r[0]&128)&&F(e,"placeholder",t[7].placeholderIndex==t[37])},i(u){b||(H(n.$$.fragment,u),b=!0)},o(u){N(n.$$.fragment,u),b=!1},d(u){u&&w(e),z(n),S(),m=!1,p()}}}function Zt(l){let t,e,n,s=[],i=new Map,o,b,m,p,f,g,d,A,I,D=pt(l[7].tabs);const S=u=>u[35];for(let u=0;u<D.length;u+=1){let r=mt(l,D,u),c=S(r);i.set(c,s[u]=bt(c,r))}return m=new Tt({props:{url:kt+"/images/svg/plus.svg",onClick:l[9]}}),g=new Ct({props:{title:l[2].title,active:!l[5]}}),{c(){t=T("div"),e=T("div"),n=T("div");for(let u=0;u<s.length;u+=1)s[u].c();o=j(),b=T("div"),q(m.$$.fragment),p=j(),f=T("div"),q(g.$$.fragment),d=j(),A=T("div"),this.h()},l(u){t=C(u,"DIV",{});var r=E(t);e=C(r,"DIV",{class:!0});var c=E(e);n=C(c,"DIV",{class:!0});var P=E(n);for(let L=0;L<s.length;L+=1)s[L].l(P);P.forEach(w),o=Y(c),b=C(c,"DIV",{class:!0});var M=E(b);U(m.$$.fragment,M),M.forEach(w),p=Y(c),f=C(c,"DIV",{class:!0});var X=E(f);U(g.$$.fragment,X),X.forEach(w),c.forEach(w),d=Y(r),A=C(r,"DIV",{class:!0}),E(A).forEach(w),r.forEach(w),this.h()},h(){_(n,"class","tabs svelte-13jp0dd"),_(b,"class","buttons svelte-13jp0dd"),_(f,"class","clone svelte-13jp0dd"),F(f,"dragging",l[4]),_(e,"class","toolbar svelte-13jp0dd"),_(A,"class","separator svelte-13jp0dd")},m(u,r){Z(u,t,r),k(t,e),k(e,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l[18](n),k(e,o),k(e,b),G(m,b,null),k(e,p),k(e,f),G(g,f,null),l[19](f),k(t,d),k(t,A),l[20](t),I=!0},p(u,r){r[0]&6530&&(D=pt(u[7].tabs),Nt(),s=Ot(s,r,S,1,u,D,i,n,jt,bt,null,mt),Xt());const c={};r[0]&4&&(c.title=u[2].title),r[0]&32&&(c.active=!u[5]),g.$set(c),(!I||r[0]&16)&&F(f,"dragging",u[4])},i(u){if(!I){for(let r=0;r<D.length;r+=1)H(s[r]);H(m.$$.fragment,u),H(g.$$.fragment,u),I=!0}},o(u){for(let r=0;r<s.length;r+=1)N(s[r]);N(m.$$.fragment,u),N(g.$$.fragment,u),I=!1},d(u){u&&w(t);for(let r=0;r<s.length;r+=1)s[r].d();l[18](null),z(m),z(g),l[19](null),l[20](null)}}}const Jt=12,it=140,x=70,$=160,Kt=1600;function Qt(l,t,e){let n;_t(l,V,a=>e(7,n=a));let s,i=[],o=0;Lt(()=>{s.style.setProperty("--tab-max-width",`${it}px`),s.style.setProperty("--tab-min-width",`${x}px`)});const b=(a,h=300)=>{let v;return(...y)=>{clearTimeout(v),v=setTimeout(()=>{a.apply(this,y)},h)}};function m(a){B.setActiveIndex(a),s.children[a].scrollIntoView({behavior:"smooth"})}function p(){B.newTab()}function f(a){if(!s)return;const h=a.getBoundingClientRect().width;ut({duration:$,easing:Q,onStep:(v,y)=>{n.tabs.length==1?e(0,s.style.gridTemplateColumns=`minmax(${v*x}px, ${v*h}px)`,s):e(0,s.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*x}px, ${v*h}px)`,s),e(0,s.scrollLeft=s.scrollWidth,s)},onEnd:()=>{e(0,s.style.gridTemplateColumns="",s)}})}const g=b(()=>{if(!s)return;s.style.setProperty("--tab-max-width",`${it}px`);const a=i[0].getBoundingClientRect().width;ut({duration:$,easing:Q,onStep:(h,v)=>{s.style.setProperty("--tab-max-width",`${o+h*(a-o)}px`)},onEnd:()=>{s.style.setProperty("--tab-max-width",`${it}px`)}})},Kt),d=a=>{if(!i[a]){console.warn("Cannot close tab!");return}o=i[a].getBoundingClientRect().width,a<n.tabs.length-1&&o<it&&(s.style.setProperty("--tab-max-width",`${o}px`),g()),a==n.tabs.length-1?B.setActiveIndex(a-1):a==n.activeIndex&&B.setActiveIndex(a+1),ut({duration:$,easing:Q,onStep:(h,v)=>{a==0?e(0,s.style.gridTemplateColumns=`minmax(${v*x}px, ${v*o}px)`,s):e(0,s.style.gridTemplateColumns=`repeat(${a}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*x}px, ${v*o}px)`,s)},onEnd:()=>{e(0,s.style.gridTemplateColumns="",s),B.removeTab(a)}})},A=(a,h)=>{const v=i[0].getBoundingClientRect().width;console.log(a,h),B.moveTab(a,h,()=>{if(a>h)for(let y=h;y<a;y++)gt(i[y],{duration:$,easing:Q,css:(J,R)=>`transform: translateX(-${R*v}px);`});if(a<h)for(let y=h;y>a;y--)gt(i[y],{duration:$,easing:Q,css:(J,R)=>`transform: translateX(${R*v}px);`})})};let I=null,D=-1,S={id:-1,title:"",text:""},u,r,c,P=!1,M=!1,X=0,L=0,st;function Et(a,h){e(3,c.style.left=`${a+X}px`,c),e(3,c.style.top=`${r.top}px`,c);let v=st.getBoundingClientRect();if(a<v.left||a>v.right||h<v.top||h>v.bottom){M||(console.log("out"),c.addEventListener("dragstart",It),c.dispatchEvent(new Event("dragstart"))),e(3,c.style.top=`${h+L}px`,c),e(5,M=!0);return}M&&(e(5,M=!1),console.log("in"));const y=-s.scrollLeft,J=i[0].getBoundingClientRect().width;let R=-1;if(a>y+n.tabs.length*J)R=n.tabs.length-1;else for(let K=0;K<n.tabs.length;K++)if(a>y+K*J&&a<y+(K+1)*J){R=K;break}a<10?s.scrollBy({left:-10,behavior:"smooth"}):a>s.clientWidth-10&&s.scrollBy({left:10,behavior:"smooth"}),R!=-1&&A(n.placeholderIndex,R)}function It(a){a.dataTransfer}function ft(a,h){a.target&&(window.addEventListener("mousemove",dt),window.addEventListener("mouseup",lt),window.addEventListener("blur",lt),B.setActiveIndex(h),u=a.target,r=u.getBoundingClientRect(),I=[a.clientX,a.clientY],X=r.left-a.clientX,L=r.top-a.clientY,e(3,c.style.width=`${r.width}px`,c),e(3,c.style.left=`${r.left}px`,c),e(3,c.style.top=`${r.top}px`,c),e(2,S={...n.tabs[h]}),D=h)}function dt(a){if(P){Et(a.clientX,a.clientY);return}I===null||Math.hypot(I[0]-a.clientX,I[1]-a.clientY)<Jt||(e(4,P=!0),B.setPlaceholderIndex(D),B.setActiveIndex(D))}function lt(){window.removeEventListener("mousemove",dt),window.removeEventListener("mouseup",lt),window.removeEventListener("blur",lt),I=null,e(4,P=!1),e(5,M=!1),D=-1,X=0,L=0,B.setPlaceholderIndex()}const yt=a=>d(a),Dt=a=>m(a),At=(a,h)=>ft(h,a);function Bt(a,h){l.$$.not_equal(n.tabs[h].title,a)&&(n.tabs[h].title=a,V.set(n))}function Mt(a,h){W[a?"unshift":"push"](()=>{i[h]=a,e(1,i)})}function St(a){W[a?"unshift":"push"](()=>{s=a,e(0,s)})}function Rt(a){W[a?"unshift":"push"](()=>{c=a,e(3,c)})}function Vt(a){W[a?"unshift":"push"](()=>{st=a,e(6,st)})}return[s,i,S,c,P,M,st,n,m,p,f,d,ft,yt,Dt,At,Bt,Mt,St,Rt,Vt]}class xt extends et{constructor(t){super(),nt(this,t,Qt,Zt,tt,{},null,[-1,-1])}}function $t(l){let t,e,n,s;return{c(){t=T("div"),e=T("textarea"),this.h()},l(i){t=C(i,"DIV",{id:!0,class:!0});var o=E(t);e=C(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),E(e).forEach(w),o.forEach(w),this.h()},h(){_(e,"spellcheck","false"),_(e,"name","editor"),_(e,"id","text"),_(e,"class","svelte-7cpmmf"),_(t,"id","editor"),_(t,"class","svelte-7cpmmf")},m(i,o){Z(i,t,o),k(t,e),rt(e,l[0]),n||(s=O(e,"input",l[1]),n=!0)},p(i,[o]){o&1&&rt(e,i[0])},i:ot,o:ot,d(i){i&&w(t),n=!1,s()}}}function te(l,t,e){let{text:n}=t;function s(){n=this.value,e(0,n)}return l.$$set=i=>{"text"in i&&e(0,n=i.text)},[n,s]}class ee extends et{constructor(t){super(),nt(this,t,te,$t,tt,{text:0})}}function ne(l){let t,e,n,s,i,o;e=new xt({});function b(p){l[2](p)}let m={};return l[0].text!==void 0&&(m.text=l[0].text),s=new ee({props:m}),W.push(()=>wt(s,"text",b)),{c(){t=T("div"),q(e.$$.fragment),n=j(),q(s.$$.fragment),this.h()},l(p){t=C(p,"DIV",{class:!0});var f=E(t);U(e.$$.fragment,f),n=Y(f),U(s.$$.fragment,f),f.forEach(w),this.h()},h(){_(t,"class","container svelte-16qa0xo")},m(p,f){Z(p,t,f),G(e,t,null),k(t,n),G(s,t,null),o=!0},p(p,[f]){const g={};!i&&f&1&&(i=!0,g.text=p[0].text,vt(()=>i=!1)),s.$set(g)},i(p){o||(H(e.$$.fragment,p),H(s.$$.fragment,p),o=!0)},o(p){N(e.$$.fragment,p),N(s.$$.fragment,p),o=!1},d(p){p&&w(t),z(e),z(s)}}}function se(l,t,e){let n,s;_t(l,V,o=>e(1,s=o)),B.newTab({data:{title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.19"}});function i(o){l.$$.not_equal(n.text,o)&&(n.text=o,e(0,n),e(1,s))}return l.$$.update=()=>{l.$$.dirty&2&&e(0,n=s.tabs.length>0?s.tabs[s.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,s,i]}class re extends et{constructor(t){super(),nt(this,t,se,ne,tt,{})}}export{re as component};
