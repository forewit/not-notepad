import{s as C,v as q,w as z,x as O,y as V,c as $,o as R,n as D,a as w}from"../chunks/scheduler.CE28Mlnp.js";import{S as L,i as A,H as J,s as H,D as K,h as M,j as v,a as f,t as h,g as m,e as g,c as _,v as N,w as d,A as p,p as U,E as Q,q as W,k as T,r as x,u as B,d as G,o as X,n as Y}from"../chunks/index.D5PJChdz.js";import{s as P,a as b,t as Z,f as E,c as ee,b as j}from"../chunks/firebaseStore.DdkJNw79.js";import{g as te}from"../chunks/entry.D71KavaH.js";import{b as y}from"../chunks/paths.B8-opH-5.js";import{t as F}from"../chunks/themes.BTx5Q4mv.js";const se=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ae=!0,ne="always",ye=Object.freeze(Object.defineProperty({__proto__:null,prerender:ae,trailingSlash:ne},Symbol.toStringTag,{value:"Module"}));function re(i){let t,o,s;const a=i[3].default,n=q(a,i,i[2],null);return{c(){t=new J(!1),o=H(),n&&n.c(),this.h()},l(e){t=K(e,!1),o=M(e),n&&n.l(e),this.h()},h(){t.a=o},m(e,r){t.m(i[0],e,r),v(e,o,r),n&&n.m(e,r),s=!0},p(e,[r]){(!s||r&1)&&t.p(e[0]),n&&n.p&&(!s||r&4)&&z(n,a,e,e[2],s?V(a,e[2],r,null):O(e[2]),null)},i(e){s||(f(n,e),s=!0)},o(e){h(n,e),s=!1},d(e){e&&(t.d(),m(o)),n&&n.d(e)}}}function oe(i,t,o){let s,a;$(i,P,c=>o(1,a=c));let{$$slots:n={},$$scope:e}=t;function r(c){const u=F.find(S=>S.name===c);return u?`<style>
    :root {
    --bg: ${u.bg};
    --bg-alt: ${u.bgAlt};
    --main: ${u.main};
    --caret: ${u.caret};
    --error: ${u.error};
    --sub: ${u.sub};
    --text: ${u.text};
    }
    </style>`:""}function l(){var u;const c=F.find(S=>S.name===a.theme);c&&((u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",c.bg))}return R(()=>{r(a.theme),P.subscribe(l)}),i.$$set=c=>{"$$scope"in c&&o(2,e=c.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&o(0,s=r(a.theme))},[s,a,e,n]}class ie extends L{constructor(t){super(),A(this,t,oe,re,C,{})}}function le(i){let t,o=`<span class="status-icon svelte-1mx6eh7" style="-webkit-mask: url(${y}/images/svg/double-checkmark.svg) no-repeat center / contain; mask: url(${y}/images/svg/double-checkmark.svg) no-repeat center / contain;"></span>`;return{c(){t=g("div"),t.innerHTML=o,this.h()},l(s){t=_(s,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-jbp3id"&&(t.innerHTML=o),this.h()},h(){d(t,"class","status svelte-1mx6eh7"),p(t,"saving",i[0].savingStatus==="saving"),p(t,"saved",i[0].savingStatus==="saved"),p(t,"error",i[0].savingStatus==="error")},m(s,a){v(s,t,a)},p(s,[a]){a&1&&p(t,"saving",s[0].savingStatus==="saving"),a&1&&p(t,"saved",s[0].savingStatus==="saved"),a&1&&p(t,"error",s[0].savingStatus==="error")},i:D,o:D,d(s){s&&m(t)}}}function ce(i,t,o){let s;return $(i,b,a=>o(0,s=a)),[s]}class ue extends L{constructor(t){super(),A(this,t,ce,le,C,{})}}const{document:k}=se;function I(i){let t,o,s;return o=new ue({}),{c(){t=g("div"),U(o.$$.fragment),this.h()},l(a){t=_(a,"DIV",{class:!0});var n=G(t);W(o.$$.fragment,n),n.forEach(m),this.h()},h(){d(t,"class","sync-status svelte-1f5yn2u")},m(a,n){v(a,t,n),x(o,t,null),s=!0},i(a){s||(f(o.$$.fragment,a),s=!0)},o(a){h(o.$$.fragment,a),s=!1},d(a){a&&m(t),B(o)}}}function me(i){let t,o,s;const a=i[1].default,n=q(a,i,i[2],null);let e=!i[0].isLoading&&I();return{c(){t=g("div"),n&&n.c(),o=H(),e&&e.c(),this.h()},l(r){t=_(r,"DIV",{class:!0});var l=G(t);n&&n.l(l),o=M(l),e&&e.l(l),l.forEach(m),this.h()},h(){d(t,"class","layout-container svelte-1f5yn2u")},m(r,l){v(r,t,l),n&&n.m(t,null),T(t,o),e&&e.m(t,null),s=!0},p(r,l){n&&n.p&&(!s||l&4)&&z(n,a,r,r[2],s?V(a,r[2],l,null):O(r[2]),null),r[0].isLoading?e&&(X(),h(e,1,1,()=>{e=null}),Y()):e?l&1&&f(e,1):(e=I(),e.c(),f(e,1),e.m(t,null))},i(r){s||(f(n,r),f(e),s=!0)},o(r){h(n,r),h(e),s=!1},d(r){r&&m(t),n&&n.d(r),e&&e.d()}}}function fe(i){let t,o,s,a,n;return a=new ie({props:{$$slots:{default:[me]},$$scope:{ctx:i}}}),{c(){t=g("meta"),o=g("meta"),s=H(),U(a.$$.fragment),this.h()},l(e){const r=Q("svelte-17tnzz8",k.head);t=_(r,"META",{name:!0,content:!0}),o=_(r,"META",{name:!0,content:!0}),r.forEach(m),s=M(e),W(a.$$.fragment,e),this.h()},h(){d(t,"name","viewport"),d(t,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),d(o,"name","theme-color"),d(o,"content","var(--bg)")},m(e,r){T(k.head,t),T(k.head,o),v(e,s,r),x(a,e,r),n=!0},p(e,[r]){const l={};r&5&&(l.$$scope={dirty:r,ctx:e}),a.$set(l)},i(e){n||(f(a.$$.fragment,e),n=!0)},o(e){h(a.$$.fragment,e),n=!1},d(e){e&&m(s),m(t),m(o),B(a,e)}}}function de(){switch(screen.orientation.type){case"portrait-primary":document.documentElement.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","0px");break;case"landscape-primary":document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-left","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--safe-area-right","0px");break;case"landscape-secondary":document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","env(safe-area-inset-right)");break}}function pe(i,t,o){let s,a;$(i,b,l=>o(0,s=l)),$(i,j,l=>o(3,a=l));let{$$slots:n={},$$scope:e}=t;function r(l){s.savingStatus==="saving"&&l.preventDefault()}return R(()=>{window.addEventListener("beforeunload",r),screen.orientation.addEventListener("change",de),Z.subscribe(E.publishToFirestore),P.subscribe(E.publishToFirestore),ee.onAuthStateChanged(async l=>{if(!l){w(b,s.currentUser=l,s),w(j,a=window.location.pathname.slice(y.length),a),te(y+"/login");return}w(b,s.currentUser=l,s);try{E.loadFromFirestore()}catch(c){console.error(c)}})}),i.$$set=l=>{"$$scope"in l&&o(2,e=l.$$scope)},[s,n,e]}class Se extends L{constructor(t){super(),A(this,t,pe,fe,C,{})}}export{Se as component,ye as universal};
