import{s as nt,n as ut,i as ht,r as Nt,b as W,c as Tt,o as Xt,y as qt,z as Et}from"../chunks/scheduler.DvlNEcs7.js";import{S as st,i as lt,e as T,c as E,a as C,d as w,o as _,p as ot,g as J,h as k,C as O,D as Ot,s as j,u as F,f as Y,v as U,E as G,F as ct,w as z,G as mt,k as H,l as N,x as Z,q as jt,n as Yt,H as Ct}from"../chunks/index.CJAcPUyC.js";import{e as bt,u as Ft,o as Ut,a as dt,b as $,d as _t}from"../chunks/animate.BtsrPL5E.js";import{b as It,w as Gt}from"../chunks/paths.DqrHx1yW.js";function zt(l){let t,e,n,s;return{c(){t=T("button"),e=T("div"),this.h()},l(i){t=E(i,"BUTTON",{class:!0});var o=C(t);e=E(o,"DIV",{class:!0,style:!0}),C(e).forEach(w),o.forEach(w),this.h()},h(){_(e,"class","icon svelte-fsrv9v"),ot(e,"-webkit-mask","url("+l[1]+") no-repeat center / contain"),ot(e,"mask","url("+l[1]+") no-repeat center / contain"),_(t,"class","svelte-fsrv9v")},m(i,o){J(i,t,o),k(t,e),n||(s=O(t,"click",Ot(function(){ht(l[0])&&l[0].apply(this,arguments)})),n=!0)},p(i,[o]){l=i,o&2&&ot(e,"-webkit-mask","url("+l[1]+") no-repeat center / contain"),o&2&&ot(e,"mask","url("+l[1]+") no-repeat center / contain")},i:ut,o:ut,d(i){i&&w(t),n=!1,s()}}}function Zt(l,t,e){let{onClick:n=()=>{}}=t,{url:s=""}=t;return l.$$set=i=>{"onClick"in i&&e(0,n=i.onClick),"url"in i&&e(1,s=i.url)},[n,s]}class yt extends st{constructor(t){super(),lt(this,t,Zt,zt,nt,{onClick:0,url:1})}}function Jt(l){let t,e,n,s,i,o,b,m,g;return o=new yt({props:{url:It+"/images/svg/cancel.svg",onClick:l[2]}}),{c(){t=T("div"),e=T("button"),n=T("input"),s=j(),i=T("div"),F(o.$$.fragment),this.h()},l(f){t=E(f,"DIV",{class:!0});var p=C(t);e=E(p,"BUTTON",{class:!0});var d=C(e);n=E(d,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),s=Y(d),i=E(d,"DIV",{class:!0});var D=C(i);U(o.$$.fragment,D),D.forEach(w),d.forEach(w),p.forEach(w),this.h()},h(){_(n,"autocorrect","off"),_(n,"autocomplete","off"),_(n,"spellcheck","false"),_(n,"type","text"),_(n,"class","svelte-1tws2uh"),_(i,"class","close-button svelte-1tws2uh"),_(e,"class","tab svelte-1tws2uh"),G(e,"active",l[1]),_(t,"class","container svelte-1tws2uh")},m(f,p){J(f,t,p),k(t,e),k(e,n),l[6](n),ct(n,l[0]),k(e,s),k(e,i),z(o,i,null),b=!0,m||(g=[O(n,"input",l[7]),O(e,"dblclick",mt(l[8])),O(e,"click",function(){ht(l[3])&&l[3].apply(this,arguments)}),O(e,"mousedown",mt(function(){ht(l[4])&&l[4].apply(this,arguments)}))],m=!0)},p(f,[p]){l=f,p&1&&n.value!==l[0]&&ct(n,l[0]);const d={};p&4&&(d.onClick=l[2]),o.$set(d),(!b||p&2)&&G(e,"active",l[1])},i(f){b||(H(o.$$.fragment,f),b=!0)},o(f){N(o.$$.fragment,f),b=!1},d(f){f&&w(t),l[6](null),Z(o),m=!1,Nt(g)}}}function Kt(l,t,e){let{title:n=""}=t,{active:s=!1}=t,{onClose:i=()=>{}}=t,{onClick:o=()=>{}}=t,{onMousedown:b=d=>{}}=t,m;function g(d){W[d?"unshift":"push"](()=>{m=d,e(5,m)})}function f(){n=this.value,e(0,n)}const p=()=>m.select();return l.$$set=d=>{"title"in d&&e(0,n=d.title),"active"in d&&e(1,s=d.active),"onClose"in d&&e(2,i=d.onClose),"onClick"in d&&e(3,o=d.onClick),"onMousedown"in d&&e(4,b=d.onMousedown)},[n,s,i,o,b,m,g,f,p]}class At extends st{constructor(t){super(),lt(this,t,Kt,Jt,nt,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}let Qt=0;const P=Gt({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:l=>{const{data:t={id:Qt++,title:"Untitled",text:""},index:e=-1,callback:n=()=>{}}=l||{};P.update(s=>(s.tabs.some(i=>i.id==t.id)||(e<0?(s.tabs.push(t),s.activeIndex=s.tabs.length-1):(s.tabs.splice(e,0,t),s.activeIndex=e)),s)),n()},removeTab:l=>{P.update(t=>(l<0||l>=t.tabs.length||(t.placeholderIndex==l&&(t.placeholderIndex=-1),t.tabs.splice(l,1),l==t.activeIndex-1?t.activeIndex=Math.max(0,l):t.activeIndex=Math.min(t.activeIndex,t.tabs.length-1)),t))},setActiveIndex:l=>{P.update(t=>(l<0?t.activeIndex=0:l>t.tabs.length?t.activeIndex=t.tabs.length-1:t.activeIndex=l,t))},setPlaceholderIndex:l=>{P.update(t=>(t.placeholderIndex=l===void 0||l<0||l>=t.tabs.length?-1:l,t))},moveTab:(l,t,e=()=>{})=>{l!=t&&(P.update(n=>{if(l<0||l>=n.tabs.length||t<0||t>=n.tabs.length)return n;const s=n.tabs[l];return n.tabs.splice(l,1),n.tabs.splice(t,0,s),n.activeIndex==l&&(n.activeIndex=t),n.placeholderIndex==l&&(n.placeholderIndex=t),n}),e())}};function vt(l,t,e){const n=l.slice();return n[38]=t[e],n[39]=t,n[40]=e,n}function wt(l,t){let e,n,s,i,o=t[40],b,m,g;function f(){return t[13](t[40])}function p(){return t[14](t[40])}function d(...u){return t[15](t[40],...u)}function D(u){t[16](u,t[40])}let I={active:t[7].activeIndex==t[40],onClose:f,onClick:p,onMousedown:d};t[7].tabs[t[40]].title!==void 0&&(I.title=t[7].tabs[t[40]].title),n=new At({props:I}),W.push(()=>Ct(n,"title",D));const A=()=>t[17](e,o),S=()=>t[17](null,o);return{key:l,first:null,c(){e=T("div"),F(n.$$.fragment),i=j(),this.h()},l(u){e=E(u,"DIV",{class:!0});var r=C(e);U(n.$$.fragment,r),i=Y(r),r.forEach(w),this.h()},h(){_(e,"class","tab-container svelte-13jp0dd"),G(e,"placeholder",t[7].placeholderIndex==t[40]),this.first=e},m(u,r){J(u,e,r),z(n,e,null),k(e,i),A(),b=!0,m||(g=qt(t[10].call(null,e)),m=!0)},p(u,r){t=u;const c={};r[0]&128&&(c.active=t[7].activeIndex==t[40]),r[0]&128&&(c.onClose=f),r[0]&128&&(c.onClick=p),r[0]&128&&(c.onMousedown=d),!s&&r[0]&128&&(s=!0,c.title=t[7].tabs[t[40]].title,Et(()=>s=!1)),n.$set(c),o!==t[40]&&(S(),o=t[40],A()),(!b||r[0]&128)&&G(e,"placeholder",t[7].placeholderIndex==t[40])},i(u){b||(H(n.$$.fragment,u),b=!0)},o(u){N(n.$$.fragment,u),b=!1},d(u){u&&w(e),Z(n),S(),m=!1,g()}}}function xt(l){let t,e,n,s=[],i=new Map,o,b,m,g,f,p,d,D,I,A=bt(l[7].tabs);const S=u=>u[38];for(let u=0;u<A.length;u+=1){let r=vt(l,A,u),c=S(r);i.set(c,s[u]=wt(c,r))}return m=new yt({props:{url:It+"/images/svg/plus.svg",onClick:l[9]}}),p=new At({props:{title:l[2].title,active:!l[5]}}),{c(){t=T("div"),e=T("div"),n=T("div");for(let u=0;u<s.length;u+=1)s[u].c();o=j(),b=T("div"),F(m.$$.fragment),g=j(),f=T("div"),F(p.$$.fragment),d=j(),D=T("div"),this.h()},l(u){t=E(u,"DIV",{});var r=C(t);e=E(r,"DIV",{class:!0});var c=C(e);n=E(c,"DIV",{class:!0});var R=C(n);for(let V=0;V<s.length;V+=1)s[V].l(R);R.forEach(w),o=Y(c),b=E(c,"DIV",{class:!0});var M=C(b);U(m.$$.fragment,M),M.forEach(w),g=Y(c),f=E(c,"DIV",{class:!0});var X=C(f);U(p.$$.fragment,X),X.forEach(w),c.forEach(w),d=Y(r),D=E(r,"DIV",{class:!0}),C(D).forEach(w),r.forEach(w),this.h()},h(){_(n,"class","tabs svelte-13jp0dd"),_(b,"class","buttons svelte-13jp0dd"),_(f,"class","clone svelte-13jp0dd"),G(f,"dragging",l[4]),_(e,"class","toolbar svelte-13jp0dd"),_(D,"class","separator svelte-13jp0dd")},m(u,r){J(u,t,r),k(t,e),k(e,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l[18](n),k(e,o),k(e,b),z(m,b,null),k(e,g),k(e,f),z(p,f,null),l[19](f),k(t,d),k(t,D),l[20](t),I=!0},p(u,r){r[0]&6530&&(A=bt(u[7].tabs),jt(),s=Ft(s,r,S,1,u,A,i,n,Ut,wt,null,vt),Yt());const c={};r[0]&4&&(c.title=u[2].title),r[0]&32&&(c.active=!u[5]),p.$set(c),(!I||r[0]&16)&&G(f,"dragging",u[4])},i(u){if(!I){for(let r=0;r<A.length;r+=1)H(s[r]);H(m.$$.fragment,u),H(p.$$.fragment,u),I=!0}},o(u){for(let r=0;r<s.length;r+=1)N(s[r]);N(m.$$.fragment,u),N(p.$$.fragment,u),I=!1},d(u){u&&w(t);for(let r=0;r<s.length;r+=1)s[r].d();l[18](null),Z(m),Z(p),l[19](null),l[20](null)}}}const $t=12,rt=140,tt=70,et=160,te=1600,kt=.3;function ee(l,t,e){let n;Tt(l,P,a=>e(7,n=a));let s,i=[],o=0;Xt(()=>{s.style.setProperty("--tab-max-width",`${rt}px`),s.style.setProperty("--tab-min-width",`${tt}px`)});const b=(a,h=300)=>{let v;return(...y)=>{clearTimeout(v),v=setTimeout(()=>{a.apply(this,y)},h)}};function m(a){B.setActiveIndex(a),s.children[a].scrollIntoView({behavior:"smooth"})}function g(){B.newTab()}function f(a){if(!s)return;const h=a.getBoundingClientRect().width;dt({duration:et,easing:$,onStep:(v,y)=>{n.tabs.length==1?e(0,s.style.gridTemplateColumns=`minmax(${v*tt}px, ${v*h}px)`,s):e(0,s.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*tt}px, ${v*h}px)`,s),e(0,s.scrollLeft=s.scrollWidth,s)},onEnd:()=>{e(0,s.style.gridTemplateColumns="",s)}})}const p=b(()=>{if(!s)return;s.style.setProperty("--tab-max-width",`${rt}px`);const a=i[0].getBoundingClientRect().width;dt({duration:et,easing:$,onStep:(h,v)=>{s.style.setProperty("--tab-max-width",`${o+h*(a-o)}px`)},onEnd:()=>{s.style.setProperty("--tab-max-width",`${rt}px`)}})},te),d=a=>{if(!i[a]){console.warn("Cannot close tab!");return}o=i[a].getBoundingClientRect().width,a<n.tabs.length-1&&o<rt&&(s.style.setProperty("--tab-max-width",`${o}px`),p()),a==n.tabs.length-1?B.setActiveIndex(a-1):a==n.activeIndex&&B.setActiveIndex(a+1),dt({duration:et,easing:$,onStep:(h,v)=>{a==0?e(0,s.style.gridTemplateColumns=`minmax(${v*tt}px, ${v*o}px)`,s):e(0,s.style.gridTemplateColumns=`repeat(${a}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*tt}px, ${v*o}px)`,s)},onEnd:()=>{e(0,s.style.gridTemplateColumns="",s),B.removeTab(a)}})},D=(a,h)=>{const v=i[0].getBoundingClientRect().width;console.log(a,h),B.moveTab(a,h,()=>{if(a>h)for(let y=h;y<a;y++)_t(i[y],{duration:et,easing:$,css:(Q,L)=>`transform: translateX(-${L*v}px);`});if(a<h)for(let y=h;y>a;y--)_t(i[y],{duration:et,easing:$,css:(Q,L)=>`transform: translateX(${L*v}px);`})})};let I=null,A=-1,S={id:-1,title:"",text:""},u,r,c,R=!1,M=!1,X=0,V=0,q=0,at;function Dt(a,h){e(3,c.style.left=`${a+X}px`,c),e(3,c.style.top=`${r.top}px`,c);let v=at.getBoundingClientRect();if(a<v.left||a>v.right||h<v.top||h>v.bottom){M||(console.log("out"),q=0,c.addEventListener("dragstart",Bt),c.dispatchEvent(new Event("dragstart"))),e(3,c.style.top=`${h+V}px`,c),e(5,M=!0);return}M&&(e(5,M=!1),console.log("in"));const y=-s.scrollLeft,Q=i[0].getBoundingClientRect().width;let L=-1;if(a>y+n.tabs.length*Q)L=n.tabs.length-1;else for(let x=0;x<n.tabs.length;x++)if(a>y+x*Q&&a<y+(x+1)*Q){L=x;break}a<20?(q=-kt,requestAnimationFrame(ft)):a>s.clientWidth-10?(q=kt,requestAnimationFrame(ft)):q=0,L!=-1&&D(n.placeholderIndex,L)}let K=0;function ft(a){if(!R||q==0){K=0;return}K==0&&(K=a);const h=a-K;K=a,s.scrollBy({left:q*h}),requestAnimationFrame(ft)}function Bt(a){a.dataTransfer}function gt(a,h){a.target&&(window.addEventListener("mousemove",pt),window.addEventListener("mouseup",it),window.addEventListener("blur",it),B.setActiveIndex(h),u=a.target,r=u.getBoundingClientRect(),I=[a.clientX,a.clientY],X=r.left-a.clientX,V=r.top-a.clientY,e(3,c.style.width=`${r.width}px`,c),e(3,c.style.left=`${r.left}px`,c),e(3,c.style.top=`${r.top}px`,c),e(2,S={...n.tabs[h]}),A=h)}function pt(a){if(R){Dt(a.clientX,a.clientY);return}I===null||Math.hypot(I[0]-a.clientX,I[1]-a.clientY)<$t||(e(4,R=!0),B.setPlaceholderIndex(A),B.setActiveIndex(A))}function it(){window.removeEventListener("mousemove",pt),window.removeEventListener("mouseup",it),window.removeEventListener("blur",it),I=null,e(4,R=!1),e(5,M=!1),A=-1,X=0,V=0,B.setPlaceholderIndex()}const Mt=a=>d(a),St=a=>m(a),Rt=(a,h)=>gt(h,a);function Lt(a,h){l.$$.not_equal(n.tabs[h].title,a)&&(n.tabs[h].title=a,P.set(n))}function Pt(a,h){W[a?"unshift":"push"](()=>{i[h]=a,e(1,i)})}function Vt(a){W[a?"unshift":"push"](()=>{s=a,e(0,s)})}function Wt(a){W[a?"unshift":"push"](()=>{c=a,e(3,c)})}function Ht(a){W[a?"unshift":"push"](()=>{at=a,e(6,at)})}return[s,i,S,c,R,M,at,n,m,g,f,d,gt,Mt,St,Rt,Lt,Pt,Vt,Wt,Ht]}class ne extends st{constructor(t){super(),lt(this,t,ee,xt,nt,{},null,[-1,-1])}}function se(l){let t,e,n,s;return{c(){t=T("div"),e=T("textarea"),this.h()},l(i){t=E(i,"DIV",{id:!0,class:!0});var o=C(t);e=E(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),C(e).forEach(w),o.forEach(w),this.h()},h(){_(e,"spellcheck","false"),_(e,"name","editor"),_(e,"id","text"),_(e,"class","svelte-7cpmmf"),_(t,"id","editor"),_(t,"class","svelte-7cpmmf")},m(i,o){J(i,t,o),k(t,e),ct(e,l[0]),n||(s=O(e,"input",l[1]),n=!0)},p(i,[o]){o&1&&ct(e,i[0])},i:ut,o:ut,d(i){i&&w(t),n=!1,s()}}}function le(l,t,e){let{text:n}=t;function s(){n=this.value,e(0,n)}return l.$$set=i=>{"text"in i&&e(0,n=i.text)},[n,s]}class ae extends st{constructor(t){super(),lt(this,t,le,se,nt,{text:0})}}function ie(l){let t,e,n,s,i,o;e=new ne({});function b(g){l[2](g)}let m={};return l[0].text!==void 0&&(m.text=l[0].text),s=new ae({props:m}),W.push(()=>Ct(s,"text",b)),{c(){t=T("div"),F(e.$$.fragment),n=j(),F(s.$$.fragment),this.h()},l(g){t=E(g,"DIV",{class:!0});var f=C(t);U(e.$$.fragment,f),n=Y(f),U(s.$$.fragment,f),f.forEach(w),this.h()},h(){_(t,"class","container svelte-16qa0xo")},m(g,f){J(g,t,f),z(e,t,null),k(t,n),z(s,t,null),o=!0},p(g,[f]){const p={};!i&&f&1&&(i=!0,p.text=g[0].text,Et(()=>i=!1)),s.$set(p)},i(g){o||(H(e.$$.fragment,g),H(s.$$.fragment,g),o=!0)},o(g){N(e.$$.fragment,g),N(s.$$.fragment,g),o=!1},d(g){g&&w(t),Z(e),Z(s)}}}function oe(l,t,e){let n,s;Tt(l,P,o=>e(1,s=o)),B.newTab({data:{title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.19"}});function i(o){l.$$.not_equal(n.text,o)&&(n.text=o,e(0,n),e(1,s))}return l.$$.update=()=>{l.$$.dirty&2&&e(0,n=s.tabs.length>0?s.tabs[s.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,s,i]}class de extends st{constructor(t){super(),lt(this,t,oe,ie,nt,{})}}export{de as component};
