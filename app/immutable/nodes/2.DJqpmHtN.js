const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/quill.Bk4jDS0q.js","../chunks/core.CG__ofcG.js"])))=>i.map(i=>d[i]);
var xt=Object.defineProperty;var Lt=(e,t,n)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>Lt(e,typeof t!="symbol"?t+"":t,n);import{s as xe,n as ge,r as mt,e as Ye,f as vt,c as ie,a as fe,o as Je,d as re,z as Ct,A as Dt,B as It}from"../chunks/scheduler.CNrmCPBX.js";import{S as Le,i as Ce,e as V,b as Yt,c as R,d as N,f as Xt,g as X,w as Y,A as U,j as $,k as I,x as ae,G as ze,l as Pt,s as j,v as ue,h as G,z as $e,I as Ae,p as ve,q as be,r as pe,o as _e,n as ke,a as z,t as K,u as ye,J as Mt,m as Ee}from"../chunks/index.DuTQ5i8V.js";import{e as we,u as Ge,o as Ke}from"../chunks/each.C4ZUwfyx.js";import{b as J}from"../chunks/paths.B3O5ZKZX.js";import{m as me,a as bt,t as oe,f as St,d as le,s as Ht}from"../chunks/firebaseStore.nxTkXMyP.js";import{c as he,s as Ve,S as At}from"../chunks/Spinner.fOG4cpMq.js";import{_ as et}from"../chunks/preload-helper.D6kgxu3v.js";function Vt(e){let t,n,i,a,l,d;return{c(){t=V("div"),n=V("button"),i=V("span"),a=Yt(e[0]),this.h()},l(s){t=R(s,"DIV",{class:!0});var o=N(t);n=R(o,"BUTTON",{class:!0,draggable:!0});var m=N(n);i=R(m,"SPAN",{class:!0});var _=N(i);a=Xt(_,e[0]),_.forEach(X),m.forEach(X),o.forEach(X),this.h()},h(){Y(i,"class","title svelte-w1fi59"),Y(n,"class","tab svelte-w1fi59"),Y(n,"draggable","true"),U(n,"active",e[1]),Y(t,"class","tab-container svelte-w1fi59"),U(t,"preventHover",e[2])},m(s,o){$(s,t,o),I(t,n),I(n,i),I(i,a),l||(d=[ae(n,"mousedown",ze(function(){Ye(e[3])&&e[3].apply(this,arguments)})),ae(n,"touchstart",ze(function(){Ye(e[3])&&e[3].apply(this,arguments)})),ae(n,"dragstart",ze(function(){Ye(e[4])&&e[4].apply(this,arguments)}))],l=!0)},p(s,[o]){e=s,o&1&&Pt(a,e[0]),o&2&&U(n,"active",e[1]),o&4&&U(t,"preventHover",e[2])},i:ge,o:ge,d(s){s&&X(t),l=!1,mt(d)}}}function Rt(e,t,n){let{title:i=""}=t,{active:a=!1}=t,{preventHover:l=!1}=t,{onPointerdown:d=o=>{}}=t,{onDragstart:s=o=>{}}=t;return e.$$set=o=>{"title"in o&&n(0,i=o.title),"active"in o&&n(1,a=o.active),"preventHover"in o&&n(2,l=o.preventHover),"onPointerdown"in o&&n(3,d=o.onPointerdown),"onDragstart"in o&&n(4,s=o.onDragstart)},[i,a,l,d,s]}class pt extends Le{constructor(t){super(),Ce(this,t,Rt,Vt,xe,{title:0,active:1,preventHover:2,onPointerdown:3,onDragstart:4})}}const tt=(e,t)=>{const{duration:n=300,easing:i=he,onEnd:a=()=>{},onStep:l=()=>{},css:d}=t;let s;function o(m){if(!e){console.warn("Cannot find element to animate");return}s===void 0&&(s=m);const _=i((m-s)/n),P=1-_;_<1?(e.style.cssText=d(_,P),l(_,P),requestAnimationFrame(o)):(e.style.cssText="",a())}requestAnimationFrame(o)},je=e=>{const{duration:t=300,easing:n=he,onEnd:i=()=>{},onStep:a=()=>{}}=e;let l;function d(s){l===void 0&&(l=s);const o=n((s-l)/t),m=1-o;o<1?(a(o,m),requestAnimationFrame(d)):i()}requestAnimationFrame(d)};function nt(e){let t,n="";return{c(){t=V("div"),t.innerHTML=n,this.h()},l(i){t=R(i,"DIV",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-q4u3w4"&&(t.innerHTML=n),this.h()},h(){Y(t,"class","pencil-tools svelte-dpm0sw")},m(i,a){$(i,t,a)},d(i){i&&X(t)}}}function Bt(e){let t,n,i=`<span class="button-icon svelte-dpm0sw" style="-webkit-mask: url(${J}/images/svg/pencil.svg) no-repeat center / contain; mask: url(${J}/images/svg/pencil.svg) no-repeat center / contain;"></span>`,a,l,d,s,o,m=`<span class="button-icon svelte-dpm0sw" style="-webkit-mask: url(${J}/images/svg/trash.svg) no-repeat center / contain; mask: url(${J}/images/svg/trash.svg) no-repeat center / contain;"></span>`,_,P,H,B,A,f,T=`<span class="button-icon svelte-dpm0sw" style="-webkit-mask: url(${J}/images/svg/user.svg) no-repeat center / contain; mask: url(${J}/images/svg/user.svg) no-repeat center / contain;"></span>`,v,h,w=`<span class="button-icon svelte-dpm0sw" style="-webkit-mask: url(${J}/images/svg/maximize.svg) no-repeat center / contain; mask: url(${J}/images/svg/maximize.svg) no-repeat center / contain;"></span>`,y,x,M,k,E=e[2].activeTool==="pencil"&&nt();return{c(){t=V("div"),n=V("button"),n.innerHTML=i,a=j(),E&&E.c(),l=j(),d=V("div"),s=j(),o=V("button"),o.innerHTML=m,_=j(),P=V("button"),H=V("span"),A=j(),f=V("a"),f.innerHTML=T,v=j(),h=V("button"),h.innerHTML=w,this.h()},l(b){t=R(b,"DIV",{class:!0});var p=N(t);n=R(p,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-16ra8o2"&&(n.innerHTML=i),a=G(p),E&&E.l(p),l=G(p),d=R(p,"DIV",{class:!0}),N(d).forEach(X),s=G(p),o=R(p,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(o)!=="svelte-cbr57k"&&(o.innerHTML=m),_=G(p),P=R(p,"BUTTON",{class:!0});var S=N(P);H=R(S,"SPAN",{class:!0,style:!0}),N(H).forEach(X),S.forEach(X),A=G(p),f=R(p,"A",{class:!0,href:!0,"data-svelte-h":!0}),ue(f)!=="svelte-1xuhzhs"&&(f.innerHTML=T),v=G(p),h=R(p,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(h)!=="svelte-siuh87"&&(h.innerHTML=w),p.forEach(X),this.h()},h(){Y(n,"class","pencil button svelte-dpm0sw"),U(n,"selected",e[2].activeTool==="pencil"),Y(d,"class","spacer svelte-dpm0sw"),Y(o,"class","close button svelte-dpm0sw"),Y(H,"class","button-icon svelte-dpm0sw"),$e(H,"-webkit-mask","url("+J+"/images/svg/refresh.svg) no-repeat center / contain"),$e(H,"mask","url("+J+"/images/svg/refresh.svg) no-repeat center / contain"),Y(P,"class","refresh button svelte-dpm0sw"),P.disabled=B=e[3].savingStatus==="saving",Y(f,"class","button svelte-dpm0sw"),Y(f,"href",J+"/profile"),Y(h,"class","button svelte-dpm0sw"),Y(t,"class","toolbar-container svelte-dpm0sw")},m(b,p){$(b,t,p),I(t,n),I(t,a),E&&E.m(t,null),I(t,l),I(t,d),I(t,s),I(t,o),I(t,_),I(t,P),I(P,H),I(t,A),I(t,f),I(t,v),I(t,h),x=!0,M||(k=[ae(n,"click",e[4]),ae(o,"click",function(){Ye(e[1])&&e[1].apply(this,arguments)}),ae(P,"click",function(){Ye(e[0])&&e[0].apply(this,arguments)}),ae(h,"click",e[5])],M=!0)},p(b,[p]){e=b,(!x||p&4)&&U(n,"selected",e[2].activeTool==="pencil"),e[2].activeTool==="pencil"?E||(E=nt(),E.c(),E.m(t,l)):E&&(E.d(1),E=null),(!x||p&8&&B!==(B=e[3].savingStatus==="saving"))&&(P.disabled=B)},i(b){x||(b&&vt(()=>{x&&(y||(y=Ae(t,Ve,{duration:200},!0)),y.run(1))}),x=!0)},o(b){b&&(y||(y=Ae(t,Ve,{duration:200},!1)),y.run(0)),x=!1},d(b){b&&X(t),E&&E.d(),b&&y&&y.end(),M=!1,mt(k)}}}function Ot(e,t,n){let i,a;ie(e,me,m=>n(2,i=m)),ie(e,bt,m=>n(3,a=m));let{refreshClicked:l=()=>{}}=t,{onClose:d=()=>{}}=t;const s=()=>{fe(me,i.activeTool=i.activeTool==="pencil"?void 0:"pencil",i)},o=()=>{fe(me,i.toolbarVisible=!1,i),fe(me,i.activeTool=void 0,i)};return e.$$set=m=>{"refreshClicked"in m&&n(0,l=m.refreshClicked),"onClose"in m&&n(1,d=m.onClose)},[l,d,i,a,s,o]}class Nt extends Le{constructor(t){super(),Ce(this,t,Ot,Bt,xe,{refreshClicked:0,onClose:1})}}function it(e,t,n){const i=e.slice();return i[41]=t[n],i[42]=t,i[43]=n,i}function st(e,t){let n,i,a,l,d=t[43],s,o,m;function _(...f){return t[17](t[43],...f)}function P(f){t[18](f,t[41])}let H={active:t[9]==t[41],preventHover:t[8],onPointerdown:_,onDragstart:t[15]};t[11][t[41]].title!==void 0&&(H.title=t[11][t[41]].title),i=new pt({props:H}),re.push(()=>Mt(i,"title",P));const B=()=>t[19](n,d),A=()=>t[19](null,d);return{key:e,first:null,c(){n=V("div"),ve(i.$$.fragment),l=j(),this.h()},l(f){n=R(f,"DIV",{class:!0});var T=N(n);be(i.$$.fragment,T),l=G(T),T.forEach(X),this.h()},h(){Y(n,"class","tab-container svelte-6u8cf7"),U(n,"placeholder",t[10]==t[41]),this.first=n},m(f,T){$(f,n,T),pe(i,n,null),I(n,l),B(),s=!0,o||(m=Ct(t[14].call(null,n)),o=!0)},p(f,T){t=f;const v={};T[0]&514&&(v.active=t[9]==t[41]),T[0]&256&&(v.preventHover=t[8]),T[0]&2&&(v.onPointerdown=_),!a&&T[0]&2050&&(a=!0,v.title=t[11][t[41]].title,Dt(()=>a=!1)),i.$set(v),d!==t[43]&&(A(),d=t[43],B()),(!s||T[0]&1026)&&U(n,"placeholder",t[10]==t[41])},i(f){s||(z(i.$$.fragment,f),s=!0)},o(f){K(i.$$.fragment,f),s=!1},d(f){f&&X(n),ye(i),A(),o=!1,m()}}}function lt(e){let t,n=`<span class="button-icon svelte-6u8cf7" style="-webkit-mask: url(${J}/images/svg/gear.svg) no-repeat center / contain; mask: url(${J}/images/svg/gear.svg) no-repeat center / contain;"></span>`,i,a,l,d;return{c(){t=V("button"),t.innerHTML=n,this.h()},l(s){t=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1wioe5y"&&(t.innerHTML=n),this.h()},h(){Y(t,"class","button svelte-6u8cf7")},m(s,o){$(s,t,o),a=!0,l||(d=ae(t,"click",e[21]),l=!0)},p:ge,i(s){a||(s&&vt(()=>{a&&(i||(i=Ae(t,Ve,{duration:200,axis:"x"},!0)),i.run(1))}),a=!0)},o(s){s&&(i||(i=Ae(t,Ve,{duration:200,axis:"x"},!1)),i.run(0)),a=!1},d(s){s&&X(t),s&&i&&i.end(),l=!1,d()}}}function rt(e){let t,n;return t=new Nt({props:{refreshClicked:St.loadFromFirestore,onClose:e[23]}}),{c(){ve(t.$$.fragment)},l(i){be(t.$$.fragment,i)},m(i,a){pe(t,i,a),n=!0},p(i,a){const l={};a[0]&512&&(l.onClose=i[23]),t.$set(l)},i(i){n||(z(t.$$.fragment,i),n=!0)},o(i){K(t.$$.fragment,i),n=!1},d(i){ye(t,i)}}}function Wt(e){let t,n,i,a=[],l=new Map,d,s,o,m=`<span class="button-icon svelte-6u8cf7" style="-webkit-mask: url(${J}/images/svg/plus.svg) no-repeat center / contain; mask: url(${J}/images/svg/plus.svg) no-repeat center / contain;"></span>`,_,P,H,B,A,f,T,v,h,w,y,x=we(e[1].order);const M=b=>b[41];for(let b=0;b<x.length;b+=1){let p=it(e,x,b),S=M(p);l.set(S,a[b]=st(S,p))}let k=!e[1].toolbarVisible&&lt(e);A=new pt({props:{title:e[4],active:!e[6],preventHover:!0}});let E=e[1].toolbarVisible&&rt(e);return{c(){t=V("div"),n=V("div"),i=V("div");for(let b=0;b<a.length;b+=1)a[b].c();d=j(),s=V("div"),o=V("button"),o.innerHTML=m,_=j(),P=V("div"),k&&k.c(),H=j(),B=V("div"),ve(A.$$.fragment),f=j(),T=V("div"),v=j(),E&&E.c(),this.h()},l(b){t=R(b,"DIV",{class:!0});var p=N(t);n=R(p,"DIV",{class:!0});var S=N(n);i=R(S,"DIV",{class:!0});var F=N(i);for(let ce=0;ce<a.length;ce+=1)a[ce].l(F);F.forEach(X),d=G(S),s=R(S,"DIV",{class:!0});var Q=N(s);o=R(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(o)!=="svelte-g0ls06"&&(o.innerHTML=m),Q.forEach(X),_=G(S),P=R(S,"DIV",{class:!0});var q=N(P);k&&k.l(q),q.forEach(X),H=G(S),B=R(S,"DIV",{class:!0});var ee=N(B);be(A.$$.fragment,ee),ee.forEach(X),S.forEach(X),f=G(p),T=R(p,"DIV",{class:!0}),N(T).forEach(X),v=G(p),E&&E.l(p),p.forEach(X),this.h()},h(){Y(i,"class","tabs svelte-6u8cf7"),Y(o,"class","button svelte-6u8cf7"),Y(s,"class","new-tab-container svelte-6u8cf7"),Y(P,"class","buttons-container svelte-6u8cf7"),Y(B,"class","clone svelte-6u8cf7"),U(B,"dragging",e[0]),Y(n,"class","tabbar svelte-6u8cf7"),Y(T,"class","divider svelte-6u8cf7"),Y(t,"class","svelte-6u8cf7")},m(b,p){$(b,t,p),I(t,n),I(n,i);for(let S=0;S<a.length;S+=1)a[S]&&a[S].m(i,null);e[20](i),I(n,d),I(n,s),I(s,o),I(n,_),I(n,P),k&&k.m(P,null),I(n,H),I(n,B),pe(A,B,null),e[22](B),I(t,f),I(t,T),I(t,v),E&&E.m(t,null),e[24](t),h=!0,w||(y=ae(o,"click",e[12]),w=!0)},p(b,p){p[0]&102154&&(x=we(b[1].order),_e(),a=Ge(a,p,M,1,b,x,l,i,Ke,st,null,it),ke()),b[1].toolbarVisible?k&&(_e(),K(k,1,1,()=>{k=null}),ke()):k?(k.p(b,p),p[0]&2&&z(k,1)):(k=lt(b),k.c(),z(k,1),k.m(P,null));const S={};p[0]&16&&(S.title=b[4]),p[0]&64&&(S.active=!b[6]),A.$set(S),(!h||p[0]&1)&&U(B,"dragging",b[0]),b[1].toolbarVisible?E?(E.p(b,p),p[0]&2&&z(E,1)):(E=rt(b),E.c(),z(E,1),E.m(t,null)):E&&(_e(),K(E,1,1,()=>{E=null}),ke())},i(b){if(!h){for(let p=0;p<x.length;p+=1)z(a[p]);z(k),z(A.$$.fragment,b),z(E),h=!0}},o(b){for(let p=0;p<a.length;p+=1)K(a[p]);K(k),K(A.$$.fragment,b),K(E),h=!1},d(b){b&&X(t);for(let p=0;p<a.length;p+=1)a[p].d();e[20](null),k&&k.d(),ye(A),e[22](null),E&&E.d(),e[24](null),w=!1,y()}}}const Ft=12,Se=200,De=32,Ie=200,Ut=1600,at=.3;function qt(e,t,n){let i,a,l,d;ie(e,me,g=>n(1,l=g)),ie(e,oe,g=>n(11,d=g));let s,o=[],m=0,_=null,P=-1,H="",B,A,f,T=!1,v=!1,h=0,w=0,y,x=!1;const M=(g,c=300)=>{let L;return(...D)=>{clearTimeout(L),L=setTimeout(()=>{g.apply(this,D)},c)}};function k(){le.newTab()}const E=g=>{const c=l.order.findIndex(L=>L===g);if(c<0||!o[c]){console.warn("Cannot close tab!");return}m=o[c].getBoundingClientRect().width,c<l.order.length-1&&(s.style.setProperty("--tab-max-width",`${m}px`),b()),c==l.activeIndex&&(c==l.order.length-1?le.setActiveIndex(c-1):le.setActiveIndex(c+1)),je({duration:Ie,easing:he,onStep:(L,D)=>{c==0?n(2,s.style.gridTemplateColumns=`minmax(${D*De}px, ${D*m}px)`,s):n(2,s.style.gridTemplateColumns=`repeat(${c}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${D*De}px, ${D*m}px)`,s)},onEnd:()=>{n(2,s.style.gridTemplateColumns="",s),le.removeTab(g)}})},b=M(()=>{s&&(s.style.setProperty("--tab-max-width",`${Se}px`),je({duration:Ie,easing:he,onStep:(g,c)=>{s.style.setProperty("--tab-max-width",`${m+g*(Se-m)}px`)},onEnd:()=>{s.style.setProperty("--tab-max-width",`${Se}px`)}}))},Ut);function p(g){if(!s)return;const c=g.getBoundingClientRect().width;je({duration:Ie,easing:he,onStep:(L,D)=>{l.order.length==1?n(2,s.style.gridTemplateColumns=`minmax(${L*De}px, ${L*c}px)`,s):n(2,s.style.gridTemplateColumns=`repeat(${l.order.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${L*De}px, ${L*c}px)`,s),n(2,s.scrollLeft=s.scrollWidth,s)},onEnd:()=>{n(2,s.style.gridTemplateColumns="",s)}})}const S=(g,c)=>{const L=o[0].getBoundingClientRect().width;le.moveTab(g,c,()=>{if(g>c)for(let D=c;D<g;D++)tt(o[D],{duration:Ie,easing:he,css:(O,Z)=>`transform: translateX(-${Z*L}px);`});if(g<c)for(let D=c;D>g;D--)tt(o[D],{duration:Ie,easing:he,css:(O,Z)=>`transform: translateX(${Z*L}px);`})})};function F(g){!g.target||!g.dataTransfer||(g.dataTransfer.setData("text/plain",i),g.dataTransfer.setDragImage(new Image,0,0))}function Q(g,c){if(g==0&&c==0){n(5,f.style.left="-1000px",f),n(5,f.style.top="-1000px",f);return}let L=y.getBoundingClientRect();if(g<L.left||g>L.right||c<L.top||c>L.bottom){v||(w=0),n(5,f.style.left=`${g+h}px`,f),n(5,f.style.top=`${c-A.height/2}px`,f),n(6,v=!0);return}v&&n(6,v=!1),n(5,f.style.left=`${g+h}px`,f),n(5,f.style.top=`${A.top}px`,f);const D=-s.scrollLeft,O=o[0].getBoundingClientRect().width;let Z=-1;if(g>D+l.order.length*O)Z=l.order.length-1;else for(let ne=0;ne<l.order.length;ne++)if(g>D+ne*O&&g<D+(ne+1)*O){Z=ne;break}g<20?(w=-at,requestAnimationFrame(ee)):g>s.clientWidth-10?(w=at,requestAnimationFrame(ee)):w=0,!(Z==-1||Z==l.placeholderIndex)&&S(l.placeholderIndex,Z)}let q=0;function ee(g){if(!T||w==0){q=0;return}q==0&&(q=g);const c=g-q;q=g,s.scrollBy({left:w*c}),requestAnimationFrame(ee)}function ce(g,c){if(!g.target)return;let L,D;g instanceof TouchEvent?(L=g.touches[0].clientX,D=g.touches[0].clientY):(L=g.clientX,D=g.clientY),window.addEventListener("touchmove",se,{passive:!1}),window.addEventListener("touchend",te),window.addEventListener("mousemove",se),window.addEventListener("mouseup",te),window.addEventListener("drag",se),window.addEventListener("dragend",te),window.addEventListener("blur",te),le.setActiveIndex(c),B=g.target,A=B.getBoundingClientRect(),_=[L,D],h=A.left-L,A.top-D,n(5,f.style.width=`${A.width}px`,f),n(5,f.style.left=`${A.left}px`,f),n(5,f.style.top=`${A.top}px`,f),P=c,n(4,H=d[l.order[c]].title)}function se(g){let c,L;if(g instanceof TouchEvent?(c=g.touches[0].clientX,L=g.touches[0].clientY,g.preventDefault()):(c=g.clientX,L=g.clientY),T){Q(c,L);return}_===null||Math.hypot(_[0]-c,_[1]-L)<Ft||(n(0,T=!0),le.setPlaceholderIndex(P),le.setActiveIndex(P))}function te(){window.removeEventListener("touchmove",se),window.removeEventListener("touchend",te),window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",te),window.removeEventListener("drag",se),window.removeEventListener("dragend",te),window.removeEventListener("blur",te),_=null,n(6,v=!1),P=-1,h=0,le.setPlaceholderIndex(),n(0,T=!1)}Je(()=>{s.style.setProperty("--tab-max-width",`${Se}px`),s.style.setProperty("--tab-min-width",`${De}px`)});const Xe=(g,c)=>ce(c,g);function Ne(g,c){e.$$.not_equal(d[c].title,g)&&(d[c].title=g,oe.set(d))}function We(g,c){re[g?"unshift":"push"](()=>{o[c]=g,n(3,o)})}function Fe(g){re[g?"unshift":"push"](()=>{s=g,n(2,s)})}const Pe=()=>{fe(me,l.toolbarVisible=!0,l)};function Me(g){re[g?"unshift":"push"](()=>{f=g,n(5,f)})}const Ue=()=>E(i);function qe(g){re[g?"unshift":"push"](()=>{y=g,n(7,y)})}return e.$$.update=()=>{e.$$.dirty[0]&2&&n(9,i=l.order[l.activeIndex]),e.$$.dirty[0]&2&&n(10,a=l.order[l.placeholderIndex]),e.$$.dirty[0]&1&&(T?n(8,x=!0):setTimeout(()=>n(8,x=!1),20))},[T,l,s,o,H,f,v,y,x,i,a,d,k,E,p,F,ce,Xe,Ne,We,Fe,Pe,Me,Ue,qe]}class zt extends Le{constructor(t){super(),Ce(this,t,qt,Wt,xe,{},null,[-1,-1])}}function jt(e){let t,n;return{c(){t=V("div"),n=V("div"),this.h()},l(i){t=R(i,"DIV",{class:!0});var a=N(t);n=R(a,"DIV",{class:!0}),N(n).forEach(X),a.forEach(X),this.h()},h(){Y(n,"class","quill-editor svelte-1zs6ve"),Y(t,"class","quill-editor-wrapper svelte-1zs6ve"),U(t,"disabled",e[0])},m(i,a){$(i,t,a),I(t,n),e[5](n)},p(i,[a]){a&1&&U(t,"disabled",i[0])},i:ge,o:ge,d(i){i&&X(t),e[5](null)}}}function Gt(e,t,n){let i,a;ie(e,oe,y=>n(6,i=y)),ie(e,Ht,y=>n(4,a=y));let{tabID:l}=t,{disabled:d=!1}=t,s,o;const m=(y,x=300)=>{let M;return(...k)=>{clearTimeout(M),M=setTimeout(()=>{y.apply(void 0,k)},x)}};async function _(y){var E,b,p,S;if(!s)return;const{Delta:x,Range:M}=await et(async()=>{const{Delta:F,Range:Q}=await import("../chunks/core.CG__ofcG.js").then(q=>q.G);return{Delta:F,Range:Q}},[],import.meta.url);if(y.undo.length>0)for(var k=0;k<y.undo.length;k++){const F=(E=y.undo[k].range)==null?void 0:E.index,Q=(b=y.undo[k].range)==null?void 0:b.length,q={delta:new x(y.undo[k].delta.ops),range:F!==void 0&&Q!==void 0?new M(F,Q):null};s.history.stack.undo.push(q)}if(y.redo.length>0)for(var k=0;k<y.redo.length;k++){const Q=(p=y.redo[k].range)==null?void 0:p.index,q=(S=y.redo[k].range)==null?void 0:S.length,ee={delta:new x(y.redo[k].delta.ops),range:Q!==void 0&&q!==void 0?new M(Q,q):null};s.history.stack.redo.push(ee)}}function P(y){var x;s&&((x=s.getSelection())==null?void 0:x.length)===0&&window.open(y.target.href,"_blank")}function H(){if(!s||!i[l])return;const y=i[l].ops;s.setContents(y);const x=i[l].history;_(x)}function B(){if(!s||!i[l])return;fe(oe,i[l].ops=s.getContents().ops,i);const y=structuredClone(s.history.stack);fe(oe,i[l].history=y,i)}const A=m(B,500);function f(){if(!s)return;s.formatText(0,s.getLength(),"link",!1,"api");const y=s.getText(),x=/https?:\/\/\S+/gi,M=y.matchAll(x);for(const b of M)s.formatText(b.index,b[0].length,"link",b[0],"api");const k=/.+\@.+\..+/gi,E=y.matchAll(k);for(const b of E)s.formatText(b.index,b[0].length,"link","mailto:"+b[0],"api");document.querySelectorAll(".ql-editor a").forEach(b=>{b.addEventListener("click",P)})}const T=m(f,500);function v(y,x,M){if(M==="user"){const k=s.getText().split(`
`)[0].trim();fe(oe,i[l].title=k===""?"Untitled":k,i),T(),A()}}async function h(){const{default:y}=await et(async()=>{const{default:x}=await import("../chunks/quill.Bk4jDS0q.js");return{default:x}},__vite__mapDeps([0,1]),import.meta.url);n(3,s=new y(o,{formats:["bold","italic","underline","strike","code","link"],placeholder:"Enter text here"})),H(),f(),s.on("text-change",v),s.keyboard.addBinding({key:"/",altKey:!0},()=>{s.format("code",!s.getFormat().code)}),s.keyboard.addBinding({key:"-",altKey:!0},()=>{s.format("strike",!s.getFormat().strike)})}Je(()=>{h()});function w(y){re[y?"unshift":"push"](()=>{o=y,n(1,o)})}return e.$$set=y=>{"tabID"in y&&n(2,l=y.tabID),"disabled"in y&&n(0,d=y.disabled)},e.$$.update=()=>{e.$$.dirty&9&&(d?s==null||s.disable():s==null||s.enable()),e.$$.dirty&24&&(s==null||s.root.setAttribute("spellcheck",a.spellCheck.toString()))},[d,o,l,s,a,w]}class Kt extends Le{constructor(t){super(),Ce(this,t,Gt,jt,xe,{tabID:2,disabled:0})}}const ot=500,Qt=300,ct=500,Jt=300;class Zt{constructor(){W(this,"isMoving",!1);W(this,"isLongclick",!1);W(this,"button",0);W(this,"lastX",0);W(this,"lastY",0);W(this,"consecutiveClicks",0);W(this,"lastMouseupTime",0);W(this,"activeElement",null);this.reset()}reset(){this.isMoving=!1,this.isLongclick=!1,this.button=0,this.lastX=0,this.lastY=0,this.consecutiveClicks=0,this.lastMouseupTime=0,this.activeElement=null}}class $t{constructor(){W(this,"isDragging",!1);W(this,"isPinching",!1);W(this,"isLongpressed",!1);W(this,"consecutiveTaps",0);W(this,"lastTouchendTime",0);W(this,"lastCenterX",0);W(this,"lastCenterY",0);W(this,"identifier",0);W(this,"x",0);W(this,"y",0);W(this,"hypotenuse",0);W(this,"activeElement",null);this.reset()}reset(){this.isDragging=!1,this.isPinching=!1,this.isLongpressed=!1,this.consecutiveTaps=0,this.lastTouchendTime=0,this.lastCenterX=0,this.lastCenterY=0,this.identifier=0,this.x=0,this.y=0,this.hypotenuse=0,this.activeElement=null}}let de=[],u=new Zt,r=new $t;const C=(e,t)=>{e!=null&&e.dispatchEvent(new CustomEvent("gesture",{detail:t,bubbles:!1,cancelable:!1}))},yt=e=>{u.reset(),r.reset(),u.lastMouseupTime=Date.now(),window.removeEventListener("mousemove",Re),window.removeEventListener("mouseup",Be),window.removeEventListener("touchmove",Oe),window.removeEventListener("touchend",Te)},wt=e=>{if(window.removeEventListener("mousemove",Re),window.removeEventListener("mouseup",Be),window.removeEventListener("touchmove",Oe),window.removeEventListener("touchend",Te),u.isMoving)if(u.isMoving=!1,u.isLongclick)u.isLongclick=!1,C(u.activeElement,{event:e,name:"longclick-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});else switch(u.button){case 0:C(u.activeElement,{event:e,name:"left-click-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});break;case 1:C(u.activeElement,{event:e,name:"middle-click-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});break;case 2:C(u.activeElement,{event:e,name:"right-click-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});break}u.isLongclick&&C(u.activeElement,{event:e,name:"longclick-release",x:u.lastX,y:u.lastY,dx:0,dy:0}),u.reset(),r.isDragging&&(r.isDragging=!1,r.isLongpressed?(r.isLongpressed=!1,C(r.activeElement,{event:e,name:"longpress-drag-end",x:r.lastCenterX,y:r.lastCenterY,dx:0,dy:0})):C(r.activeElement,{event:e,name:"touch-drag-end",x:r.lastCenterX,y:r.lastCenterY,dx:0,dy:0})),r.isLongpressed&&C(r.activeElement,{event:e,name:"longpress-release",x:r.lastCenterX,y:r.lastCenterY,dx:0,dy:0}),r.reset()},_t=e=>{C(e.target,{event:e,name:"wheel",x:e.clientX,y:e.clientY,dx:0,dy:0})},kt=e=>{},Et=e=>{document.activeElement!==e.target&&(window.addEventListener("mousemove",Re),window.addEventListener("mouseup",Be),u.activeElement=e.target,u.lastX=e.clientX,u.lastY=e.clientY,u.isMoving||(u.button=e.button),u.button===0&&window.setTimeout(()=>{Date.now()-u.lastMouseupTime>=ct&&!u.isMoving&&(u.isLongclick=!0,C(u.activeElement,{event:e,name:"longclick",x:e.clientX,y:e.clientY,dx:0,dy:0}))},ct))},Re=e=>{if(e.movementX===0&&e.movementY===0)return;let t=e.clientX-u.lastX,n=e.clientY-u.lastY;if(!u.isMoving)if(u.isLongclick)C(u.activeElement,{event:e,name:"longclick-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});else switch(u.button){case 0:C(u.activeElement,{event:e,name:"left-click-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});break;case 1:C(u.activeElement,{event:e,name:"middle-click-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});break;case 2:C(u.activeElement,{event:e,name:"right-click-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});break}if(u.isMoving=!0,u.lastX=e.clientX,u.lastY=e.clientY,u.isLongclick)C(u.activeElement,{event:e,name:"longclick-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});else switch(u.button){case 0:C(u.activeElement,{event:e,name:"left-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});break;case 1:C(u.activeElement,{event:e,name:"middle-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});break;case 2:C(u.activeElement,{event:e,name:"right-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});break}},Be=e=>{if(window.removeEventListener("mousemove",Re),window.removeEventListener("mouseup",Be),u.lastMouseupTime=Date.now(),u.isMoving)if(u.isMoving=!1,u.isLongclick)u.isLongclick=!1,C(u.activeElement,{event:e,name:"longclick-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});else switch(u.button){case 0:C(u.activeElement,{event:e,name:"left-click-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});break;case 1:C(u.activeElement,{event:e,name:"middle-click-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});break;case 2:C(u.activeElement,{event:e,name:"right-click-drag-end",x:u.lastX,y:u.lastY,dx:0,dy:0});break}else u.isLongclick||(e.button===2?C(u.activeElement,{event:e,name:"right-click",x:e.clientX,y:e.clientY,dx:0,dy:0}):e.button===1?C(u.activeElement,{event:e,name:"middle-click",x:e.clientX,y:e.clientY,dx:0,dy:0}):(u.consecutiveClicks===0&&C(u.activeElement,{event:e,name:"left-click",x:e.clientX,y:e.clientY,dx:0,dy:0}),u.consecutiveClicks++,window.setTimeout(()=>{u.consecutiveClicks>1&&C(u.activeElement,{event:e,name:"double-click",x:e.clientX,y:e.clientY,dx:0,dy:0}),u.consecutiveClicks=0},Jt)));u.isLongclick&&C(u.activeElement,{event:e,name:"longclick-release",x:e.clientX,y:e.clientY,dx:0,dy:0}),u.isLongclick=!1},Tt=e=>{if(e.touches.length>1,document.activeElement!==e.target){if(e.touches.length>1){if(e.touches[0].identifier===r.identifier)return;r.isPinching=!0}window.addEventListener("touchmove",Oe,{passive:!1}),window.addEventListener("touchend",Te),window.addEventListener("touchcancel",Te),r.identifier=e.touches[0].identifier,r.x=e.touches[0].clientX,r.y=e.touches[0].clientY,r.activeElement=e.target,window.setTimeout(()=>{r.isPinching||r.isDragging||Date.now()-r.lastTouchendTime>=ot&&(r.isDragging=!1,r.isPinching=!1,r.hypotenuse=null,r.isLongpressed=!0,C(r.activeElement,{event:e,name:"longpress",x:r.x,y:r.y,dx:0,dy:0}))},ot)}},Oe=e=>{if(r.isDragging){let t=r.x,n=r.y;r.x=e.touches[0].clientX,r.y=e.touches[0].clientY;let i=r.x-t,a=r.y-n;r.isLongpressed?C(r.activeElement,{event:e,name:"longpress-dragging",x:r.x,y:r.y,dx:i,dy:a,force:e.touches[0].force}):C(r.activeElement,{event:e,name:"touch-dragging",x:r.x,y:r.y,dx:i,dy:a,force:e.touches[0].force});return}else if(!r.isLongpressed&&(r.isPinching||e.touches.length>1)){r.x=e.touches[0].clientX,r.y=e.touches[0].clientY;let t={x:e.touches[1].clientX,y:e.touches[1].clientY},n={x:(r.x+t.x)/2,y:(r.y+t.y)/2},i=Math.hypot(r.x-t.x,r.y-t.y);r.hypotenuse===null&&(r.hypotenuse=i,r.lastCenterX=n.x,r.lastCenterY=n.y,C(r.activeElement,{event:e,name:"pinch-start",x:n.x,y:n.y,dx:0,dy:0})),r.isPinching=!0;let a=i/r.hypotenuse,l=n.x-r.lastCenterX,d=n.y-r.lastCenterY;C(r.activeElement,{event:e,name:"pinching",x:n.x,y:n.y,zoom:a,dx:l,dy:d}),r.hypotenuse=i,r.lastCenterX=n.x,r.lastCenterY=n.y;return}else r.isDragging=!0,r.isLongpressed?(C(r.activeElement,{event:e,name:"longpress-drag-start",x:r.x,y:r.y,dx:0,dy:0,force:e.touches[0].force}),r.x=e.touches[0].clientX,r.y=e.touches[0].clientY,C(r.activeElement,{event:e,name:"longpress-dragging",x:r.x,y:r.y,dx:0,dy:0,force:e.touches[0].force})):(C(r.activeElement,{event:e,name:"touch-drag-start",x:r.x,y:r.y,dx:0,dy:0,force:e.touches[0].force}),r.x=e.touches[0].clientX,r.y=e.touches[0].clientY,C(r.activeElement,{event:e,name:"touch-dragging",x:r.x,y:r.y,dx:0,dy:0,force:e.touches[0].force}))},Te=e=>{r.isDragging&&e.touches.length>0&&e.touches[0].identifier===r.identifier||(r.lastTouchendTime=Date.now(),window.removeEventListener("touchmove",Oe),window.removeEventListener("touchend",Te),window.removeEventListener("touchcancel",Te),r.isDragging?(r.isDragging=!1,r.isLongpressed?(r.isLongpressed=!1,C(r.activeElement,{event:e,name:"longpress-drag-end",x:r.x,y:r.y,dx:0,dy:0})):C(r.activeElement,{event:e,name:"touch-drag-end",x:r.x,y:r.y,dx:0,dy:0})):r.isPinching?(r.isPinching=!1,r.hypotenuse=null,C(r.activeElement,{event:e,name:"pinch-end",x:r.lastCenterX,y:r.lastCenterY,dx:0,dy:0})):r.isLongpressed||(r.consecutiveTaps===0&&C(r.activeElement,{event:e,name:"tap",x:r.x,y:r.y,dx:0,dy:0}),r.consecutiveTaps++,window.setTimeout(()=>{r.consecutiveTaps>1&&C(r.activeElement,{event:e,name:"double-tap",x:r.x,y:r.y,dx:0,dy:0}),r.consecutiveTaps=0},Qt)),r.isLongpressed&&C(r.activeElement,{event:e,name:"longpress-release",x:r.x,y:r.y,dx:0,dy:0}),r.isLongpressed=!1)};function en(...e){for(let t of e)de.findIndex(n=>n===t)===-1&&(de.length==0&&(window.addEventListener("blur",wt),window.addEventListener("focus",yt)),de.push(t),t.addEventListener("touchstart",Tt,{passive:!1}),t.addEventListener("mousedown",Et,{passive:!1}),t.addEventListener("contextmenu",kt,{passive:!1}),t.addEventListener("wheel",_t,{passive:!1}))}function tn(...e){const t=n=>{n.removeEventListener("touchstart",Tt),n.removeEventListener("mousedown",Et),n.removeEventListener("contextmenu",kt),n.removeEventListener("wheel",_t)};if(e.length==0){for(let n of de)t(n);de=[]}else for(let n of e){let i=de.findIndex(a=>a===n);i!==-1&&(t(n),de.splice(i,1))}de.length==0&&(window.removeEventListener("blur",wt),window.removeEventListener("focus",yt))}function nn(e){let t,n,i,a,l,d,s="LOG";return{c(){t=V("div"),n=V("canvas"),i=j(),a=V("canvas"),l=j(),d=V("div"),d.textContent=s,this.h()},l(o){t=R(o,"DIV",{class:!0});var m=N(t);n=R(m,"CANVAS",{id:!0,class:!0}),N(n).forEach(X),i=G(m),a=R(m,"CANVAS",{id:!0,class:!0}),N(a).forEach(X),l=G(m),d=R(m,"DIV",{class:!0,"data-svelte-h":!0}),ue(d)!=="svelte-rtly9t"&&(d.textContent=s),m.forEach(X),this.h()},h(){Y(n,"id","currentPath"),Y(n,"class","svelte-1aj9b7c"),U(n,"disabled",e[0]),Y(a,"id","canvas"),Y(a,"class","svelte-1aj9b7c"),U(a,"disabled",e[0]),Y(d,"class","log svelte-1aj9b7c"),Y(t,"class","canvas-container svelte-1aj9b7c"),U(t,"hide",e[1])},m(o,m){$(o,t,m),I(t,n),e[13](n),I(t,i),I(t,a),e[14](a),I(t,l),I(t,d),e[15](d)},p(o,m){m[0]&1&&U(n,"disabled",o[0]),m[0]&1&&U(a,"disabled",o[0]),m[0]&2&&U(t,"hide",o[1])},i:ge,o:ge,d(o){o&&X(t),e[13](null),e[14](null),e[15](null)}}}const sn=2;function He(e,t){t.lineWidth=e.lineWidths[0],t.lineCap="round",t.strokeStyle=e.color,t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=0;n<e.points.length;n++)t.lineWidth=e.lineWidths[n],t.quadraticCurveTo(e.points[n].x,e.points[n].y,e.ctrlPoints[n].x,e.ctrlPoints[n].y),t.moveTo(e.ctrlPoints[n].x,e.ctrlPoints[n].y);t.stroke()}function dt(e){return{x:Qe(e.x),y:Qe(e.y)}}function Qe(e){return Number(e.toFixed(sn))}function ln(e,t,n){let i,a;ie(e,oe,c=>n(28,a=c));let{radius:l=3}=t,{smoothness:d=2}=t,{stroke:s=5}=t,{pressureScaler:o=5}=t,{color:m="#000000"}=t,{disabled:_=!1}=t,{hide:P=!1}=t,{tabID:H=""}=t;function B(){T.clearRect(0,0,M,x),F=[]}function A(){if(F.length!=0){n(4,b.innerHTML="Undo",b),F.pop(),h.clearRect(0,0,M,x);for(let c=0;c<F.length;c++)He(F[c],h)}}let f,T,v,h,w={x:0,y:0},y=0,x=0,M=0,k,E=!1,b,p,S,F=[];function Q(){f&&(en(f),window.addEventListener("keydown",Me))}function q(){f&&(tn(f),window.removeEventListener("keydown",Me))}const ee=(c,L,D,O)=>{var Z=D-c,ne=O-L;return Math.sqrt(Z*Z+ne*ne)},ce=(c,L=300)=>{let D;return(...O)=>{clearTimeout(D),D=setTimeout(()=>{c.apply(void 0,O)},L)}};function se(c,L){let D=f.getBoundingClientRect();return{x:(c-D.left)*k,y:(L-D.top)*k}}function te(){if(!f||!v)return;Pe(),k=window.devicePixelRatio;let c=f.getBoundingClientRect();x=c.height*k,M=c.width*k,n(2,f.width=M,f),n(2,f.height=x,f),n(3,v.width=M,v),n(3,v.height=x,v);for(let L=0;L<F.length;L++)He(F[L],h)}function Xe(){a[H]&&fe(oe,a[H].paths=F,a)}function Ne(){a[H]&&(F=a[H].paths,te())}function We(c,L,D){E=!0,w=se(c,L),D!==void 0&&D>0?y=Math.log(D+1)*o*i:y=i,T.lineWidth=y,T.lineCap="round",T.strokeStyle=m,T.beginPath(),T.moveTo(w.x,w.y),T.stroke(),p={points:[],ctrlPoints:[],lineWidths:[],color:m}}function Fe(c,L,D){if(!E)return;let O=se(c,L);if(l>0){if(ee(O.x,O.y,w.x,w.y)<=l)return;let Ze=Math.sqrt(O.x*O.x+O.y*O.y-2*O.x*w.x+w.x*w.x-2*O.y*w.y+w.y*w.y);if(O={x:O.x+l*((w.x-O.x)/Ze),y:O.y+l*((w.y-O.y)/Ze)},ee(w.x,w.y,O.x,O.y)<=d)return}let Z=(w.x+O.x)/2,ne=(w.y+O.y)/2;D!==void 0&&D>0&&(y=Math.log(D+1)*o*i*.2+y*.8),p.points.push(dt(w)),p.ctrlPoints.push(dt({x:Z,y:ne})),p.lineWidths.push(Qe(y)),T.clearRect(0,0,M,x),He(p,T),w=O}function Pe(){E&&(F.push(p),He(p,h),T.clearRect(0,0,M,x),Xe()),E=!1}const Me=function(c){c.ctrlKey&&c.key=="z"&&(A(),Xe()),c.preventDefault()};Je(()=>{T=f.getContext("2d"),T.imageSmoothingEnabled=!1,h=v.getContext("2d"),h.imageSmoothingEnabled=!1,f.addEventListener("gesture",c=>{switch(c.detail.name){case"left-click-drag-start":case"touch-drag-start":We(c.detail.x,c.detail.y,c.detail.force);break;case"left-click-dragging":case"touch-dragging":c.detail.force>0&&n(4,b.innerHTML=c.detail.force,b),Fe(c.detail.x,c.detail.y,c.detail.force);break;case"left-click-drag-end":case"touch-drag-end":Pe();break}}),S=new ResizeObserver(ce(te,0)),S.observe(f),Ne(),_?q():Q()}),It(()=>{S&&S.disconnect(),q()});function Ue(c){re[c?"unshift":"push"](()=>{v=c,n(3,v)})}function qe(c){re[c?"unshift":"push"](()=>{f=c,n(2,f)})}function g(c){re[c?"unshift":"push"](()=>{b=c,n(4,b)})}return e.$$set=c=>{"radius"in c&&n(5,l=c.radius),"smoothness"in c&&n(6,d=c.smoothness),"stroke"in c&&n(7,s=c.stroke),"pressureScaler"in c&&n(8,o=c.pressureScaler),"color"in c&&n(9,m=c.color),"disabled"in c&&n(0,_=c.disabled),"hide"in c&&n(1,P=c.hide),"tabID"in c&&n(10,H=c.tabID)},e.$$.update=()=>{e.$$.dirty[0]&128&&(i=Math.max(s,1)),e.$$.dirty[0]&1&&(_?q():Q())},[_,P,f,v,b,l,d,s,o,m,H,B,A,Ue,qe,g]}class rn extends Le{constructor(t){super(),Ce(this,t,ln,nn,xe,{radius:5,smoothness:6,stroke:7,pressureScaler:8,color:9,disabled:0,hide:1,tabID:10,clear:11,undo:12},null,[-1,-1])}get clear(){return this.$$.ctx[11]}get undo(){return this.$$.ctx[12]}}function ut(e,t,n){const i=e.slice();return i[4]=t[n],i}function ft(e,t,n){const i=e.slice();return i[4]=t[n],i}function an(e){let t,n;return t=new At({}),{c(){ve(t.$$.fragment)},l(i){be(t.$$.fragment,i)},m(i,a){pe(t,i,a),n=!0},p:ge,i(i){n||(z(t.$$.fragment,i),n=!0)},o(i){K(t.$$.fragment,i),n=!1},d(i){ye(t,i)}}}function on(e){let t,n,i,a,l,d=[],s=new Map,o,m,_=[],P=new Map,H;n=new zt({});let B=we(Object.keys(e[3]));const A=v=>v[4];for(let v=0;v<B.length;v+=1){let h=ft(e,B,v),w=A(h);s.set(w,d[v]=gt(w,h))}let f=we(Object.keys(e[3]));const T=v=>v[4];for(let v=0;v<f.length;v+=1){let h=ut(e,f,v),w=T(h);P.set(w,_[v]=ht(w,h))}return{c(){t=V("div"),ve(n.$$.fragment),i=j(),a=V("div"),l=V("div");for(let v=0;v<d.length;v+=1)d[v].c();o=j(),m=V("div");for(let v=0;v<_.length;v+=1)_[v].c();this.h()},l(v){t=R(v,"DIV",{class:!0});var h=N(t);be(n.$$.fragment,h),i=G(h),a=R(h,"DIV",{class:!0});var w=N(a);l=R(w,"DIV",{class:!0});var y=N(l);for(let M=0;M<d.length;M+=1)d[M].l(y);y.forEach(X),o=G(w),m=R(w,"DIV",{class:!0});var x=N(m);for(let M=0;M<_.length;M+=1)_[M].l(x);x.forEach(X),w.forEach(X),h.forEach(X),this.h()},h(){Y(l,"class","editor-container svelte-gwyvkn"),Y(m,"class","drawing-container svelte-gwyvkn"),U(m,"disabled",e[0].activeTool!=="pencil"),Y(a,"class","canvas-container svelte-gwyvkn"),Y(t,"class","page-container svelte-gwyvkn")},m(v,h){$(v,t,h),pe(n,t,null),I(t,i),I(t,a),I(a,l);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(l,null);I(a,o),I(a,m);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(m,null);H=!0},p(v,h){h&10&&(B=we(Object.keys(v[3])),_e(),d=Ge(d,h,A,1,v,B,s,l,Ke,gt,null,ft),ke()),h&11&&(f=we(Object.keys(v[3])),_e(),_=Ge(_,h,T,1,v,f,P,m,Ke,ht,null,ut),ke()),(!H||h&1)&&U(m,"disabled",v[0].activeTool!=="pencil")},i(v){if(!H){z(n.$$.fragment,v);for(let h=0;h<B.length;h+=1)z(d[h]);for(let h=0;h<f.length;h+=1)z(_[h]);H=!0}},o(v){K(n.$$.fragment,v);for(let h=0;h<d.length;h+=1)K(d[h]);for(let h=0;h<_.length;h+=1)K(_[h]);H=!1},d(v){v&&X(t),ye(n);for(let h=0;h<d.length;h+=1)d[h].d();for(let h=0;h<_.length;h+=1)_[h].d()}}}function gt(e,t){let n,i,a;return i=new Kt({props:{disabled:t[4]!==t[1],tabID:t[4]}}),{key:e,first:null,c(){n=Ee(),ve(i.$$.fragment),this.h()},l(l){n=Ee(),be(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,d){$(l,n,d),pe(i,l,d),a=!0},p(l,d){t=l;const s={};d&10&&(s.disabled=t[4]!==t[1]),d&8&&(s.tabID=t[4]),i.$set(s)},i(l){a||(z(i.$$.fragment,l),a=!0)},o(l){K(i.$$.fragment,l),a=!1},d(l){l&&X(n),ye(i,l)}}}function ht(e,t){let n,i,a;return i=new rn({props:{color:gn,stroke:dn,radius:un,smoothness:fn,tabID:t[4],hide:t[4]!==t[1],disabled:t[4]!==t[1]||t[0].activeTool!=="pencil"}}),{key:e,first:null,c(){n=Ee(),ve(i.$$.fragment),this.h()},l(l){n=Ee(),be(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,d){$(l,n,d),pe(i,l,d),a=!0},p(l,d){t=l;const s={};d&8&&(s.tabID=t[4]),d&10&&(s.hide=t[4]!==t[1]),d&11&&(s.disabled=t[4]!==t[1]||t[0].activeTool!=="pencil"),i.$set(s)},i(l){a||(z(i.$$.fragment,l),a=!0)},o(l){K(i.$$.fragment,l),a=!1},d(l){l&&X(n),ye(i,l)}}}function cn(e){let t,n,i,a;const l=[on,an],d=[];function s(o,m){return o[2].currentUser&&!o[2].isLoading?0:1}return t=s(e),n=d[t]=l[t](e),{c(){n.c(),i=Ee()},l(o){n.l(o),i=Ee()},m(o,m){d[t].m(o,m),$(o,i,m),a=!0},p(o,[m]){let _=t;t=s(o),t===_?d[t].p(o,m):(_e(),K(d[_],1,1,()=>{d[_]=null}),ke(),n=d[t],n?n.p(o,m):(n=d[t]=l[t](o),n.c()),z(n,1),n.m(i.parentNode,i))},i(o){a||(z(n),a=!0)},o(o){K(n),a=!1},d(o){o&&X(i),d[t].d(o)}}}let dn=10,un=1,fn=3,gn="rgba(253, 221, 77, 0.2)";function hn(e,t,n){let i,a,l,d;return ie(e,me,s=>n(0,a=s)),ie(e,bt,s=>n(2,l=s)),ie(e,oe,s=>n(3,d=s)),e.$$.update=()=>{e.$$.dirty&1&&n(1,i=a.order[a.activeIndex])},[a,i,l,d]}class Tn extends Le{constructor(t){super(),Ce(this,t,hn,cn,xe,{})}}export{Tn as component};
