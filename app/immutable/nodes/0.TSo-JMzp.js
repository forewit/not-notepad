import{s as D,q as E,u as I,v as k,w as A,c as C,o as M}from"../chunks/scheduler.cfeIpFhx.js";import{S as H,i as j,H as U,s as q,D as O,h as F,j as $,a as b,t as v,g as u,e as h,p as R,E as V,c as g,q as z,w as p,k as L,r as P,u as W,d as w}from"../chunks/index.D2coaRY5.js";import{b as B,a as _,d as S,c as y,g as G,s as J}from"../chunks/firebaseStore.KdC7LZ6t.js";import{t as T}from"../chunks/tabsStore.DQfgBwSl.js";import{g as K,b as Q}from"../chunks/entry.3XbTT2o4.js";import{s as X}from"../chunks/settingsStore.C4O6D5K7.js";import{t as Y}from"../chunks/themes.CDbnN2Vk.js";const Z=!0,x="always",me=Object.freeze(Object.defineProperty({__proto__:null,prerender:Z,trailingSlash:x},Symbol.toStringTag,{value:"Module"}));function N(l){let a,r,s;const i=l[3].default,t=E(i,l,l[2],null);return{c(){a=new U(!1),r=q(),t&&t.c(),this.h()},l(e){a=O(e,!1),r=F(e),t&&t.l(e),this.h()},h(){a.a=r},m(e,o){a.m(l[0],e,o),$(e,r,o),t&&t.m(e,o),s=!0},p(e,[o]){(!s||o&1)&&a.p(e[0]),t&&t.p&&(!s||o&4)&&I(t,i,e,e[2],s?A(i,e[2],o,null):k(e[2]),null)},i(e){s||(b(t,e),s=!0)},o(e){v(t,e),s=!1},d(e){e&&(a.d(),u(r)),t&&t.d(e)}}}function ee(l,a,r){let s,i;C(l,X,n=>r(1,i=n));let{$$slots:t={},$$scope:e}=a;function o(n){console.log(n);const c=Y.find(f=>f.name===n);return c?`<style>
    :root {
    --bg: ${c.bg};
    --bg-alt: ${c.bgAlt};
    --main: ${c.main};
    --caret: ${c.caret};
    --error: ${c.error};
    --sub: ${c.sub};
    --text: ${c.text};
    }
    </style>`:""}return l.$$set=n=>{"$$scope"in n&&r(2,e=n.$$scope)},l.$$.update=()=>{l.$$.dirty&2&&r(0,s=o(i.theme))},[s,i,e,t]}class te extends H{constructor(a){super(),j(this,a,ee,N,D,{})}}function se(l){let a,r,s;const i=l[2].default,t=E(i,l,l[3],null);return{c(){a=h("div"),r=h("div"),t&&t.c(),this.h()},l(e){a=g(e,"DIV",{class:!0});var o=w(a);r=g(o,"DIV",{class:!0});var n=w(r);t&&t.l(n),n.forEach(u),o.forEach(u),this.h()},h(){p(r,"class","content svelte-1kodcgf"),p(a,"class","container svelte-1kodcgf")},m(e,o){$(e,a,o),L(a,r),t&&t.m(r,null),s=!0},p(e,o){t&&t.p&&(!s||o&8)&&I(t,i,e,e[3],s?A(i,e[3],o,null):k(e[3]),null)},i(e){s||(b(t,e),s=!0)},o(e){v(t,e),s=!1},d(e){e&&u(a),t&&t.d(e)}}}function ae(l){let a,r,s,i;return s=new te({props:{$$slots:{default:[se]},$$scope:{ctx:l}}}),{c(){a=h("meta"),r=q(),R(s.$$.fragment),this.h()},l(t){const e=V("svelte-1xk05yi",document.head);a=g(e,"META",{name:!0,content:!0}),e.forEach(u),r=F(t),z(s.$$.fragment,t),this.h()},h(){p(a,"name","viewport"),p(a,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover")},m(t,e){L(document.head,a),$(t,r,e),P(s,t,e),i=!0},p(t,[e]){const o={};e&8&&(o.$$scope={dirty:e,ctx:t}),s.$set(o)},i(t){i||(b(s.$$.fragment,t),i=!0)},o(t){v(s.$$.fragment,t),i=!1},d(t){t&&u(r),u(a),W(s,t)}}}function re(l,a,r){let s;C(l,_,n=>r(1,s=n));let{$$slots:i={},$$scope:t}=a;function e(n){n.length!==0&&n.forEach(c=>{try{T.newTabFromString(c)}catch(f){console.warn("Failed to parse tab!",c,f);return}})}let o=!1;return M(()=>{B.onAuthStateChanged(async n=>{if(!n){_.update(m=>({...m,isLoading:!1,currentUser:n})),r(0,o=!0);return}const c=S(y,"users",n.uid),f=await G(c);let d={tabs:[],activeIndex:0};if(f.exists())console.log("Fetching firestore user doc..."),d=f.data();else{console.log("Creating firestore user doc...");const m=S(y,"users",n.uid);await J(m,d,{merge:!0})}e(d.tabs),T.setActiveIndex(d.activeIndex),_.update(m=>({...m,isLoading:!1,currentUser:n,data:d})),r(0,o=!0)})}),l.$$set=n=>{"$$scope"in n&&r(3,t=n.$$scope)},l.$$.update=()=>{l.$$.dirty&3&&!s.currentUser&&o&&K(Q+"/login")},[o,s,i,t]}class de extends H{constructor(a){super(),j(this,a,re,ae,D,{})}}export{de as component,me as universal};
