import{s as ne,n as ue,i as ge,r as ke,b as W,c as ye,o as Oe,y as Xe,z as Ie}from"../chunks/scheduler.DvlNEcs7.js";import{S as se,i as le,e as k,c as y,a as I,d as w,l as _,r as oe,g as j,h as T,m as N,D as qe,s as U,w as z,f as Y,x as G,E as H,F as ce,y as J,G as pe,n as O,o as X,z as Z,u as Fe,q as Ue,H as Ee}from"../chunks/index.ClDJnzeU.js";import{e as be,u as Ye,o as ze,a as he,b as $,d as _e}from"../chunks/animate.DXadzH7U.js";import{b as Ce,w as Ge}from"../chunks/paths.BssP2XPn.js";function Je(l){let e,t,n,s;return{c(){e=k("button"),t=k("div"),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var o=I(e);t=y(o,"DIV",{class:!0,style:!0}),I(t).forEach(w),o.forEach(w),this.h()},h(){_(t,"class","icon svelte-fsrv9v"),oe(t,"-webkit-mask","url("+l[1]+") no-repeat center / contain"),oe(t,"mask","url("+l[1]+") no-repeat center / contain"),_(e,"class","svelte-fsrv9v")},m(i,o){j(i,e,o),T(e,t),n||(s=N(e,"click",qe(function(){ge(l[0])&&l[0].apply(this,arguments)})),n=!0)},p(i,[o]){l=i,o&2&&oe(t,"-webkit-mask","url("+l[1]+") no-repeat center / contain"),o&2&&oe(t,"mask","url("+l[1]+") no-repeat center / contain")},i:ue,o:ue,d(i){i&&w(e),n=!1,s()}}}function Ze(l,e,t){let{onClick:n=()=>{}}=e,{url:s=""}=e;return l.$$set=i=>{"onClick"in i&&t(0,n=i.onClick),"url"in i&&t(1,s=i.url)},[n,s]}class De extends se{constructor(e){super(),le(this,e,Ze,Je,ne,{onClick:0,url:1})}}function je(l){let e,t,n,s,i,o,p,b,g;return o=new De({props:{url:Ce+"/images/svg/cancel.svg",onClick:l[2]}}),{c(){e=k("div"),t=k("button"),n=k("input"),s=U(),i=k("div"),z(o.$$.fragment),this.h()},l(f){e=y(f,"DIV",{class:!0});var m=I(e);t=y(m,"BUTTON",{class:!0});var d=I(t);n=y(d,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),s=Y(d),i=y(d,"DIV",{class:!0});var A=I(i);G(o.$$.fragment,A),A.forEach(w),d.forEach(w),m.forEach(w),this.h()},h(){_(n,"autocorrect","off"),_(n,"autocomplete","off"),_(n,"spellcheck","false"),_(n,"type","text"),_(n,"class","svelte-1tws2uh"),_(i,"class","close-button svelte-1tws2uh"),_(t,"class","tab svelte-1tws2uh"),H(t,"active",l[1]),_(e,"class","container svelte-1tws2uh")},m(f,m){j(f,e,m),T(e,t),T(t,n),l[6](n),ce(n,l[0]),T(t,s),T(t,i),J(o,i,null),p=!0,b||(g=[N(n,"input",l[7]),N(t,"dblclick",pe(l[8])),N(t,"click",function(){ge(l[3])&&l[3].apply(this,arguments)}),N(t,"mousedown",pe(function(){ge(l[4])&&l[4].apply(this,arguments)}))],b=!0)},p(f,[m]){l=f,m&1&&n.value!==l[0]&&ce(n,l[0]);const d={};m&4&&(d.onClick=l[2]),o.$set(d),(!p||m&2)&&H(t,"active",l[1])},i(f){p||(O(o.$$.fragment,f),p=!0)},o(f){X(o.$$.fragment,f),p=!1},d(f){f&&w(e),l[6](null),Z(o),b=!1,ke(g)}}}function Ke(l,e,t){let{title:n=""}=e,{active:s=!1}=e,{onClose:i=()=>{}}=e,{onClick:o=()=>{}}=e,{onMousedown:p=d=>{}}=e,b;function g(d){W[d?"unshift":"push"](()=>{b=d,t(5,b)})}function f(){n=this.value,t(0,n)}const m=()=>b.select();return l.$$set=d=>{"title"in d&&t(0,n=d.title),"active"in d&&t(1,s=d.active),"onClose"in d&&t(2,i=d.onClose),"onClick"in d&&t(3,o=d.onClick),"onMousedown"in d&&t(4,p=d.onMousedown)},[n,s,i,o,p,b,g,f,m]}class Ae extends se{constructor(e){super(),le(this,e,Ke,je,ne,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}let Qe=0;const V=Ge({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:l=>{const{data:e={id:Qe++,title:"Untitled",text:""},index:t=-1,callback:n=()=>{}}=l||{};V.update(s=>(s.tabs.some(i=>i.id==e.id)||(t<0?(s.tabs.push(e),s.activeIndex=s.tabs.length-1):(s.tabs.splice(t,0,e),s.activeIndex=t)),s)),n()},removeTab:l=>{V.update(e=>(l<0||l>=e.tabs.length||(e.placeholderIndex==l&&(e.placeholderIndex=-1),e.tabs.splice(l,1),l==e.activeIndex-1?e.activeIndex=Math.max(0,l):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:l=>{V.update(e=>(l<0?e.activeIndex=0:l>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=l,e))},setPlaceholderIndex:l=>{V.update(e=>(e.placeholderIndex=l===void 0||l<0||l>=e.tabs.length?-1:l,e))},moveTab:(l,e,t=()=>{})=>{l!=e&&(V.update(n=>{if(l<0||l>=n.tabs.length||e<0||e>=n.tabs.length)return n;const s=n.tabs[l];return n.tabs.splice(l,1),n.tabs.splice(e,0,s),n.activeIndex==l&&(n.activeIndex=e),n.placeholderIndex==l&&(n.placeholderIndex=e),n}),t())}};function ve(l,e,t){const n=l.slice();return n[38]=e[t],n[39]=e,n[40]=t,n}function we(l,e){let t,n,s,i,o=e[40],p,b,g;function f(){return e[15](e[40])}function m(){return e[16](e[40])}function d(...u){return e[17](e[40],...u)}function A(u){e[18](u,e[40])}let E={active:e[8].activeIndex==e[40],onClose:f,onClick:m,onMousedown:d};e[8].tabs[e[40]].title!==void 0&&(E.title=e[8].tabs[e[40]].title),n=new Ae({props:E}),W.push(()=>Ee(n,"title",A));const D=()=>e[19](t,o),L=()=>e[19](null,o);return{key:l,first:null,c(){t=k("div"),z(n.$$.fragment),i=U(),this.h()},l(u){t=y(u,"DIV",{class:!0,draggable:!0});var r=I(t);G(n.$$.fragment,r),i=Y(r),r.forEach(w),this.h()},h(){_(t,"class","tab-container svelte-b54y66"),_(t,"draggable","true"),H(t,"preventHover",e[7]),H(t,"placeholder",e[8].placeholderIndex==e[40]),this.first=t},m(u,r){j(u,t,r),J(n,t,null),T(t,i),D(),p=!0,b||(g=[Xe(e[11].call(null,t)),N(t,"dragstart",e[13])],b=!0)},p(u,r){e=u;const c={};r[0]&256&&(c.active=e[8].activeIndex==e[40]),r[0]&256&&(c.onClose=f),r[0]&256&&(c.onClick=m),r[0]&256&&(c.onMousedown=d),!s&&r[0]&256&&(s=!0,c.title=e[8].tabs[e[40]].title,Ie(()=>s=!1)),n.$set(c),o!==e[40]&&(L(),o=e[40],D()),(!p||r[0]&128)&&H(t,"preventHover",e[7]),(!p||r[0]&256)&&H(t,"placeholder",e[8].placeholderIndex==e[40])},i(u){p||(O(n.$$.fragment,u),p=!0)},o(u){X(n.$$.fragment,u),p=!1},d(u){u&&w(t),Z(n),L(),b=!1,ke(g)}}}function xe(l){let e,t,n,s=[],i=new Map,o,p,b,g,f,m,d,A,E,D=be(l[8].tabs);const L=u=>u[38];for(let u=0;u<D.length;u+=1){let r=ve(l,D,u),c=L(r);i.set(c,s[u]=we(c,r))}return b=new De({props:{url:Ce+"/images/svg/plus.svg",onClick:l[10]}}),m=new Ae({props:{title:l[3].title,active:!l[5]}}),{c(){e=k("div"),t=k("div"),n=k("div");for(let u=0;u<s.length;u+=1)s[u].c();o=U(),p=k("div"),z(b.$$.fragment),g=U(),f=k("div"),z(m.$$.fragment),d=U(),A=k("div"),this.h()},l(u){e=y(u,"DIV",{});var r=I(e);t=y(r,"DIV",{class:!0});var c=I(t);n=y(c,"DIV",{class:!0});var M=I(n);for(let S=0;S<s.length;S+=1)s[S].l(M);M.forEach(w),o=Y(c),p=y(c,"DIV",{class:!0});var R=I(p);G(b.$$.fragment,R),R.forEach(w),g=Y(c),f=y(c,"DIV",{class:!0});var q=I(f);G(m.$$.fragment,q),q.forEach(w),c.forEach(w),d=Y(r),A=y(r,"DIV",{class:!0}),I(A).forEach(w),r.forEach(w),this.h()},h(){_(n,"class","tabs svelte-b54y66"),_(p,"class","buttons svelte-b54y66"),_(f,"class","clone svelte-b54y66"),H(f,"dragging",l[0]),_(t,"class","toolbar svelte-b54y66"),_(A,"class","separator svelte-b54y66")},m(u,r){j(u,e,r),T(e,t),T(t,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l[20](n),T(t,o),T(t,p),J(b,p,null),T(t,g),T(t,f),J(m,f,null),l[21](f),T(e,d),T(e,A),l[22](e),E=!0},p(u,r){r[0]&29572&&(D=be(u[8].tabs),Fe(),s=Ye(s,r,L,1,u,D,i,n,ze,we,null,ve),Ue());const c={};r[0]&8&&(c.title=u[3].title),r[0]&32&&(c.active=!u[5]),m.$set(c),(!E||r[0]&1)&&H(f,"dragging",u[0])},i(u){if(!E){for(let r=0;r<D.length;r+=1)O(s[r]);O(b.$$.fragment,u),O(m.$$.fragment,u),E=!0}},o(u){for(let r=0;r<s.length;r+=1)X(s[r]);X(b.$$.fragment,u),X(m.$$.fragment,u),E=!1},d(u){u&&w(e);for(let r=0;r<s.length;r+=1)s[r].d();l[20](null),Z(b),Z(m),l[21](null),l[22](null)}}}const $e=12,re=140,ee=70,te=200,et=1600,Te=.3;function tt(l,e,t){let n;ye(l,V,a=>t(8,n=a));let s,i=[],o=0;Oe(()=>{s.style.setProperty("--tab-max-width",`${re}px`),s.style.setProperty("--tab-min-width",`${ee}px`)});const p=(a,h=300)=>{let v;return(...C)=>{clearTimeout(v),v=setTimeout(()=>{a.apply(this,C)},h)}};function b(a){B.setActiveIndex(a),s.children[a].scrollIntoView({behavior:"smooth"})}function g(){B.newTab()}function f(a){if(!s)return;const h=a.getBoundingClientRect().width;he({duration:te,easing:$,onStep:(v,C)=>{n.tabs.length==1?t(1,s.style.gridTemplateColumns=`minmax(${v*ee}px, ${v*h}px)`,s):t(1,s.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*ee}px, ${v*h}px)`,s),t(1,s.scrollLeft=s.scrollWidth,s)},onEnd:()=>{t(1,s.style.gridTemplateColumns="",s)}})}const m=p(()=>{if(!s)return;s.style.setProperty("--tab-max-width",`${re}px`);const a=i[0].getBoundingClientRect().width;he({duration:te,easing:$,onStep:(h,v)=>{s.style.setProperty("--tab-max-width",`${o+h*(a-o)}px`)},onEnd:()=>{s.style.setProperty("--tab-max-width",`${re}px`)}})},et),d=a=>{if(!i[a]){console.warn("Cannot close tab!");return}o=i[a].getBoundingClientRect().width,a<n.tabs.length-1&&o<re&&(s.style.setProperty("--tab-max-width",`${o}px`),m()),a==n.tabs.length-1?B.setActiveIndex(a-1):a==n.activeIndex&&B.setActiveIndex(a+1),he({duration:te,easing:$,onStep:(h,v)=>{a==0?t(1,s.style.gridTemplateColumns=`minmax(${v*ee}px, ${v*o}px)`,s):t(1,s.style.gridTemplateColumns=`repeat(${a}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${v*ee}px, ${v*o}px)`,s)},onEnd:()=>{t(1,s.style.gridTemplateColumns="",s),B.removeTab(a)}})},A=(a,h)=>{const v=i[0].getBoundingClientRect().width;B.moveTab(a,h,()=>{if(a>h)for(let C=h;C<a;C++)_e(i[C],{duration:te,easing:$,css:(Q,P)=>`transform: translateX(-${P*v}px);`});if(a<h)for(let C=h;C>a;C--)_e(i[C],{duration:te,easing:$,css:(Q,P)=>`transform: translateX(${P*v}px);`})})};let E=null,D=-1,L={id:-1,title:"",text:""},u,r,c,M=!1,R=!1,q=0,S=0,ae,fe=!1;function Be(a){!a.target||!a.dataTransfer||(a.dataTransfer.setData("text/plain",JSON.stringify(L)),a.dataTransfer.setDragImage(new Image,0,0))}function Se(a,h){if(a==0&&h==0){t(4,c.style.left="-1000px",c),t(4,c.style.top="-1000px",c);return}let v=ae.getBoundingClientRect();if(a<v.left||a>v.right||h<v.top||h>v.bottom){R||(S=0),t(4,c.style.left=`${a+25}px`,c),t(4,c.style.top=`${h-5}px`,c),t(5,R=!0);return}t(4,c.style.left=`${a+q}px`,c),t(4,c.style.top=`${r.top}px`,c),R&&t(5,R=!1);const C=-s.scrollLeft,Q=i[0].getBoundingClientRect().width;let P=-1;if(a>C+n.tabs.length*Q)P=n.tabs.length-1;else for(let x=0;x<n.tabs.length;x++)if(a>C+x*Q&&a<C+(x+1)*Q){P=x;break}a<20?(S=-Te,requestAnimationFrame(de)):a>s.clientWidth-10?(S=Te,requestAnimationFrame(de)):S=0,!(P==-1||P==n.placeholderIndex)&&A(n.placeholderIndex,P)}let K=0;function de(a){if(!M||S==0){K=0;return}K==0&&(K=a);const h=a-K;K=a,s.scrollBy({left:S*h}),requestAnimationFrame(de)}function me(a,h){a.target&&(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",F),window.addEventListener("drag",ie),window.addEventListener("dragend",F),window.addEventListener("blur",F),B.setActiveIndex(h),u=a.target,r=u.getBoundingClientRect(),E=[a.clientX,a.clientY],q=r.left-a.clientX,t(4,c.style.width=`${r.width}px`,c),t(4,c.style.left=`${r.left}px`,c),t(4,c.style.top=`${r.top}px`,c),t(3,L={...n.tabs[h]}),D=h)}function ie(a){if(M){Se(a.clientX,a.clientY);return}E===null||Math.hypot(E[0]-a.clientX,E[1]-a.clientY)<$e||(t(0,M=!0),B.setPlaceholderIndex(D),B.setActiveIndex(D))}function F(){window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",F),window.removeEventListener("drag",ie),window.removeEventListener("dragend",F),window.removeEventListener("blur",F),E=null,t(5,R=!1),D=-1,q=0,B.setPlaceholderIndex(),t(0,M=!1)}const Le=a=>d(a),Me=a=>b(a),Re=(a,h)=>me(h,a);function Pe(a,h){l.$$.not_equal(n.tabs[h].title,a)&&(n.tabs[h].title=a,V.set(n))}function Ve(a,h){W[a?"unshift":"push"](()=>{i[h]=a,t(2,i)})}function He(a){W[a?"unshift":"push"](()=>{s=a,t(1,s)})}function We(a){W[a?"unshift":"push"](()=>{c=a,t(4,c)})}function Ne(a){W[a?"unshift":"push"](()=>{ae=a,t(6,ae)})}return l.$$.update=()=>{l.$$.dirty[0]&1&&(M?t(7,fe=!0):setTimeout(()=>t(7,fe=!1),20))},[M,s,i,L,c,R,ae,fe,n,b,g,f,d,Be,me,Le,Me,Re,Pe,Ve,He,We,Ne]}class nt extends se{constructor(e){super(),le(this,e,tt,xe,ne,{},null,[-1,-1])}}function st(l){let e,t,n,s;return{c(){e=k("div"),t=k("textarea"),this.h()},l(i){e=y(i,"DIV",{id:!0,class:!0});var o=I(e);t=y(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),I(t).forEach(w),o.forEach(w),this.h()},h(){_(t,"spellcheck","false"),_(t,"name","editor"),_(t,"id","text"),_(t,"class","svelte-7cpmmf"),_(e,"id","editor"),_(e,"class","svelte-7cpmmf")},m(i,o){j(i,e,o),T(e,t),ce(t,l[0]),n||(s=N(t,"input",l[1]),n=!0)},p(i,[o]){o&1&&ce(t,i[0])},i:ue,o:ue,d(i){i&&w(e),n=!1,s()}}}function lt(l,e,t){let{text:n}=e;function s(){n=this.value,t(0,n)}return l.$$set=i=>{"text"in i&&t(0,n=i.text)},[n,s]}class at extends se{constructor(e){super(),le(this,e,lt,st,ne,{text:0})}}function it(l){let e,t,n,s,i,o;t=new nt({});function p(g){l[2](g)}let b={};return l[0].text!==void 0&&(b.text=l[0].text),s=new at({props:b}),W.push(()=>Ee(s,"text",p)),{c(){e=k("div"),z(t.$$.fragment),n=U(),z(s.$$.fragment),this.h()},l(g){e=y(g,"DIV",{class:!0});var f=I(e);G(t.$$.fragment,f),n=Y(f),G(s.$$.fragment,f),f.forEach(w),this.h()},h(){_(e,"class","container svelte-16qa0xo")},m(g,f){j(g,e,f),J(t,e,null),T(e,n),J(s,e,null),o=!0},p(g,[f]){const m={};!i&&f&1&&(i=!0,m.text=g[0].text,Ie(()=>i=!1)),s.$set(m)},i(g){o||(O(t.$$.fragment,g),O(s.$$.fragment,g),o=!0)},o(g){X(t.$$.fragment,g),X(s.$$.fragment,g),o=!1},d(g){g&&w(e),Z(t),Z(s)}}}function ot(l,e,t){let n,s;ye(l,V,o=>t(1,s=o)),B.newTab({data:{id:-1,title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.19"}});function i(o){l.$$.not_equal(n.text,o)&&(n.text=o,t(0,n),t(1,s))}return l.$$.update=()=>{l.$$.dirty&2&&t(0,n=s.tabs.length>0?s.tabs[s.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,s,i]}class dt extends se{constructor(e){super(),le(this,e,ot,it,ne,{})}}export{dt as component};
