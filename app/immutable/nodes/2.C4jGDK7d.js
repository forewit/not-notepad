import{r as ne,s as F,n as j,i as se,b as z,c as ie,y as ae,f as ce}from"../chunks/scheduler._-uiodl9.js";import{l as M,n as $,S as H,i as G,e as I,c as C,a as T,d as g,o as b,p as X,g as B,h as E,z as x,A as ue,s as W,u as O,f as U,v as N,B as J,C as K,w as P,D as fe,x as R,q as de,m as he,E as le,F as ve,G as me}from"../chunks/index.4ZfS5K5C.js";import{b as oe,w as _e}from"../chunks/paths.LJSzdqdX.js";function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function be(n,e){M(n,1,1,()=>{e.delete(n.key)})}function ge(n,e,t,s,a,i,l,m,_,f,r,c){let v=n.length,h=i.length,o=v;const u={};for(;o--;)u[n[o].key]=o;const p=[],S=new Map,d=new Map,w=[];for(o=h;o--;){const k=c(a,i,o),D=t(k);let V=l.get(D);V?w.push(()=>V.p(k,e)):(V=f(D,k),V.c()),S.set(D,p[o]=V),D in u&&d.set(D,Math.abs(o-u[D]))}const y=new Set,A=new Set;function Y(k){$(k,1),k.m(m,r),l.set(k.key,k),r=k.first,h--}for(;v&&h;){const k=p[h-1],D=n[v-1],V=k.key,L=D.key;k===D?(r=k.first,v--,h--):S.has(L)?!l.has(V)||y.has(V)?Y(k):A.has(L)?v--:d.get(V)>d.get(L)?(A.add(V),Y(k)):(y.add(L),v--):(_(D,l),v--)}for(;v--;){const k=n[v];S.has(k.key)||_(k,l)}for(;h;)Y(p[h-1]);return ne(w),p}function pe(n){let e,t,s,a;return{c(){e=I("button"),t=I("div"),this.h()},l(i){e=C(i,"BUTTON",{class:!0});var l=T(e);t=C(l,"DIV",{class:!0,style:!0}),T(t).forEach(g),l.forEach(g),this.h()},h(){b(t,"class","icon svelte-fsrv9v"),X(t,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),X(t,"mask","url("+n[1]+") no-repeat center / contain"),b(e,"class","svelte-fsrv9v")},m(i,l){B(i,e,l),E(e,t),s||(a=x(e,"click",ue(function(){se(n[0])&&n[0].apply(this,arguments)})),s=!0)},p(i,[l]){n=i,l&2&&X(t,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),l&2&&X(t,"mask","url("+n[1]+") no-repeat center / contain")},i:j,o:j,d(i){i&&g(e),s=!1,a()}}}function ke(n,e,t){let{onClick:s=()=>{}}=e,{url:a=""}=e;return n.$$set=i=>{"onClick"in i&&t(0,s=i.onClick),"url"in i&&t(1,a=i.url)},[s,a]}class re extends H{constructor(e){super(),G(this,e,ke,pe,F,{onClick:0,url:1})}}function we(n){let e,t,s,a,i,l,m,_,f;return l=new re({props:{url:oe+"/images/svg/cancel.svg",onClick:n[2]}}),{c(){e=I("div"),t=I("button"),s=I("input"),a=W(),i=I("div"),O(l.$$.fragment),this.h()},l(r){e=C(r,"DIV",{class:!0});var c=T(e);t=C(c,"BUTTON",{class:!0});var v=T(t);s=C(v,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),a=U(v),i=C(v,"DIV",{class:!0});var h=T(i);N(l.$$.fragment,h),h.forEach(g),v.forEach(g),c.forEach(g),this.h()},h(){b(s,"autocorrect","off"),b(s,"autocomplete","off"),b(s,"spellcheck","false"),b(s,"type","text"),b(s,"class","svelte-i6zefg"),b(i,"class","close-button svelte-i6zefg"),b(t,"class","tab svelte-i6zefg"),J(t,"active",n[1]),b(e,"class","container svelte-i6zefg")},m(r,c){B(r,e,c),E(e,t),E(t,s),n[5](s),K(s,n[0]),E(t,a),E(t,i),P(l,i,null),m=!0,_||(f=[x(s,"input",n[6]),x(t,"dblclick",fe(n[7])),x(t,"click",function(){se(n[3])&&n[3].apply(this,arguments)})],_=!0)},p(r,[c]){n=r,c&1&&s.value!==n[0]&&K(s,n[0]);const v={};c&4&&(v.onClick=n[2]),l.$set(v),(!m||c&2)&&J(t,"active",n[1])},i(r){m||($(l.$$.fragment,r),m=!0)},o(r){M(l.$$.fragment,r),m=!1},d(r){r&&g(e),n[5](null),R(l),_=!1,ne(f)}}}function Ie(n,e,t){let{title:s=""}=e,{active:a=!1}=e,{onClose:i=()=>{}}=e,{onClick:l=()=>{}}=e,m;function _(c){z[c?"unshift":"push"](()=>{m=c,t(4,m)})}function f(){s=this.value,t(0,s)}const r=()=>m.select();return n.$$set=c=>{"title"in c&&t(0,s=c.title),"active"in c&&t(1,a=c.active),"onClose"in c&&t(2,i=c.onClose),"onClick"in c&&t(3,l=c.onClick)},[s,a,i,l,m,_,f,r]}class Ce extends H{constructor(e){super(),G(this,e,Ie,we,F,{title:0,active:1,onClose:2,onClick:3})}}const q=_e({tabs:[],activeIndex:0}),Q={newTab:({title:n="Untitled",text:e=""}={})=>{q.update(t=>(t.tabs.push({title:n,text:e}),t.activeIndex=t.tabs.length-1,t))},removeTab:n=>{q.update(e=>(e.tabs.splice(n,1),e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1),e))},setActiveIndex:n=>{q.update(e=>(e.activeIndex=n<0||n>=e.tabs.length?0:n,e))}};function Ee(n){return n*n}function Te(n){return-n*(n-2)}function ee(n,e,t){const s=n.slice();return s[15]=e[t],s[16]=e,s[17]=t,s}function te(n,e){let t,s,a,i,l,m,_;function f(){return e[8](e[17])}function r(){return e[9](e[17])}function c(h){e[10](h,e[17])}let v={active:e[3].activeIndex==e[17],onClose:f,onClick:r};return e[3].tabs[e[17]].title!==void 0&&(v.title=e[3].tabs[e[17]].title),s=new Ce({props:v}),z.push(()=>le(s,"title",c)),{key:n,first:null,c(){t=I("div"),O(s.$$.fragment),i=W(),this.h()},l(h){t=C(h,"DIV",{class:!0});var o=T(t);N(s.$$.fragment,o),i=U(o),o.forEach(g),this.h()},h(){b(t,"class","tab-container svelte-1x40tdd"),J(t,"lockMaxWidth",e[2]>0),this.first=t},m(h,o){B(h,t,o),P(s,t,null),E(t,i),_=!0},p(h,o){e=h;const u={};o&8&&(u.active=e[3].activeIndex==e[17]),o&8&&(u.onClose=f),o&8&&(u.onClick=r),!a&&o&8&&(a=!0,u.title=e[3].tabs[e[17]].title,ae(()=>a=!1)),s.$set(u),(!_||o&4)&&J(t,"lockMaxWidth",e[2]>0)},i(h){_||($(s.$$.fragment,h),h&&ce(()=>{_&&(m&&m.end(1),l=ve(t,e[4],{}),l.start())}),_=!0)},o(h){M(s.$$.fragment,h),l&&l.invalidate(),h&&(m=me(t,e[5],{})),_=!1},d(h){h&&g(t),R(s),h&&m&&m.end()}}}function ye(n){let e,t,s,a=[],i=new Map,l,m,_,f,r,c,v=Z(n[3].tabs);const h=o=>o[15];for(let o=0;o<v.length;o+=1){let u=ee(n,v,o),p=h(u);i.set(p,a[o]=te(p,u))}return _=new re({props:{url:oe+"/images/svg/plus.svg",onClick:Q.newTab}}),{c(){e=I("div"),t=I("div"),s=I("div");for(let o=0;o<a.length;o+=1)a[o].c();l=W(),m=I("div"),O(_.$$.fragment),f=W(),r=I("div"),this.h()},l(o){e=C(o,"DIV",{});var u=T(e);t=C(u,"DIV",{class:!0});var p=T(t);s=C(p,"DIV",{class:!0});var S=T(s);for(let w=0;w<a.length;w+=1)a[w].l(S);S.forEach(g),l=U(p),m=C(p,"DIV",{class:!0});var d=T(m);N(_.$$.fragment,d),d.forEach(g),p.forEach(g),f=U(u),r=C(u,"DIV",{class:!0}),T(r).forEach(g),u.forEach(g),this.h()},h(){b(s,"class","tabs svelte-1x40tdd"),b(m,"class","buttons svelte-1x40tdd"),b(t,"class","toolbar svelte-1x40tdd"),b(r,"class","separator svelte-1x40tdd")},m(o,u){B(o,e,u),E(e,t),E(t,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);n[11](s),E(t,l),E(t,m),P(_,m,null),n[12](t),E(e,f),E(e,r),c=!0},p(o,[u]){u&204&&(v=Z(o[3].tabs),de(),a=ge(a,u,h,1,o,v,i,s,be,te,null,ee),he())},i(o){if(!c){for(let u=0;u<v.length;u+=1)$(a[u]);$(_.$$.fragment,o),c=!0}},o(o){for(let u=0;u<a.length;u+=1)M(a[u]);M(_.$$.fragment,o),c=!1},d(o){o&&g(e);for(let u=0;u<a.length;u+=1)a[u].d();n[11](null),R(_),n[12](null)}}}function De(n,e,t){let s;ie(n,q,d=>t(3,s=d));function a(d){let w=d.getBoundingClientRect();return{duration:120,easing:Te,css:y=>`max-width: ${w.width*y}px;`}}function i(d){var y;let w=d.getBoundingClientRect();return(y=d.querySelector(".tab"))==null||y.classList.remove("active"),{duration:80,easing:Ee,css:A=>`max-width: ${w.width*A}px;`}}function l(d){Q.setActiveIndex(d)}const _=((d,w=300)=>{let y;return(...A)=>{clearTimeout(y),y=setTimeout(()=>{d.apply(this,A)},w)}})(()=>{t(2,v=0)},1e3);function f(d){s.tabs.length!=1&&(d<s.tabs.length-1&&(t(2,v=c.children[0].clientWidth),c.style.setProperty("--lock-width",`${v}px`),_()),Q.removeTab(d))}let r,c,v=0;const h=d=>f(d),o=d=>l(d);function u(d,w){n.$$.not_equal(s.tabs[w].title,d)&&(s.tabs[w].title=d,q.set(s))}function p(d){z[d?"unshift":"push"](()=>{c=d,t(1,c)})}function S(d){z[d?"unshift":"push"](()=>{r=d,t(0,r)})}return[r,c,v,s,a,i,l,f,h,o,u,p,S]}class Ve extends H{constructor(e){super(),G(this,e,De,ye,F,{})}}function Se(n){let e,t,s,a;return{c(){e=I("div"),t=I("textarea"),this.h()},l(i){e=C(i,"DIV",{id:!0,class:!0});var l=T(e);t=C(l,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),T(t).forEach(g),l.forEach(g),this.h()},h(){b(t,"spellcheck","false"),b(t,"name","editor"),b(t,"id","text"),b(t,"class","svelte-7cpmmf"),b(e,"id","editor"),b(e,"class","svelte-7cpmmf")},m(i,l){B(i,e,l),E(e,t),K(t,n[0]),s||(a=x(t,"input",n[1]),s=!0)},p(i,[l]){l&1&&K(t,i[0])},i:j,o:j,d(i){i&&g(e),s=!1,a()}}}function qe(n,e,t){let{text:s}=e;function a(){s=this.value,t(0,s)}return n.$$set=i=>{"text"in i&&t(0,s=i.text)},[s,a]}class Me extends H{constructor(e){super(),G(this,e,qe,Se,F,{text:0})}}function $e(n){let e,t,s,a,i,l;t=new Ve({});function m(f){n[1](f)}let _={};return n[0].tabs[n[0].activeIndex].text!==void 0&&(_.text=n[0].tabs[n[0].activeIndex].text),a=new Me({props:_}),z.push(()=>le(a,"text",m)),{c(){e=I("div"),O(t.$$.fragment),s=W(),O(a.$$.fragment),this.h()},l(f){e=C(f,"DIV",{class:!0});var r=T(e);N(t.$$.fragment,r),s=U(r),N(a.$$.fragment,r),r.forEach(g),this.h()},h(){b(e,"class","container svelte-16qa0xo")},m(f,r){B(f,e,r),P(t,e,null),E(e,s),P(a,e,null),l=!0},p(f,[r]){const c={};!i&&r&1&&(i=!0,c.text=f[0].tabs[f[0].activeIndex].text,ae(()=>i=!1)),a.$set(c)},i(f){l||($(t.$$.fragment,f),$(a.$$.fragment,f),l=!0)},o(f){M(t.$$.fragment,f),M(a.$$.fragment,f),l=!1},d(f){f&&g(e),R(t),R(a)}}}function Ae(n,e,t){let s;ie(n,q,i=>t(0,s=i)),Q.newTab({title:"Hello ðŸ‘‹",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.14"});function a(i){n.$$.not_equal(s.tabs[s.activeIndex].text,i)&&(s.tabs[s.activeIndex].text=i,q.set(s))}return[s,a]}class We extends H{constructor(e){super(),G(this,e,Ae,$e,F,{})}}export{We as component};
