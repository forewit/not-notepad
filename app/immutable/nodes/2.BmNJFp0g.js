import{s as fe,i as ne,n as ae,r as Ee,b as W,c as Ie,o as We,y as Xe,z as ke}from"../chunks/scheduler.DvlNEcs7.js";import{S as de,i as he,e as H,s as q,c as L,a as M,f as U,k as Ce,d as I,l as T,D as S,g as $,h as k,E as le,m as N,F as qe,G as ge,w as ie,x as oe,y as re,u as Ue,q as Ye,n as Q,o as x,z as ue,H as He}from"../chunks/index.DfRyX0YP.js";import{e as ve,u as Fe,o as ze,a as be,b as Z,d as _e}from"../chunks/animate.CkGGxskC.js";import{b as ce,w as Ge}from"../chunks/paths.BCuaEyyX.js";function Je(s){let e,t,n,a,i,o=`<div class="close-icon svelte-ac7wvy" style="-webkit-mask: url(${ce}/images/svg/cancel.svg) no-repeat center / contain; mask: url(${ce}/images/svg/cancel.svg) no-repeat center / contain;"></div>`,m,v;return{c(){e=H("div"),t=H("button"),n=H("input"),a=q(),i=H("button"),i.innerHTML=o,this.h()},l(r){e=L(r,"DIV",{class:!0});var f=M(e);t=L(f,"BUTTON",{class:!0});var d=M(t);n=L(d,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),a=U(d),i=L(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(i)!=="svelte-1m9e2o9"&&(i.innerHTML=o),d.forEach(I),f.forEach(I),this.h()},h(){T(n,"autocorrect","off"),T(n,"autocomplete","off"),T(n,"spellcheck","false"),T(n,"type","text"),T(n,"class","svelte-ac7wvy"),T(i,"class","close-button svelte-ac7wvy"),S(i,"preventHover",s[2]),T(t,"class","tab svelte-ac7wvy"),S(t,"active",s[1]),T(e,"class","container svelte-ac7wvy"),S(e,"preventHover",s[2])},m(r,f){$(r,e,f),k(e,t),k(t,n),s[7](n),le(n,s[0]),k(t,a),k(t,i),m||(v=[N(n,"input",s[8]),N(i,"click",qe(function(){ne(s[3])&&s[3].apply(this,arguments)})),N(t,"dblclick",ge(s[9])),N(t,"click",function(){ne(s[4])&&s[4].apply(this,arguments)}),N(t,"mousedown",ge(function(){ne(s[5])&&s[5].apply(this,arguments)})),N(t,"touchstart",ge(function(){ne(s[5])&&s[5].apply(this,arguments)}))],m=!0)},p(r,[f]){s=r,f&1&&n.value!==s[0]&&le(n,s[0]),f&4&&S(i,"preventHover",s[2]),f&2&&S(t,"active",s[1]),f&4&&S(e,"preventHover",s[2])},i:ae,o:ae,d(r){r&&I(e),s[7](null),m=!1,Ee(v)}}}function Ze(s,e,t){let{title:n=""}=e,{active:a=!1}=e,{preventHover:i=!1}=e,{onClose:o=()=>{}}=e,{onClick:m=()=>{}}=e,{onMousedown:v=g=>{}}=e,r;function f(g){W[g?"unshift":"push"](()=>{r=g,t(6,r)})}function d(){n=this.value,t(0,n)}const u=()=>r.select();return s.$$set=g=>{"title"in g&&t(0,n=g.title),"active"in g&&t(1,a=g.active),"preventHover"in g&&t(2,i=g.preventHover),"onClose"in g&&t(3,o=g.onClose),"onClick"in g&&t(4,m=g.onClick),"onMousedown"in g&&t(5,v=g.onMousedown)},[n,a,i,o,m,v,r,f,d,u]}class Le extends de{constructor(e){super(),he(this,e,Ze,Je,fe,{title:0,active:1,preventHover:2,onClose:3,onClick:4,onMousedown:5})}}let je=0;const O=Ge({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:s=>{const{data:e={id:je++,title:"Untitled",text:""},index:t=-1,callback:n=()=>{}}=s||{};O.update(a=>(a.tabs.some(i=>i.id==e.id)||(t<0?(a.tabs.push(e),a.activeIndex=a.tabs.length-1):(a.tabs.splice(t,0,e),a.activeIndex=t)),a)),n()},removeTab:s=>{O.update(e=>(s<0||s>=e.tabs.length||(e.placeholderIndex==s&&(e.placeholderIndex=-1),e.tabs.splice(s,1),s==e.activeIndex-1?e.activeIndex=Math.max(0,s):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:s=>{O.update(e=>(s<0?e.activeIndex=0:s>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=s,e))},setPlaceholderIndex:s=>{O.update(e=>(e.placeholderIndex=s===void 0||s<0||s>=e.tabs.length?-1:s,e))},moveTab:(s,e,t=()=>{})=>{s!=e&&(O.update(n=>{if(s<0||s>=n.tabs.length||e<0||e>=n.tabs.length)return n;const a=n.tabs[s];return n.tabs.splice(s,1),n.tabs.splice(e,0,a),n.activeIndex==s&&(n.activeIndex=e),n.placeholderIndex==s&&(n.placeholderIndex=e),n}),t())}};function we(s,e,t){const n=s.slice();return n[39]=e[t],n[40]=e,n[41]=t,n}function Te(s,e){let t,n,a,i,o=e[41],m,v,r;function f(){return e[15](e[41])}function d(){return e[16](e[41])}function u(..._){return e[17](e[41],..._)}function g(_){e[18](_,e[41])}let C={active:e[8].activeIndex==e[41],preventHover:e[7],onClose:f,onClick:d,onMousedown:u};e[8].tabs[e[41]].title!==void 0&&(C.title=e[8].tabs[e[41]].title),n=new Le({props:C}),W.push(()=>He(n,"title",g));const D=()=>e[19](t,o),P=()=>e[19](null,o);return{key:s,first:null,c(){t=H("div"),ie(n.$$.fragment),i=q(),this.h()},l(_){t=L(_,"DIV",{class:!0,draggable:!0});var w=M(t);oe(n.$$.fragment,w),i=U(w),w.forEach(I),this.h()},h(){T(t,"class","tab-container svelte-1pbangb"),T(t,"draggable","true"),S(t,"placeholder",e[8].placeholderIndex==e[41]),this.first=t},m(_,w){$(_,t,w),re(n,t,null),k(t,i),D(),m=!0,v||(r=[Xe(e[12].call(null,t)),N(t,"dragstart",e[13])],v=!0)},p(_,w){e=_;const A={};w[0]&256&&(A.active=e[8].activeIndex==e[41]),w[0]&128&&(A.preventHover=e[7]),w[0]&256&&(A.onClose=f),w[0]&256&&(A.onClick=d),w[0]&256&&(A.onMousedown=u),!a&&w[0]&256&&(a=!0,A.title=e[8].tabs[e[41]].title,ke(()=>a=!1)),n.$set(A),o!==e[41]&&(P(),o=e[41],D()),(!m||w[0]&256)&&S(t,"placeholder",e[8].placeholderIndex==e[41])},i(_){m||(Q(n.$$.fragment,_),m=!0)},o(_){x(n.$$.fragment,_),m=!1},d(_){_&&I(t),ue(n),P(),v=!1,Ee(r)}}}function Ke(s){let e,t,n,a=[],i=new Map,o,m,v,r=`<div class="new-tab-icon svelte-1pbangb" style="-webkit-mask: url(${ce}/images/svg/plus.svg) no-repeat center / contain; mask: url(${ce}/images/svg/plus.svg) no-repeat center / contain;"></div>`,f,d,u,g,C,D,P,_,w=ve(s[8].tabs);const A=b=>b[39];for(let b=0;b<w.length;b+=1){let h=we(s,w,b),y=A(h);i.set(y,a[b]=Te(y,h))}return u=new Le({props:{title:s[3].title,active:!s[5],preventHover:!0}}),{c(){e=H("div"),t=H("div"),n=H("div");for(let b=0;b<a.length;b+=1)a[b].c();o=q(),m=H("div"),v=H("button"),v.innerHTML=r,f=q(),d=H("div"),ie(u.$$.fragment),g=q(),C=H("div"),this.h()},l(b){e=L(b,"DIV",{});var h=M(e);t=L(h,"DIV",{class:!0});var y=M(t);n=L(y,"DIV",{class:!0});var Y=M(n);for(let F=0;F<a.length;F+=1)a[F].l(Y);Y.forEach(I),o=U(y),m=L(y,"DIV",{class:!0});var ee=M(m);v=L(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(v)!=="svelte-15g65px"&&(v.innerHTML=r),ee.forEach(I),f=U(y),d=L(y,"DIV",{class:!0});var te=M(d);oe(u.$$.fragment,te),te.forEach(I),y.forEach(I),g=U(h),C=L(h,"DIV",{class:!0}),M(C).forEach(I),h.forEach(I),this.h()},h(){T(n,"class","tabs svelte-1pbangb"),T(v,"class","new-tab-button svelte-1pbangb"),T(m,"class","buttons svelte-1pbangb"),T(d,"class","clone svelte-1pbangb"),S(d,"dragging",s[0]),T(t,"class","toolbar svelte-1pbangb"),T(C,"class","separator svelte-1pbangb")},m(b,h){$(b,e,h),k(e,t),k(t,n);for(let y=0;y<a.length;y+=1)a[y]&&a[y].m(n,null);s[20](n),k(t,o),k(t,m),k(m,v),k(t,f),k(t,d),re(u,d,null),s[21](d),k(e,g),k(e,C),s[22](e),D=!0,P||(_=N(v,"click",s[10]),P=!0)},p(b,h){h[0]&27524&&(w=ve(b[8].tabs),Ue(),a=Fe(a,h,A,1,b,w,i,n,ze,Te,null,we),Ye());const y={};h[0]&8&&(y.title=b[3].title),h[0]&32&&(y.active=!b[5]),u.$set(y),(!D||h[0]&1)&&S(d,"dragging",b[0])},i(b){if(!D){for(let h=0;h<w.length;h+=1)Q(a[h]);Q(u.$$.fragment,b),D=!0}},o(b){for(let h=0;h<a.length;h+=1)x(a[h]);x(u.$$.fragment,b),D=!1},d(b){b&&I(e);for(let h=0;h<a.length;h+=1)a[h].d();s[20](null),ue(u),s[21](null),s[22](null),P=!1,_()}}}const Qe=12,se=140,j=70,K=200,xe=1600,ye=.3;function $e(s,e,t){let n;Ie(s,O,l=>t(8,n=l));let a,i=[],o=0,m=null,v=-1,r={id:-1,title:"",text:""},f,d,u,g=!1,C=!1,D=0,P=0,_=0,w,A=!1;const b=(l,c=300)=>{let p;return(...E)=>{clearTimeout(p),p=setTimeout(()=>{l.apply(this,E)},c)}};function h(l){B.setActiveIndex(l),a.children[l].scrollIntoView({behavior:"smooth"})}function y(){B.newTab()}const Y=l=>{if(!i[l]){console.warn("Cannot close tab!");return}o=i[l].getBoundingClientRect().width,l<n.tabs.length-1&&(a.style.setProperty("--tab-max-width",`${o}px`),ee()),l==n.tabs.length-1?B.setActiveIndex(l-1):l==n.activeIndex&&B.setActiveIndex(l+1),be({duration:K,easing:Z,onStep:(c,p)=>{l==0?t(1,a.style.gridTemplateColumns=`minmax(${p*j}px, ${p*o}px)`,a):t(1,a.style.gridTemplateColumns=`repeat(${l}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*j}px, ${p*o}px)`,a)},onEnd:()=>{t(1,a.style.gridTemplateColumns="",a),B.removeTab(l)}})},ee=b(()=>{a&&(a.style.setProperty("--tab-max-width",`${se}px`),be({duration:K,easing:Z,onStep:(l,c)=>{a.style.setProperty("--tab-max-width",`${o+l*(se-o)}px`)},onEnd:()=>{a.style.setProperty("--tab-max-width",`${se}px`)}}))},xe);function te(l){if(!a)return;const c=l.getBoundingClientRect().width;be({duration:K,easing:Z,onStep:(p,E)=>{n.tabs.length==1?t(1,a.style.gridTemplateColumns=`minmax(${p*j}px, ${p*c}px)`,a):t(1,a.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*j}px, ${p*c}px)`,a),t(1,a.scrollLeft=a.scrollWidth,a)},onEnd:()=>{t(1,a.style.gridTemplateColumns="",a)}})}const F=(l,c)=>{const p=i[0].getBoundingClientRect().width;B.moveTab(l,c,()=>{if(l>c)for(let E=c;E<l;E++)_e(i[E],{duration:K,easing:Z,css:(G,R)=>`transform: translateX(-${R*p}px);`});if(l<c)for(let E=c;E>l;E--)_e(i[E],{duration:K,easing:Z,css:(G,R)=>`transform: translateX(${R*p}px);`})})};function Ae(l){!l.target||!l.dataTransfer||(l.dataTransfer.setData("text/plain",JSON.stringify(r)),l.dataTransfer.setDragImage(new Image,0,0))}function De(l,c){if(l==0&&c==0){t(4,u.style.left="-1000px",u),t(4,u.style.top="-1000px",u);return}let p=w.getBoundingClientRect();if(l<p.left||l>p.right||c<p.top||c>p.bottom){C||(_=0),t(4,u.style.left=`${l+D}px`,u),t(4,u.style.top=`${c+P}px`,u),t(5,C=!0);return}C&&t(5,C=!1),t(4,u.style.left=`${l+D}px`,u),t(4,u.style.top=`${d.top}px`,u);const E=-a.scrollLeft,G=i[0].getBoundingClientRect().width;let R=-1;if(l>E+n.tabs.length*G)R=n.tabs.length-1;else for(let J=0;J<n.tabs.length;J++)if(l>E+J*G&&l<E+(J+1)*G){R=J;break}l<20?(_=-ye,requestAnimationFrame(pe)):l>a.clientWidth-10?(_=ye,requestAnimationFrame(pe)):_=0,!(R==-1||R==n.placeholderIndex)&&F(n.placeholderIndex,R)}let z=0;function pe(l){if(!g||_==0){z=0;return}z==0&&(z=l);const c=l-z;z=l,a.scrollBy({left:_*c}),requestAnimationFrame(pe)}function me(l,c){if(!l.target)return;let p,E;l instanceof TouchEvent?(p=l.touches[0].clientX,E=l.touches[0].clientY):(p=l.clientX,E=l.clientY),window.addEventListener("touchmove",X),window.addEventListener("touchend",V),window.addEventListener("mousemove",X),window.addEventListener("mouseup",V),window.addEventListener("drag",X),window.addEventListener("dragend",V),window.addEventListener("blur",V),B.setActiveIndex(c),f=l.target,d=f.getBoundingClientRect(),m=[p,E],D=d.left-p,P=d.top-E,t(4,u.style.width=`${d.width}px`,u),t(4,u.style.left=`${d.left}px`,u),t(4,u.style.top=`${d.top}px`,u),t(3,r={...n.tabs[c]}),v=c}function X(l){let c,p;if(l instanceof TouchEvent?(c=l.touches[0].clientX,p=l.touches[0].clientY):(c=l.clientX,p=l.clientY),g){De(c,p);return}m===null||Math.hypot(m[0]-c,m[1]-p)<Qe||(t(0,g=!0),B.setPlaceholderIndex(v),B.setActiveIndex(v))}function V(){window.removeEventListener("touchmove",X),window.removeEventListener("touchend",V),window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",V),window.removeEventListener("drag",X),window.removeEventListener("dragend",V),window.removeEventListener("blur",V),m=null,t(5,C=!1),v=-1,D=0,B.setPlaceholderIndex(),t(0,g=!1)}We(()=>{a.style.setProperty("--tab-max-width",`${se}px`),a.style.setProperty("--tab-min-width",`${j}px`)});const Me=l=>Y(l),Be=l=>h(l),Se=(l,c)=>me(c,l);function Pe(l,c){s.$$.not_equal(n.tabs[c].title,l)&&(n.tabs[c].title=l,O.set(n))}function Re(l,c){W[l?"unshift":"push"](()=>{i[c]=l,t(2,i)})}function Ne(l){W[l?"unshift":"push"](()=>{a=l,t(1,a)})}function Ve(l){W[l?"unshift":"push"](()=>{u=l,t(4,u)})}function Oe(l){W[l?"unshift":"push"](()=>{w=l,t(6,w)})}return s.$$.update=()=>{s.$$.dirty[0]&1&&(g?t(7,A=!0):setTimeout(()=>t(7,A=!1),20))},[g,a,i,r,u,C,w,A,n,h,y,Y,te,Ae,me,Me,Be,Se,Pe,Re,Ne,Ve,Oe]}class et extends de{constructor(e){super(),he(this,e,$e,Ke,fe,{},null,[-1,-1])}}function tt(s){let e,t,n,a;return{c(){e=H("div"),t=H("textarea"),this.h()},l(i){e=L(i,"DIV",{id:!0,class:!0});var o=M(e);t=L(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),M(t).forEach(I),o.forEach(I),this.h()},h(){T(t,"spellcheck","false"),T(t,"name","editor"),T(t,"id","text"),T(t,"class","svelte-7cpmmf"),T(e,"id","editor"),T(e,"class","svelte-7cpmmf")},m(i,o){$(i,e,o),k(e,t),le(t,s[0]),n||(a=N(t,"input",s[1]),n=!0)},p(i,[o]){o&1&&le(t,i[0])},i:ae,o:ae,d(i){i&&I(e),n=!1,a()}}}function nt(s,e,t){let{text:n}=e;function a(){n=this.value,t(0,n)}return s.$$set=i=>{"text"in i&&t(0,n=i.text)},[n,a]}class st extends de{constructor(e){super(),he(this,e,nt,tt,fe,{text:0})}}function at(s){let e,t,n,a,i,o;t=new et({});function m(r){s[2](r)}let v={};return s[0].text!==void 0&&(v.text=s[0].text),a=new st({props:v}),W.push(()=>He(a,"text",m)),{c(){e=H("div"),ie(t.$$.fragment),n=q(),ie(a.$$.fragment),this.h()},l(r){e=L(r,"DIV",{class:!0});var f=M(e);oe(t.$$.fragment,f),n=U(f),oe(a.$$.fragment,f),f.forEach(I),this.h()},h(){T(e,"class","container svelte-16qa0xo")},m(r,f){$(r,e,f),re(t,e,null),k(e,n),re(a,e,null),o=!0},p(r,[f]){const d={};!i&&f&1&&(i=!0,d.text=r[0].text,ke(()=>i=!1)),a.$set(d)},i(r){o||(Q(t.$$.fragment,r),Q(a.$$.fragment,r),o=!0)},o(r){x(t.$$.fragment,r),x(a.$$.fragment,r),o=!1},d(r){r&&I(e),ue(t),ue(a)}}}function lt(s,e,t){let n,a;Ie(s,O,o=>t(1,a=o)),B.newTab({data:{id:-1,title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.19"}});function i(o){s.$$.not_equal(n.text,o)&&(n.text=o,t(0,n),t(1,a))}return s.$$.update=()=>{s.$$.dirty&2&&t(0,n=a.tabs.length>0?a.tabs[a.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,a,i]}class ct extends de{constructor(e){super(),he(this,e,lt,at,fe,{})}}export{ct as component};
