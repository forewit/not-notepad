import{r as ne,s as F,n as j,i as se,b as Q,c as ie,y as ue,z as ae,f as fe}from"../chunks/scheduler.BnvVezB3.js";import{l as B,n as M,S as H,i as G,e as I,c as C,a as E,d as p,o as _,p as X,g as A,h as y,z,A as de,s as O,u as N,f as U,v as x,B as J,C as K,w as P,D as le,x as R,q as he,m as ve,E as oe,F as me,G as be}from"../chunks/index.C9jaQkoo.js";import{b as ce,w as _e}from"../chunks/paths.ChfXdt_F.js";function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function pe(n,e){B(n,1,1,()=>{e.delete(n.key)})}function ge(n,e,t,s,i,a,l,h,m,d,u,o){let v=n.length,w=a.length,g=v;const b={};for(;g--;)b[n[g].key]=g;const c=[],f=new Map,r=new Map,T=[];for(g=w;g--;){const k=o(i,a,g),$=t(k);let S=l.get($);S?T.push(()=>S.p(k,e)):(S=d($,k),S.c()),f.set($,c[g]=S),$ in b&&r.set($,Math.abs(g-b[$]))}const D=new Set,V=new Set;function Y(k){M(k,1),k.m(h,u),l.set(k.key,k),u=k.first,w--}for(;v&&w;){const k=c[w-1],$=n[v-1],S=k.key,L=$.key;k===$?(u=k.first,v--,w--):f.has(L)?!l.has(S)||D.has(S)?Y(k):V.has(L)?v--:r.get(S)>r.get(L)?(V.add(S),Y(k)):(D.add(L),v--):(m($,l),v--)}for(;v--;){const k=n[v];f.has(k.key)||m(k,l)}for(;w;)Y(c[w-1]);return ne(T),c}function ke(n){let e,t,s,i;return{c(){e=I("button"),t=I("div"),this.h()},l(a){e=C(a,"BUTTON",{class:!0});var l=E(e);t=C(l,"DIV",{class:!0,style:!0}),E(t).forEach(p),l.forEach(p),this.h()},h(){_(t,"class","icon svelte-fsrv9v"),X(t,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),X(t,"mask","url("+n[1]+") no-repeat center / contain"),_(e,"class","svelte-fsrv9v")},m(a,l){A(a,e,l),y(e,t),s||(i=z(e,"click",de(function(){se(n[0])&&n[0].apply(this,arguments)})),s=!0)},p(a,[l]){n=a,l&2&&X(t,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),l&2&&X(t,"mask","url("+n[1]+") no-repeat center / contain")},i:j,o:j,d(a){a&&p(e),s=!1,i()}}}function we(n,e,t){let{onClick:s=()=>{}}=e,{url:i=""}=e;return n.$$set=a=>{"onClick"in a&&t(0,s=a.onClick),"url"in a&&t(1,i=a.url)},[s,i]}class re extends H{constructor(e){super(),G(this,e,we,ke,F,{onClick:0,url:1})}}function Ie(n){let e,t,s,i,a,l,h,m,d;return l=new re({props:{url:ce+"/images/svg/cancel.svg",onClick:n[2]}}),{c(){e=I("div"),t=I("button"),s=I("input"),i=O(),a=I("div"),N(l.$$.fragment),this.h()},l(u){e=C(u,"DIV",{class:!0});var o=E(e);t=C(o,"BUTTON",{class:!0});var v=E(t);s=C(v,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),i=U(v),a=C(v,"DIV",{class:!0});var w=E(a);x(l.$$.fragment,w),w.forEach(p),v.forEach(p),o.forEach(p),this.h()},h(){_(s,"autocorrect","off"),_(s,"autocomplete","off"),_(s,"spellcheck","false"),_(s,"type","text"),_(s,"class","svelte-i6zefg"),_(a,"class","close-button svelte-i6zefg"),_(t,"class","tab svelte-i6zefg"),J(t,"active",n[1]),_(e,"class","container svelte-i6zefg")},m(u,o){A(u,e,o),y(e,t),y(t,s),n[5](s),K(s,n[0]),y(t,i),y(t,a),P(l,a,null),h=!0,m||(d=[z(s,"input",n[6]),z(t,"dblclick",le(n[7])),z(t,"click",function(){se(n[3])&&n[3].apply(this,arguments)})],m=!0)},p(u,[o]){n=u,o&1&&s.value!==n[0]&&K(s,n[0]);const v={};o&4&&(v.onClick=n[2]),l.$set(v),(!h||o&2)&&J(t,"active",n[1])},i(u){h||(M(l.$$.fragment,u),h=!0)},o(u){B(l.$$.fragment,u),h=!1},d(u){u&&p(e),n[5](null),R(l),m=!1,ne(d)}}}function Ce(n,e,t){let{title:s=""}=e,{active:i=!1}=e,{onClose:a=()=>{}}=e,{onClick:l=()=>{}}=e,h;function m(o){Q[o?"unshift":"push"](()=>{h=o,t(4,h)})}function d(){s=this.value,t(0,s)}const u=()=>h.select();return n.$$set=o=>{"title"in o&&t(0,s=o.title),"active"in o&&t(1,i=o.active),"onClose"in o&&t(2,a=o.onClose),"onClick"in o&&t(3,l=o.onClick)},[s,i,a,l,h,m,d,u]}class Te extends H{constructor(e){super(),G(this,e,Ce,Ie,F,{title:0,active:1,onClose:2,onClick:3})}}const q=_e({tabs:[],activeIndex:0}),W={newTab:({title:n="Untitled",text:e=""}={})=>{q.update(t=>(t.tabs.push({title:n,text:e}),t.activeIndex=t.tabs.length-1,t))},removeTab:n=>{q.update(e=>(e.tabs.splice(n,1),e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1),e))},setActiveIndex:n=>{q.update(e=>(e.activeIndex=n<0||n>=e.tabs.length?0:n,e))},swapTabs:(n,e,t)=>{q.update(s=>{const i=s.tabs[n];return s.tabs[n]=s.tabs[e],s.tabs[e]=i,s.activeIndex==n?s.activeIndex=e:s.activeIndex==e&&(s.activeIndex=n),s}),t&&t()}};function ye(n){return n*n}function Ee(n){return-n*(n-2)}function ee(n,e,t){const s=n.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function te(n,e){let t,s,i,a,l,h,m,d,u;function o(){return e[9](e[18])}function v(){return e[10](e[18])}function w(b){e[11](b,e[18])}let g={active:e[2].activeIndex==e[18],onClose:o,onClick:v};return e[2].tabs[e[18]].title!==void 0&&(g.title=e[2].tabs[e[18]].title),s=new Te({props:g}),Q.push(()=>oe(s,"title",w)),{key:n,first:null,c(){t=I("div"),N(s.$$.fragment),a=O(),this.h()},l(b){t=C(b,"DIV",{class:!0});var c=E(t);x(s.$$.fragment,c),a=U(c),c.forEach(p),this.h()},h(){_(t,"class","tab-container svelte-1x40tdd"),J(t,"lockMaxWidth",e[1]>0),this.first=t},m(b,c){A(b,t,c),P(s,t,null),y(t,a),m=!0,d||(u=ue(Ve.call(null,t)),d=!0)},p(b,c){e=b;const f={};c&4&&(f.active=e[2].activeIndex==e[18]),c&4&&(f.onClose=o),c&4&&(f.onClick=v),!i&&c&4&&(i=!0,f.title=e[2].tabs[e[18]].title,ae(()=>i=!1)),s.$set(f),(!m||c&2)&&J(t,"lockMaxWidth",e[1]>0)},i(b){m||(M(s.$$.fragment,b),b&&fe(()=>{m&&(h&&h.end(1),l=me(t,e[3],{}),l.start())}),m=!0)},o(b){B(s.$$.fragment,b),l&&l.invalidate(),b&&(h=be(t,e[4],{})),m=!1},d(b){b&&p(t),R(s),b&&h&&h.end(),d=!1,u()}}}function De(n){let e,t,s,i=[],a=new Map,l,h,m,d,u,o,v,w,g=Z(n[2].tabs);const b=c=>c[16];for(let c=0;c<g.length;c+=1){let f=ee(n,g,c),r=b(f);a.set(r,i[c]=te(r,f))}return m=new re({props:{url:ce+"/images/svg/plus.svg",onClick:n[6]}}),{c(){e=I("div"),t=I("div"),s=I("div");for(let c=0;c<i.length;c+=1)i[c].c();l=O(),h=I("div"),N(m.$$.fragment),d=O(),u=I("div"),this.h()},l(c){e=C(c,"DIV",{});var f=E(e);t=C(f,"DIV",{class:!0});var r=E(t);s=C(r,"DIV",{class:!0});var T=E(s);for(let V=0;V<i.length;V+=1)i[V].l(T);T.forEach(p),l=U(r),h=C(r,"DIV",{class:!0});var D=E(h);x(m.$$.fragment,D),D.forEach(p),r.forEach(p),d=U(f),u=C(f,"DIV",{class:!0}),E(u).forEach(p),f.forEach(p),this.h()},h(){_(s,"class","tabs svelte-1x40tdd"),_(h,"class","buttons svelte-1x40tdd"),_(t,"class","toolbar svelte-1x40tdd"),_(u,"class","separator svelte-1x40tdd")},m(c,f){A(c,e,f),y(e,t),y(t,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,null);n[12](s),y(t,l),y(t,h),P(m,h,null),y(e,d),y(e,u),o=!0,v||(w=z(t,"click",le(n[8])),v=!0)},p(c,[f]){f&166&&(g=Z(c[2].tabs),he(),i=ge(i,f,b,1,c,g,a,s,pe,te,null,ee),ve())},i(c){if(!o){for(let f=0;f<g.length;f+=1)M(i[f]);M(m.$$.fragment,c),o=!0}},o(c){for(let f=0;f<i.length;f+=1)B(i[f]);B(m.$$.fragment,c),o=!1},d(c){c&&p(e);for(let f=0;f<i.length;f+=1)i[f].d();n[12](null),R(m),v=!1,w()}}}function Ve(n){return{destroy(){}}}function $e(n,e,t){let s;ie(n,q,r=>t(2,s=r));function i(r){let T=r.getBoundingClientRect();return{duration:120,easing:Ee,css:D=>`max-width: ${T.width*D}px;`}}function a(r){var D;let T=r.getBoundingClientRect();return(D=r.querySelector(".tab"))==null||D.classList.remove("active"),{duration:80,easing:ye,css:V=>`max-width: ${T.width*V}px;`}}function l(r){W.setActiveIndex(r),o.children[r].scrollIntoView({behavior:"smooth"})}function h(){W.newTab(),setTimeout(()=>{o.scrollBy({left:o.scrollWidth,behavior:"smooth"})})}const d=((r,T=300)=>{let D;return(...V)=>{clearTimeout(D),D=setTimeout(()=>{r.apply(this,V)},T)}})(()=>{t(1,v=0)},1e3);function u(r){s.tabs.length!=1&&(r<s.tabs.length-1&&(t(1,v=o.children[0].clientWidth),o.style.setProperty("--lock-width",`${v}px`),d()),W.removeTab(r))}let o,v=0;function w(){W.swapTabs(0,1,()=>{console.log("swapped")})}const g=r=>u(r),b=r=>l(r);function c(r,T){n.$$.not_equal(s.tabs[T].title,r)&&(s.tabs[T].title=r,q.set(s))}function f(r){Q[r?"unshift":"push"](()=>{o=r,t(0,o)})}return[o,v,s,i,a,l,h,u,w,g,b,c,f]}class Se extends H{constructor(e){super(),G(this,e,$e,De,F,{})}}function qe(n){let e,t,s,i;return{c(){e=I("div"),t=I("textarea"),this.h()},l(a){e=C(a,"DIV",{id:!0,class:!0});var l=E(e);t=C(l,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),E(t).forEach(p),l.forEach(p),this.h()},h(){_(t,"spellcheck","false"),_(t,"name","editor"),_(t,"id","text"),_(t,"class","svelte-7cpmmf"),_(e,"id","editor"),_(e,"class","svelte-7cpmmf")},m(a,l){A(a,e,l),y(e,t),K(t,n[0]),s||(i=z(t,"input",n[1]),s=!0)},p(a,[l]){l&1&&K(t,a[0])},i:j,o:j,d(a){a&&p(e),s=!1,i()}}}function Be(n,e,t){let{text:s}=e;function i(){s=this.value,t(0,s)}return n.$$set=a=>{"text"in a&&t(0,s=a.text)},[s,i]}class Me extends H{constructor(e){super(),G(this,e,Be,qe,F,{text:0})}}function ze(n){let e,t,s,i,a,l;t=new Se({});function h(d){n[1](d)}let m={};return n[0].tabs[n[0].activeIndex].text!==void 0&&(m.text=n[0].tabs[n[0].activeIndex].text),i=new Me({props:m}),Q.push(()=>oe(i,"text",h)),{c(){e=I("div"),N(t.$$.fragment),s=O(),N(i.$$.fragment),this.h()},l(d){e=C(d,"DIV",{class:!0});var u=E(e);x(t.$$.fragment,u),s=U(u),x(i.$$.fragment,u),u.forEach(p),this.h()},h(){_(e,"class","container svelte-16qa0xo")},m(d,u){A(d,e,u),P(t,e,null),y(e,s),P(i,e,null),l=!0},p(d,[u]){const o={};!a&&u&1&&(a=!0,o.text=d[0].tabs[d[0].activeIndex].text,ae(()=>a=!1)),i.$set(o)},i(d){l||(M(t.$$.fragment,d),M(i.$$.fragment,d),l=!0)},o(d){B(t.$$.fragment,d),B(i.$$.fragment,d),l=!1},d(d){d&&p(e),R(t),R(i)}}}function Ae(n,e,t){let s;ie(n,q,a=>t(0,s=a)),W.newTab({title:"Hello ðŸ‘‹",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.14"});function i(a){n.$$.not_equal(s.tabs[s.activeIndex].text,a)&&(s.tabs[s.activeIndex].text=a,q.set(s))}return[s,i]}class Ue extends H{constructor(e){super(),G(this,e,Ae,ze,F,{})}}export{Ue as component};
