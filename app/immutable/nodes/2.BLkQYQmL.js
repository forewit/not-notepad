import{s as he,n as oe,r as Xe,j as ne,y as Ye,b as N,c as Le,o as He,a as Fe,z as Ae,l as je}from"../chunks/scheduler.DVqiRabw.js";import{S as pe,i as ge,e as L,s as W,c as H,a as P,f as U,k as Pe,d as E,l as _,C as O,g as X,h as C,D as _e,m as S,E as we,F as ze,G as se,x as ie,y as re,z as ue,v as Ge,r as Je,p as Q,o as x,A as fe,H as Me,u as le,n as Ke,t as Ze,b as Qe,j as xe}from"../chunks/index.CFDFe1_f.js";import{e as ce,u as $e,o as et,a as me,c as J,b as ke}from"../chunks/animate.BOGdB0XF.js";import{b as de,w as tt}from"../chunks/paths.BPviNQdh.js";function nt(l){let e,t,n,s,i,a=`<span class="close-icon svelte-1fkoqn4" style="-webkit-mask: url(${de}/images/svg/cancel.svg) no-repeat center / contain; mask: url(${de}/images/svg/cancel.svg) no-repeat center / contain;"></span>`,u,d;return{c(){e=L("div"),t=L("div"),n=L("input"),s=W(),i=L("button"),i.innerHTML=a,this.h()},l(r){e=H(r,"DIV",{class:!0});var f=P(e);t=H(f,"DIV",{role:!0,tabindex:!0,class:!0,draggable:!0});var b=P(t);n=H(b,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),s=U(b),i=H(b,"BUTTON",{class:!0,draggable:!0,"data-svelte-h":!0}),Pe(i)!=="svelte-97uq8h"&&(i.innerHTML=a),b.forEach(E),f.forEach(E),this.h()},h(){_(n,"autocorrect","off"),_(n,"autocomplete","off"),_(n,"spellcheck","false"),_(n,"type","text"),_(n,"class","svelte-1fkoqn4"),_(i,"class","close-button svelte-1fkoqn4"),_(i,"draggable","true"),_(t,"role","button"),_(t,"tabindex","0"),_(t,"class","tab svelte-1fkoqn4"),_(t,"draggable","true"),O(t,"active",l[1]),_(e,"class","container svelte-1fkoqn4"),O(e,"preventHover",l[2])},m(r,f){X(r,e,f),C(e,t),C(t,n),l[8](n),_e(n,l[0]),C(t,s),C(t,i),u||(d=[S(n,"input",l[9]),S(i,"click",we(function(){ne(l[3])&&l[3].apply(this,arguments)})),S(i,"dragstart",we(ze(l[7]))),S(t,"dblclick",se(l[10])),S(t,"mousedown",se(function(){ne(l[4])&&l[4].apply(this,arguments)})),S(t,"touchstart",se(function(){ne(l[4])&&l[4].apply(this,arguments)})),S(t,"dragstart",se(function(){ne(l[5])&&l[5].apply(this,arguments)}))],u=!0)},p(r,[f]){l=r,f&1&&n.value!==l[0]&&_e(n,l[0]),f&2&&O(t,"active",l[1]),f&4&&O(e,"preventHover",l[2])},i:oe,o:oe,d(r){r&&E(e),l[8](null),u=!1,Xe(d)}}}function st(l,e,t){let{title:n=""}=e,{active:s=!1}=e,{preventHover:i=!1}=e,{onClose:a=()=>{}}=e,{onPointerdown:u=h=>{}}=e,{onDragstart:d=h=>{}}=e,r;function f(h){Ye.call(this,l,h)}function b(h){N[h?"unshift":"push"](()=>{r=h,t(6,r)})}function p(){n=this.value,t(0,n)}const D=()=>r.select();return l.$$set=h=>{"title"in h&&t(0,n=h.title),"active"in h&&t(1,s=h.active),"preventHover"in h&&t(2,i=h.preventHover),"onClose"in h&&t(3,a=h.onClose),"onPointerdown"in h&&t(4,u=h.onPointerdown),"onDragstart"in h&&t(5,d=h.onDragstart)},[n,s,i,a,u,d,r,f,b,p,D]}class Se extends pe{constructor(e){super(),ge(this,e,st,nt,he,{title:0,active:1,preventHover:2,onClose:3,onPointerdown:4,onDragstart:5})}}let lt=0;const V=tt({tabs:[],activeIndex:0,placeholderIndex:-1}),M={newTab:l=>{const{data:e={id:lt++,title:"Untitled",text:""},index:t=-1,callback:n=()=>{}}=l||{};V.update(s=>(s.tabs.some(i=>i.id==e.id)||(t<0?(s.tabs.push(e),s.activeIndex=s.tabs.length-1):(s.tabs.splice(t,0,e),s.activeIndex=t)),s)),n()},removeTab:l=>{V.update(e=>(l<0||l>=e.tabs.length||(e.placeholderIndex==l&&(e.placeholderIndex=-1),e.tabs.splice(l,1),l==e.activeIndex-1?e.activeIndex=Math.max(0,l):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:l=>{V.update(e=>(l<0?e.activeIndex=0:l>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=l,e))},setPlaceholderIndex:l=>{V.update(e=>(e.placeholderIndex=l===void 0||l<0||l>=e.tabs.length?-1:l,e))},moveTab:(l,e,t=()=>{})=>{l!=e&&(V.update(n=>{if(l<0||l>=n.tabs.length||e<0||e>=n.tabs.length)return n;const s=n.tabs[l];return n.tabs.splice(l,1),n.tabs.splice(e,0,s),n.activeIndex==l&&(n.activeIndex=e),n.placeholderIndex==l&&(n.placeholderIndex=e),n}),t())}};function Te(l,e,t){const n=l.slice();return n[38]=e[t],n[39]=e,n[40]=t,n}function ye(l,e){let t,n,s,i,a=e[40],u,d,r;function f(){return e[14](e[40])}function b(...k){return e[15](e[40],...k)}function p(k){e[16](k,e[40])}let D={active:e[8].activeIndex==e[40],preventHover:e[7],onClose:f,onPointerdown:b,onDragstart:e[12]};e[8].tabs[e[40]].title!==void 0&&(D.title=e[8].tabs[e[40]].title),n=new Se({props:D}),N.push(()=>Me(n,"title",p));const h=()=>e[17](t,a),A=()=>e[17](null,a);return{key:l,first:null,c(){t=L("div"),ie(n.$$.fragment),i=W(),this.h()},l(k){t=H(k,"DIV",{class:!0});var c=P(t);re(n.$$.fragment,c),i=U(c),c.forEach(E),this.h()},h(){_(t,"class","tab-container svelte-iyobkf"),O(t,"placeholder",e[8].placeholderIndex==e[40]),this.first=t},m(k,c){X(k,t,c),ue(n,t,null),C(t,i),h(),u=!0,d||(r=Fe(e[11].call(null,t)),d=!0)},p(k,c){e=k;const T={};c[0]&256&&(T.active=e[8].activeIndex==e[40]),c[0]&128&&(T.preventHover=e[7]),c[0]&256&&(T.onClose=f),c[0]&256&&(T.onPointerdown=b),!s&&c[0]&256&&(s=!0,T.title=e[8].tabs[e[40]].title,Ae(()=>s=!1)),n.$set(T),a!==e[40]&&(A(),a=e[40],h()),(!u||c[0]&256)&&O(t,"placeholder",e[8].placeholderIndex==e[40])},i(k){u||(Q(n.$$.fragment,k),u=!0)},o(k){x(n.$$.fragment,k),u=!1},d(k){k&&E(t),fe(n),A(),d=!1,r()}}}function at(l){let e,t,n,s=[],i=new Map,a,u,d,r=`<div class="new-tab-icon svelte-iyobkf" style="-webkit-mask: url(${de}/images/svg/plus.svg) no-repeat center / contain; mask: url(${de}/images/svg/plus.svg) no-repeat center / contain;"></div>`,f,b,p,D,h,A,k,c,T=ce(l[8].tabs);const B=w=>w[38];for(let w=0;w<T.length;w+=1){let v=Te(l,T,w),y=B(v);i.set(y,s[w]=ye(y,v))}return p=new Se({props:{title:l[3].title,active:!l[5],preventHover:!0}}),{c(){e=L("div"),t=L("div"),n=L("div");for(let w=0;w<s.length;w+=1)s[w].c();a=W(),u=L("div"),d=L("button"),d.innerHTML=r,f=W(),b=L("div"),ie(p.$$.fragment),D=W(),h=L("div"),this.h()},l(w){e=H(w,"DIV",{});var v=P(e);t=H(v,"DIV",{class:!0});var y=P(t);n=H(y,"DIV",{class:!0});var $=P(n);for(let F=0;F<s.length;F+=1)s[F].l($);$.forEach(E),a=U(y),u=H(y,"DIV",{class:!0});var ee=P(u);d=H(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Pe(d)!=="svelte-15g65px"&&(d.innerHTML=r),ee.forEach(E),f=U(y),b=H(y,"DIV",{class:!0});var te=P(b);re(p.$$.fragment,te),te.forEach(E),y.forEach(E),D=U(v),h=H(v,"DIV",{class:!0}),P(h).forEach(E),v.forEach(E),this.h()},h(){_(n,"class","tabs svelte-iyobkf"),_(d,"class","new-tab-button svelte-iyobkf"),_(u,"class","buttons svelte-iyobkf"),_(b,"class","clone svelte-iyobkf"),O(b,"dragging",l[0]),_(t,"class","toolbar svelte-iyobkf"),_(h,"class","separator svelte-iyobkf")},m(w,v){X(w,e,v),C(e,t),C(t,n);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(n,null);l[18](n),C(t,a),C(t,u),C(u,d),C(t,f),C(t,b),ue(p,b,null),l[19](b),C(e,D),C(e,h),l[20](e),A=!0,k||(c=S(d,"click",l[9]),k=!0)},p(w,v){v[0]&13700&&(T=ce(w[8].tabs),Ge(),s=$e(s,v,B,1,w,T,i,n,et,ye,null,Te),Je());const y={};v[0]&8&&(y.title=w[3].title),v[0]&32&&(y.active=!w[5]),p.$set(y),(!A||v[0]&1)&&O(b,"dragging",w[0])},i(w){if(!A){for(let v=0;v<T.length;v+=1)Q(s[v]);Q(p.$$.fragment,w),A=!0}},o(w){for(let v=0;v<s.length;v+=1)x(s[v]);x(p.$$.fragment,w),A=!1},d(w){w&&E(e);for(let v=0;v<s.length;v+=1)s[v].d();l[18](null),fe(p),l[19](null),l[20](null),k=!1,c()}}}const ot=12,ae=140,K=70,Z=200,it=1600,Ee=.3;function rt(l,e,t){let n;Le(l,V,o=>t(8,n=o));let s,i=[],a=0,u=null,d=-1,r={id:-1,title:"",text:""},f,b,p,D=!1,h=!1,A=0,k=0,c=0,T,B=!1;const w=(o,g=300)=>{let m;return(...I)=>{clearTimeout(m),m=setTimeout(()=>{o.apply(this,I)},g)}};function v(){M.newTab()}const y=o=>{if(!i[o]){console.warn("Cannot close tab!");return}a=i[o].getBoundingClientRect().width,o<n.tabs.length-1&&(s.style.setProperty("--tab-max-width",`${a}px`),$()),o==n.tabs.length-1?M.setActiveIndex(o-1):o==n.activeIndex&&M.setActiveIndex(o+1),me({duration:Z,easing:J,onStep:(g,m)=>{o==0?t(1,s.style.gridTemplateColumns=`minmax(${m*K}px, ${m*a}px)`,s):t(1,s.style.gridTemplateColumns=`repeat(${o}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${m*K}px, ${m*a}px)`,s)},onEnd:()=>{t(1,s.style.gridTemplateColumns="",s),M.removeTab(o)}})},$=w(()=>{s&&(s.style.setProperty("--tab-max-width",`${ae}px`),me({duration:Z,easing:J,onStep:(o,g)=>{s.style.setProperty("--tab-max-width",`${a+o*(ae-a)}px`)},onEnd:()=>{s.style.setProperty("--tab-max-width",`${ae}px`)}}))},it);function ee(o){if(!s)return;const g=o.getBoundingClientRect().width;me({duration:Z,easing:J,onStep:(m,I)=>{n.tabs.length==1?t(1,s.style.gridTemplateColumns=`minmax(${m*K}px, ${m*g}px)`,s):t(1,s.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${m*K}px, ${m*g}px)`,s),t(1,s.scrollLeft=s.scrollWidth,s)},onEnd:()=>{t(1,s.style.gridTemplateColumns="",s)}})}const te=(o,g)=>{const m=i[0].getBoundingClientRect().width;M.moveTab(o,g,()=>{if(o>g)for(let I=g;I<o;I++)ke(i[I],{duration:Z,easing:J,css:(z,R)=>`transform: translateX(-${R*m}px);`});if(o<g)for(let I=g;I>o;I--)ke(i[I],{duration:Z,easing:J,css:(z,R)=>`transform: translateX(${R*m}px);`})})};function F(o){!o.target||!o.dataTransfer||(o.dataTransfer.setData("text/plain",JSON.stringify(r)),o.dataTransfer.setDragImage(new Image,0,0))}function Be(o,g){if(o==0&&g==0){t(4,p.style.left="-1000px",p),t(4,p.style.top="-1000px",p);return}let m=T.getBoundingClientRect();if(o<m.left||o>m.right||g<m.top||g>m.bottom){h||(c=0),t(4,p.style.left=`${o+A}px`,p),t(4,p.style.top=`${g+k}px`,p),t(5,h=!0);return}h&&t(5,h=!1),t(4,p.style.left=`${o+A}px`,p),t(4,p.style.top=`${b.top}px`,p);const I=-s.scrollLeft,z=i[0].getBoundingClientRect().width;let R=-1;if(o>I+n.tabs.length*z)R=n.tabs.length-1;else for(let G=0;G<n.tabs.length;G++)if(o>I+G*z&&o<I+(G+1)*z){R=G;break}o<20?(c=-Ee,requestAnimationFrame(be)):o>s.clientWidth-10?(c=Ee,requestAnimationFrame(be)):c=0,!(R==-1||R==n.placeholderIndex)&&te(n.placeholderIndex,R)}let j=0;function be(o){if(!D||c==0){j=0;return}j==0&&(j=o);const g=o-j;j=o,s.scrollBy({left:c*g}),requestAnimationFrame(be)}function ve(o,g){if(!o.target)return;let m,I;o instanceof TouchEvent?(m=o.touches[0].clientX,I=o.touches[0].clientY,o.preventDefault()):(m=o.clientX,I=o.clientY),window.addEventListener("touchmove",Y,{passive:!1}),window.addEventListener("touchend",q),window.addEventListener("mousemove",Y),window.addEventListener("mouseup",q),window.addEventListener("drag",Y),window.addEventListener("dragend",q),window.addEventListener("blur",q),M.setActiveIndex(g),f=o.target,b=f.getBoundingClientRect(),u=[m,I],A=b.left-m,k=b.top-I,t(4,p.style.width=`${b.width}px`,p),t(4,p.style.left=`${b.left}px`,p),t(4,p.style.top=`${b.top}px`,p),t(3,r={...n.tabs[g]}),d=g}function Y(o){let g,m;if(o instanceof TouchEvent?(g=o.touches[0].clientX,m=o.touches[0].clientY,o.preventDefault()):(g=o.clientX,m=o.clientY),D){Be(g,m);return}u===null||Math.hypot(u[0]-g,u[1]-m)<ot||(t(0,D=!0),M.setPlaceholderIndex(d),M.setActiveIndex(d))}function q(){window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",q),window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",q),window.removeEventListener("drag",Y),window.removeEventListener("dragend",q),window.removeEventListener("blur",q),u=null,t(5,h=!1),d=-1,A=0,k=0,M.setPlaceholderIndex(),t(0,D=!1)}He(()=>{s.style.setProperty("--tab-max-width",`${ae}px`),s.style.setProperty("--tab-min-width",`${K}px`)});const Re=o=>y(o),qe=(o,g)=>ve(g,o);function Ve(o,g){l.$$.not_equal(n.tabs[g].title,o)&&(n.tabs[g].title=o,V.set(n))}function Ne(o,g){N[o?"unshift":"push"](()=>{i[g]=o,t(2,i)})}function Oe(o){N[o?"unshift":"push"](()=>{s=o,t(1,s)})}function We(o){N[o?"unshift":"push"](()=>{p=o,t(4,p)})}function Ue(o){N[o?"unshift":"push"](()=>{T=o,t(6,T)})}return l.$$.update=()=>{l.$$.dirty[0]&1&&(D?t(7,B=!0):setTimeout(()=>t(7,B=!1),20))},[D,s,i,r,p,h,T,B,n,v,y,ee,F,ve,Re,qe,Ve,Ne,Oe,We,Ue]}class ut extends pe{constructor(e){super(),ge(this,e,rt,at,he,{},null,[-1,-1])}}function Ie(l,e,t){const n=l.slice();return n[14]=e[t],n[16]=t,n}function De(l){let e,t=ce(l[3]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ce(Ie(l,t,s));return{c(){e=L("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=H(s,"DIV",{class:!0,style:!0});var i=P(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(E),this.h()},h(){_(e,"class","popup svelte-17cgdkh"),le(e,"top",l[4].top+"px"),le(e,"left",l[4].left+"px")},m(s,i){X(s,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(s,i){if(i&104){t=ce(s[3]);let a;for(a=0;a<t.length;a+=1){const u=Ie(s,t,a);n[a]?n[a].p(u,i):(n[a]=Ce(u),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}i&16&&le(e,"top",s[4].top+"px"),i&16&&le(e,"left",s[4].left+"px")},d(s){s&&E(e),Ke(n,s)}}}function Ce(l){let e,t=l[14]+"",n,s,i,a,u;function d(){return l[9](l[14])}return{c(){e=L("button"),n=Ze(t),s=W(),this.h()},l(r){e=H(r,"BUTTON",{class:!0});var f=P(e);n=Qe(f,t),s=U(f),f.forEach(E),this.h()},h(){_(e,"class",i="popup-item "+(l[16]===l[5]?"selected":"")+" svelte-17cgdkh")},m(r,f){X(r,e,f),C(e,n),C(e,s),a||(u=S(e,"click",d),a=!0)},p(r,f){l=r,f&8&&t!==(t=l[14]+"")&&xe(n,t),f&32&&i!==(i="popup-item "+(l[16]===l[5]?"selected":"")+" svelte-17cgdkh")&&_(e,"class",i)},d(r){r&&E(e),a=!1,u()}}}function ft(l){let e,t,n,s,i,a=l[2]&&De(l);return{c(){e=L("div"),t=L("div"),n=W(),a&&a.c(),this.h()},l(u){e=H(u,"DIV",{class:!0});var d=P(e);t=H(d,"DIV",{class:!0,spellcheck:!0,placeholder:!0,contenteditable:!0,role:!0}),P(t).forEach(E),n=U(d),a&&a.l(d),d.forEach(E),this.h()},h(){_(t,"class","editor svelte-17cgdkh"),_(t,"spellcheck","false"),_(t,"placeholder","Enter text here"),_(t,"contenteditable","true"),_(t,"role","textbox"),l[0]===void 0&&je(()=>l[8].call(t)),_(e,"class","container svelte-17cgdkh")},m(u,d){X(u,e,d),C(e,t),l[7](t),l[0]!==void 0&&(t.innerHTML=l[0]),C(e,n),a&&a.m(e,null),s||(i=S(t,"input",l[8]),s=!0)},p(u,[d]){d&1&&u[0]!==t.innerHTML&&(t.innerHTML=u[0]),u[2]?a?a.p(u,d):(a=De(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:oe,o:oe,d(u){u&&E(e),l[7](null),a&&a.d(),s=!1,i()}}}function ct(l,e,t){let{text:n}=e,s,i=["Transcribe","Import"],a=!1,u=[],d={top:0,left:0},r=0,f;He(()=>{s.addEventListener("keydown",p)});function b(){if(f){const c=window.getSelection();c&&(c.removeAllRanges(),c.addRange(f))}}function p(c){if(c.key==="/"&&!a){t(3,u=i),t(5,r=0),setTimeout(()=>{const T=window.getSelection();if(T&&T.rangeCount>0){f=T.getRangeAt(0).cloneRange();const B=f.getBoundingClientRect();t(4,d={top:B.bottom,left:B.left})}t(2,a=!0)});return}if(a)switch(c.key){case"ArrowDown":case"Tab":c.preventDefault(),t(5,r=(r+1)%u.length);break;case"ArrowUp":c.preventDefault(),t(5,r=(r-1+u.length)%u.length);break;case"Enter":c.preventDefault(),D(u[r]),t(2,a=!1);break;case"Escape":c.preventDefault(),t(2,a=!1);break;default:b()}}function D(c){t(2,a=!1),console.log(c)}function h(c){N[c?"unshift":"push"](()=>{s=c,t(1,s)})}function A(){n=this.innerHTML,t(0,n)}const k=c=>D(c);return l.$$set=c=>{"text"in c&&t(0,n=c.text)},[n,s,a,u,d,r,D,h,A,k]}class dt extends pe{constructor(e){super(),ge(this,e,ct,ft,he,{text:0})}}function ht(l){let e,t,n,s,i,a;t=new ut({});function u(r){l[2](r)}let d={};return l[0].text!==void 0&&(d.text=l[0].text),s=new dt({props:d}),N.push(()=>Me(s,"text",u)),{c(){e=L("div"),ie(t.$$.fragment),n=W(),ie(s.$$.fragment),this.h()},l(r){e=H(r,"DIV",{class:!0});var f=P(e);re(t.$$.fragment,f),n=U(f),re(s.$$.fragment,f),f.forEach(E),this.h()},h(){_(e,"class","container svelte-16qa0xo")},m(r,f){X(r,e,f),ue(t,e,null),C(e,n),ue(s,e,null),a=!0},p(r,[f]){const b={};!i&&f&1&&(i=!0,b.text=r[0].text,Ae(()=>i=!1)),s.$set(b)},i(r){a||(Q(t.$$.fragment,r),Q(s.$$.fragment,r),a=!0)},o(r){x(t.$$.fragment,r),x(s.$$.fragment,r),a=!1},d(r){r&&E(e),fe(t),fe(s)}}}function pt(l,e,t){let n,s;Le(l,V,a=>t(1,s=a)),M.newTab({data:{id:-1,title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.22"}});function i(a){l.$$.not_equal(n.text,a)&&(n.text=a,t(0,n),t(1,s))}return l.$$.update=()=>{l.$$.dirty&2&&t(0,n=s.tabs.length>0?s.tabs[s.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,s,i]}class _t extends pe{constructor(e){super(),ge(this,e,pt,ht,he,{})}}export{_t as component};
