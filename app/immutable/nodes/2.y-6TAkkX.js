import{s as fe,i as ne,n as le,r as Ie,b as W,c as ye,o as We,y as Xe,z as ke}from"../chunks/scheduler.DvlNEcs7.js";import{S as de,i as he,e as D,s as q,c as H,a as M,f as U,k as Ce,d as y,l as T,D as P,g as $,h as k,E as ae,m as N,F as qe,G as ge,w as ie,x as oe,y as re,u as Ue,q as Ye,n as Q,o as x,z as ue,H as De}from"../chunks/index.DfRyX0YP.js";import{e as ve,u as Fe,o as ze,a as me,b as Z,d as _e}from"../chunks/animate.CkGGxskC.js";import{b as ce,w as Ge}from"../chunks/paths.B7rxhHct.js";function Je(s){let e,t,n,l,i,o=`<div class="close-icon svelte-1rrb1cb" style="-webkit-mask: url(${ce}/images/svg/cancel.svg) no-repeat center / contain; mask: url(${ce}/images/svg/cancel.svg) no-repeat center / contain;"></div>`,b,v;return{c(){e=D("div"),t=D("button"),n=D("input"),l=q(),i=D("button"),i.innerHTML=o,this.h()},l(r){e=H(r,"DIV",{class:!0});var f=M(e);t=H(f,"BUTTON",{class:!0});var d=M(t);n=H(d,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),l=U(d),i=H(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(i)!=="svelte-1m9e2o9"&&(i.innerHTML=o),d.forEach(y),f.forEach(y),this.h()},h(){T(n,"autocorrect","off"),T(n,"autocomplete","off"),T(n,"spellcheck","false"),T(n,"type","text"),T(n,"class","svelte-1rrb1cb"),T(i,"class","close-button svelte-1rrb1cb"),P(i,"preventHover",s[2]),T(t,"class","tab svelte-1rrb1cb"),P(t,"active",s[1]),T(e,"class","container svelte-1rrb1cb"),P(e,"preventHover",s[2])},m(r,f){$(r,e,f),k(e,t),k(t,n),s[7](n),ae(n,s[0]),k(t,l),k(t,i),b||(v=[N(n,"input",s[8]),N(i,"click",qe(function(){ne(s[3])&&s[3].apply(this,arguments)})),N(t,"dblclick",ge(s[9])),N(t,"click",function(){ne(s[4])&&s[4].apply(this,arguments)}),N(t,"mousedown",ge(function(){ne(s[5])&&s[5].apply(this,arguments)})),N(t,"touchstart",ge(function(){ne(s[5])&&s[5].apply(this,arguments)}))],b=!0)},p(r,[f]){s=r,f&1&&n.value!==s[0]&&ae(n,s[0]),f&4&&P(i,"preventHover",s[2]),f&2&&P(t,"active",s[1]),f&4&&P(e,"preventHover",s[2])},i:le,o:le,d(r){r&&y(e),s[7](null),b=!1,Ie(v)}}}function Ze(s,e,t){let{title:n=""}=e,{active:l=!1}=e,{preventHover:i=!1}=e,{onClose:o=()=>{}}=e,{onClick:b=()=>{}}=e,{onMousedown:v=g=>{}}=e,r;function f(g){W[g?"unshift":"push"](()=>{r=g,t(6,r)})}function d(){n=this.value,t(0,n)}const u=()=>r.select();return s.$$set=g=>{"title"in g&&t(0,n=g.title),"active"in g&&t(1,l=g.active),"preventHover"in g&&t(2,i=g.preventHover),"onClose"in g&&t(3,o=g.onClose),"onClick"in g&&t(4,b=g.onClick),"onMousedown"in g&&t(5,v=g.onMousedown)},[n,l,i,o,b,v,r,f,d,u]}class He extends de{constructor(e){super(),he(this,e,Ze,Je,fe,{title:0,active:1,preventHover:2,onClose:3,onClick:4,onMousedown:5})}}let je=0;const O=Ge({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:s=>{const{data:e={id:je++,title:"Untitled",text:""},index:t=-1,callback:n=()=>{}}=s||{};O.update(l=>(l.tabs.some(i=>i.id==e.id)||(t<0?(l.tabs.push(e),l.activeIndex=l.tabs.length-1):(l.tabs.splice(t,0,e),l.activeIndex=t)),l)),n()},removeTab:s=>{O.update(e=>(s<0||s>=e.tabs.length||(e.placeholderIndex==s&&(e.placeholderIndex=-1),e.tabs.splice(s,1),s==e.activeIndex-1?e.activeIndex=Math.max(0,s):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:s=>{O.update(e=>(s<0?e.activeIndex=0:s>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=s,e))},setPlaceholderIndex:s=>{O.update(e=>(e.placeholderIndex=s===void 0||s<0||s>=e.tabs.length?-1:s,e))},moveTab:(s,e,t=()=>{})=>{s!=e&&(O.update(n=>{if(s<0||s>=n.tabs.length||e<0||e>=n.tabs.length)return n;const l=n.tabs[s];return n.tabs.splice(s,1),n.tabs.splice(e,0,l),n.activeIndex==s&&(n.activeIndex=e),n.placeholderIndex==s&&(n.placeholderIndex=e),n}),t())}};function we(s,e,t){const n=s.slice();return n[39]=e[t],n[40]=e,n[41]=t,n}function Te(s,e){let t,n,l,i,o=e[41],b,v,r;function f(){return e[15](e[41])}function d(){return e[16](e[41])}function u(..._){return e[17](e[41],..._)}function g(_){e[18](_,e[41])}let C={active:e[8].activeIndex==e[41],preventHover:e[7],onClose:f,onClick:d,onMousedown:u};e[8].tabs[e[41]].title!==void 0&&(C.title=e[8].tabs[e[41]].title),n=new He({props:C}),W.push(()=>De(n,"title",g));const A=()=>e[19](t,o),S=()=>e[19](null,o);return{key:s,first:null,c(){t=D("div"),ie(n.$$.fragment),i=q(),this.h()},l(_){t=H(_,"DIV",{class:!0,draggable:!0});var w=M(t);oe(n.$$.fragment,w),i=U(w),w.forEach(y),this.h()},h(){T(t,"class","tab-container svelte-1g1iwtf"),T(t,"draggable","true"),P(t,"placeholder",e[8].placeholderIndex==e[41]),this.first=t},m(_,w){$(_,t,w),re(n,t,null),k(t,i),A(),b=!0,v||(r=[Xe(e[12].call(null,t)),N(t,"dragstart",e[13])],v=!0)},p(_,w){e=_;const L={};w[0]&256&&(L.active=e[8].activeIndex==e[41]),w[0]&128&&(L.preventHover=e[7]),w[0]&256&&(L.onClose=f),w[0]&256&&(L.onClick=d),w[0]&256&&(L.onMousedown=u),!l&&w[0]&256&&(l=!0,L.title=e[8].tabs[e[41]].title,ke(()=>l=!1)),n.$set(L),o!==e[41]&&(S(),o=e[41],A()),(!b||w[0]&256)&&P(t,"placeholder",e[8].placeholderIndex==e[41])},i(_){b||(Q(n.$$.fragment,_),b=!0)},o(_){x(n.$$.fragment,_),b=!1},d(_){_&&y(t),ue(n),S(),v=!1,Ie(r)}}}function Ke(s){let e,t,n,l=[],i=new Map,o,b,v,r=`<div class="new-tab-icon svelte-1g1iwtf" style="-webkit-mask: url(${ce}/images/svg/plus.svg) no-repeat center / contain; mask: url(${ce}/images/svg/plus.svg) no-repeat center / contain;"></div>`,f,d,u,g,C,A,S,_,w=ve(s[8].tabs);const L=m=>m[39];for(let m=0;m<w.length;m+=1){let h=we(s,w,m),E=L(h);i.set(E,l[m]=Te(E,h))}return u=new He({props:{title:s[3].title,active:!s[5],preventHover:!0}}),{c(){e=D("div"),t=D("div"),n=D("div");for(let m=0;m<l.length;m+=1)l[m].c();o=q(),b=D("div"),v=D("button"),v.innerHTML=r,f=q(),d=D("div"),ie(u.$$.fragment),g=q(),C=D("div"),this.h()},l(m){e=H(m,"DIV",{});var h=M(e);t=H(h,"DIV",{class:!0});var E=M(t);n=H(E,"DIV",{class:!0});var Y=M(n);for(let F=0;F<l.length;F+=1)l[F].l(Y);Y.forEach(y),o=U(E),b=H(E,"DIV",{class:!0});var ee=M(b);v=H(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(v)!=="svelte-15g65px"&&(v.innerHTML=r),ee.forEach(y),f=U(E),d=H(E,"DIV",{class:!0});var te=M(d);oe(u.$$.fragment,te),te.forEach(y),E.forEach(y),g=U(h),C=H(h,"DIV",{class:!0}),M(C).forEach(y),h.forEach(y),this.h()},h(){T(n,"class","tabs svelte-1g1iwtf"),T(v,"class","new-tab-button svelte-1g1iwtf"),T(b,"class","buttons svelte-1g1iwtf"),T(d,"class","clone svelte-1g1iwtf"),P(d,"dragging",s[0]),T(t,"class","toolbar svelte-1g1iwtf"),T(C,"class","separator svelte-1g1iwtf")},m(m,h){$(m,e,h),k(e,t),k(t,n);for(let E=0;E<l.length;E+=1)l[E]&&l[E].m(n,null);s[20](n),k(t,o),k(t,b),k(b,v),k(t,f),k(t,d),re(u,d,null),s[21](d),k(e,g),k(e,C),s[22](e),A=!0,S||(_=N(v,"click",s[10]),S=!0)},p(m,h){h[0]&27524&&(w=ve(m[8].tabs),Ue(),l=Fe(l,h,L,1,m,w,i,n,ze,Te,null,we),Ye());const E={};h[0]&8&&(E.title=m[3].title),h[0]&32&&(E.active=!m[5]),u.$set(E),(!A||h[0]&1)&&P(d,"dragging",m[0])},i(m){if(!A){for(let h=0;h<w.length;h+=1)Q(l[h]);Q(u.$$.fragment,m),A=!0}},o(m){for(let h=0;h<l.length;h+=1)x(l[h]);x(u.$$.fragment,m),A=!1},d(m){m&&y(e);for(let h=0;h<l.length;h+=1)l[h].d();s[20](null),ue(u),s[21](null),s[22](null),S=!1,_()}}}const Qe=12,se=140,j=70,K=2e3,xe=1600,Ee=.3;function $e(s,e,t){let n;ye(s,O,a=>t(8,n=a));let l,i=[],o=0,b=null,v=-1,r={id:-1,title:"",text:""},f,d,u,g=!1,C=!1,A=0,S=0,_=0,w,L=!1;const m=(a,c=300)=>{let p;return(...I)=>{clearTimeout(p),p=setTimeout(()=>{a.apply(this,I)},c)}};function h(a){B.setActiveIndex(a),l.children[a].scrollIntoView({behavior:"smooth"})}function E(){B.newTab()}const Y=a=>{if(!i[a]){console.warn("Cannot close tab!");return}o=i[a].getBoundingClientRect().width,a<n.tabs.length-1&&(l.style.setProperty("--tab-max-width",`${o}px`),ee()),a==n.tabs.length-1?B.setActiveIndex(a-1):a==n.activeIndex&&B.setActiveIndex(a+1),me({duration:K,easing:Z,onStep:(c,p)=>{a==0?t(1,l.style.gridTemplateColumns=`minmax(${p*j}px, ${p*o}px)`,l):t(1,l.style.gridTemplateColumns=`repeat(${a}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*j}px, ${p*o}px)`,l)},onEnd:()=>{t(1,l.style.gridTemplateColumns="",l),B.removeTab(a)}})},ee=m(()=>{l&&(l.style.setProperty("--tab-max-width",`${se}px`),me({duration:K,easing:Z,onStep:(a,c)=>{l.style.setProperty("--tab-max-width",`${o+a*(se-o)}px`)},onEnd:()=>{l.style.setProperty("--tab-max-width",`${se}px`)}}))},xe);function te(a){if(!l)return;const c=a.getBoundingClientRect().width;me({duration:K,easing:Z,onStep:(p,I)=>{n.tabs.length==1?t(1,l.style.gridTemplateColumns=`minmax(${p*j}px, ${p*c}px)`,l):t(1,l.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*j}px, ${p*c}px)`,l),t(1,l.scrollLeft=l.scrollWidth,l)},onEnd:()=>{t(1,l.style.gridTemplateColumns="",l)}})}const F=(a,c)=>{const p=i[0].getBoundingClientRect().width;B.moveTab(a,c,()=>{if(a>c)for(let I=c;I<a;I++)_e(i[I],{duration:K,easing:Z,css:(G,R)=>`transform: translateX(-${R*p}px);`});if(a<c)for(let I=c;I>a;I--)_e(i[I],{duration:K,easing:Z,css:(G,R)=>`transform: translateX(${R*p}px);`})})};function Le(a){!a.target||!a.dataTransfer||(a.dataTransfer.setData("text/plain",JSON.stringify(r)),a.dataTransfer.setDragImage(new Image,0,0))}function Ae(a,c){if(a==0&&c==0){t(4,u.style.left="-1000px",u),t(4,u.style.top="-1000px",u);return}let p=w.getBoundingClientRect();if(a<p.left||a>p.right||c<p.top||c>p.bottom){C||(_=0),t(4,u.style.left=`${a+A}px`,u),t(4,u.style.top=`${c+S}px`,u),t(5,C=!0);return}C&&t(5,C=!1),t(4,u.style.left=`${a+A}px`,u),t(4,u.style.top=`${d.top}px`,u);const I=-l.scrollLeft,G=i[0].getBoundingClientRect().width;let R=-1;if(a>I+n.tabs.length*G)R=n.tabs.length-1;else for(let J=0;J<n.tabs.length;J++)if(a>I+J*G&&a<I+(J+1)*G){R=J;break}a<20?(_=-Ee,requestAnimationFrame(pe)):a>l.clientWidth-10?(_=Ee,requestAnimationFrame(pe)):_=0,!(R==-1||R==n.placeholderIndex)&&F(n.placeholderIndex,R)}let z=0;function pe(a){if(!g||_==0){z=0;return}z==0&&(z=a);const c=a-z;z=a,l.scrollBy({left:_*c}),requestAnimationFrame(pe)}function be(a,c){if(!a.target)return;let p,I;a instanceof TouchEvent?(p=a.touches[0].clientX,I=a.touches[0].clientY,a.preventDefault()):(p=a.clientX,I=a.clientY),window.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("touchend",V),window.addEventListener("mousemove",X),window.addEventListener("mouseup",V),window.addEventListener("drag",X),window.addEventListener("dragend",V),window.addEventListener("blur",V),B.setActiveIndex(c),f=a.target,d=f.getBoundingClientRect(),b=[p,I],A=d.left-p,S=d.top-I,t(4,u.style.width=`${d.width}px`,u),t(4,u.style.left=`${d.left}px`,u),t(4,u.style.top=`${d.top}px`,u),t(3,r={...n.tabs[c]}),v=c}function X(a){let c,p;if(a instanceof TouchEvent?(c=a.touches[0].clientX,p=a.touches[0].clientY,a.preventDefault()):(c=a.clientX,p=a.clientY),g){Ae(c,p);return}b===null||Math.hypot(b[0]-c,b[1]-p)<Qe||(t(0,g=!0),B.setPlaceholderIndex(v),B.setActiveIndex(v))}function V(){window.removeEventListener("touchmove",X),window.removeEventListener("touchend",V),window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",V),window.removeEventListener("drag",X),window.removeEventListener("dragend",V),window.removeEventListener("blur",V),b=null,t(5,C=!1),v=-1,A=0,S=0,B.setPlaceholderIndex(),t(0,g=!1)}We(()=>{l.style.setProperty("--tab-max-width",`${se}px`),l.style.setProperty("--tab-min-width",`${j}px`)});const Me=a=>Y(a),Be=a=>h(a),Se=(a,c)=>be(c,a);function Pe(a,c){s.$$.not_equal(n.tabs[c].title,a)&&(n.tabs[c].title=a,O.set(n))}function Re(a,c){W[a?"unshift":"push"](()=>{i[c]=a,t(2,i)})}function Ne(a){W[a?"unshift":"push"](()=>{l=a,t(1,l)})}function Ve(a){W[a?"unshift":"push"](()=>{u=a,t(4,u)})}function Oe(a){W[a?"unshift":"push"](()=>{w=a,t(6,w)})}return s.$$.update=()=>{s.$$.dirty[0]&1&&(g?t(7,L=!0):setTimeout(()=>t(7,L=!1),20))},[g,l,i,r,u,C,w,L,n,h,E,Y,te,Le,be,Me,Be,Se,Pe,Re,Ne,Ve,Oe]}class et extends de{constructor(e){super(),he(this,e,$e,Ke,fe,{},null,[-1,-1])}}function tt(s){let e,t,n,l;return{c(){e=D("div"),t=D("textarea"),this.h()},l(i){e=H(i,"DIV",{id:!0,class:!0});var o=M(e);t=H(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,placeholder:!0,class:!0}),M(t).forEach(y),o.forEach(y),this.h()},h(){T(t,"spellcheck","false"),T(t,"name","editor"),T(t,"id","text"),T(t,"placeholder","Enter text here"),T(t,"class","svelte-7cpmmf"),T(e,"id","editor"),T(e,"class","svelte-7cpmmf")},m(i,o){$(i,e,o),k(e,t),ae(t,s[0]),n||(l=N(t,"input",s[1]),n=!0)},p(i,[o]){o&1&&ae(t,i[0])},i:le,o:le,d(i){i&&y(e),n=!1,l()}}}function nt(s,e,t){let{text:n}=e;function l(){n=this.value,t(0,n)}return s.$$set=i=>{"text"in i&&t(0,n=i.text)},[n,l]}class st extends de{constructor(e){super(),he(this,e,nt,tt,fe,{text:0})}}function lt(s){let e,t,n,l,i,o;t=new et({});function b(r){s[2](r)}let v={};return s[0].text!==void 0&&(v.text=s[0].text),l=new st({props:v}),W.push(()=>De(l,"text",b)),{c(){e=D("div"),ie(t.$$.fragment),n=q(),ie(l.$$.fragment),this.h()},l(r){e=H(r,"DIV",{class:!0});var f=M(e);oe(t.$$.fragment,f),n=U(f),oe(l.$$.fragment,f),f.forEach(y),this.h()},h(){T(e,"class","container svelte-16qa0xo")},m(r,f){$(r,e,f),re(t,e,null),k(e,n),re(l,e,null),o=!0},p(r,[f]){const d={};!i&&f&1&&(i=!0,d.text=r[0].text,ke(()=>i=!1)),l.$set(d)},i(r){o||(Q(t.$$.fragment,r),Q(l.$$.fragment,r),o=!0)},o(r){x(t.$$.fragment,r),x(l.$$.fragment,r),o=!1},d(r){r&&y(e),ue(t),ue(l)}}}function at(s,e,t){let n,l;ye(s,O,o=>t(1,l=o)),B.newTab({data:{id:-1,title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.21"}});function i(o){s.$$.not_equal(n.text,o)&&(n.text=o,t(0,n),t(1,l))}return s.$$.update=()=>{s.$$.dirty&2&&t(0,n=l.tabs.length>0?l.tabs[l.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,l,i]}class ct extends de{constructor(e){super(),he(this,e,at,lt,fe,{})}}export{ct as component};
