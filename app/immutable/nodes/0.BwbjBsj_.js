import{s as P,v as q,w as z,x as O,y as V,c as $,o as R,n as D,a as w}from"../chunks/scheduler.CE28Mlnp.js";import{S as L,i as A,H as J,s as H,D as K,h as M,j as y,a as m,t as h,g as f,e as _,c as v,v as N,w as d,A as p,p as U,E as Q,q as W,k as T,r as x,u as B,d as G,o as X,n as Y}from"../chunks/index.DI-vKZfI.js";import{s as C,a as b,t as Z,f as E,c as ee,b as j}from"../chunks/firebaseStore.uL8k1zFQ.js";import{g as te}from"../chunks/entry.BTvvhHjn.js";import{b as g}from"../chunks/paths.BaTIH16z.js";import{t as F}from"../chunks/themes.BTx5Q4mv.js";const se=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ae=!0,ne="always",$e=Object.freeze(Object.defineProperty({__proto__:null,prerender:ae,trailingSlash:ne},Symbol.toStringTag,{value:"Module"}));function re(l){let t,o,s;const a=l[3].default,n=q(a,l,l[2],null);return{c(){t=new J(!1),o=H(),n&&n.c(),this.h()},l(e){t=K(e,!1),o=M(e),n&&n.l(e),this.h()},h(){t.a=o},m(e,r){t.m(l[0],e,r),y(e,o,r),n&&n.m(e,r),s=!0},p(e,[r]){(!s||r&1)&&t.p(e[0]),n&&n.p&&(!s||r&4)&&z(n,a,e,e[2],s?V(a,e[2],r,null):O(e[2]),null)},i(e){s||(m(n,e),s=!0)},o(e){h(n,e),s=!1},d(e){e&&(t.d(),f(o)),n&&n.d(e)}}}function oe(l,t,o){let s,a;$(l,C,c=>o(1,a=c));let{$$slots:n={},$$scope:e}=t;function r(c){const u=F.find(S=>S.name===c);return u?`<style>
    @font-face {
      font-family: "Cascadia Code";
      src: url("${g}/fonts/Cascadia.ttf") format("truetype");
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: "Selawik";
      src: url("${g}/fonts/Selawik.ttf") format("truetype");
      font-weight: normal;
      font-style: normal;
    }

    :root {
    --bg: ${u.bg};
    --bg-alt: ${u.bgAlt};
    --main: ${u.main};
    --caret: ${u.caret};
    --error: ${u.error};
    --sub: ${u.sub};
    --text: ${u.text};
    }
    </style>`:""}function i(){var u;const c=F.find(S=>S.name===a.theme);c&&((u=document.querySelector('meta[name="theme-color"]'))==null||u.setAttribute("content",c.bg))}return R(()=>{r(a.theme),C.subscribe(i)}),l.$$set=c=>{"$$scope"in c&&o(2,e=c.$$scope)},l.$$.update=()=>{l.$$.dirty&2&&o(0,s=r(a.theme))},[s,a,e,n]}class le extends L{constructor(t){super(),A(this,t,oe,re,P,{})}}function ie(l){let t,o=`<span class="status-icon svelte-1mx6eh7" style="-webkit-mask: url(${g}/images/svg/double-checkmark.svg) no-repeat center / contain; mask: url(${g}/images/svg/double-checkmark.svg) no-repeat center / contain;"></span>`;return{c(){t=_("div"),t.innerHTML=o,this.h()},l(s){t=v(s,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-jbp3id"&&(t.innerHTML=o),this.h()},h(){d(t,"class","status svelte-1mx6eh7"),p(t,"saving",l[0].savingStatus==="saving"),p(t,"saved",l[0].savingStatus==="saved"),p(t,"error",l[0].savingStatus==="error")},m(s,a){y(s,t,a)},p(s,[a]){a&1&&p(t,"saving",s[0].savingStatus==="saving"),a&1&&p(t,"saved",s[0].savingStatus==="saved"),a&1&&p(t,"error",s[0].savingStatus==="error")},i:D,o:D,d(s){s&&f(t)}}}function ce(l,t,o){let s;return $(l,b,a=>o(0,s=a)),[s]}class ue extends L{constructor(t){super(),A(this,t,ce,ie,P,{})}}const{document:k}=se;function I(l){let t,o,s;return o=new ue({}),{c(){t=_("div"),U(o.$$.fragment),this.h()},l(a){t=v(a,"DIV",{class:!0});var n=G(t);W(o.$$.fragment,n),n.forEach(f),this.h()},h(){d(t,"class","sync-status svelte-1f5yn2u")},m(a,n){y(a,t,n),x(o,t,null),s=!0},i(a){s||(m(o.$$.fragment,a),s=!0)},o(a){h(o.$$.fragment,a),s=!1},d(a){a&&f(t),B(o)}}}function fe(l){let t,o,s;const a=l[1].default,n=q(a,l,l[2],null);let e=!l[0].isLoading&&I();return{c(){t=_("div"),n&&n.c(),o=H(),e&&e.c(),this.h()},l(r){t=v(r,"DIV",{class:!0});var i=G(t);n&&n.l(i),o=M(i),e&&e.l(i),i.forEach(f),this.h()},h(){d(t,"class","layout-container svelte-1f5yn2u")},m(r,i){y(r,t,i),n&&n.m(t,null),T(t,o),e&&e.m(t,null),s=!0},p(r,i){n&&n.p&&(!s||i&4)&&z(n,a,r,r[2],s?V(a,r[2],i,null):O(r[2]),null),r[0].isLoading?e&&(X(),h(e,1,1,()=>{e=null}),Y()):e?i&1&&m(e,1):(e=I(),e.c(),m(e,1),e.m(t,null))},i(r){s||(m(n,r),m(e),s=!0)},o(r){h(n,r),h(e),s=!1},d(r){r&&f(t),n&&n.d(r),e&&e.d()}}}function me(l){let t,o,s,a,n;return a=new le({props:{$$slots:{default:[fe]},$$scope:{ctx:l}}}),{c(){t=_("meta"),o=_("meta"),s=H(),U(a.$$.fragment),this.h()},l(e){const r=Q("svelte-17tnzz8",k.head);t=v(r,"META",{name:!0,content:!0}),o=v(r,"META",{name:!0,content:!0}),r.forEach(f),s=M(e),W(a.$$.fragment,e),this.h()},h(){d(t,"name","viewport"),d(t,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),d(o,"name","theme-color"),d(o,"content","var(--bg)")},m(e,r){T(k.head,t),T(k.head,o),y(e,s,r),x(a,e,r),n=!0},p(e,[r]){const i={};r&5&&(i.$$scope={dirty:r,ctx:e}),a.$set(i)},i(e){n||(m(a.$$.fragment,e),n=!0)},o(e){h(a.$$.fragment,e),n=!1},d(e){e&&f(s),f(t),f(o),B(a,e)}}}function de(){switch(screen.orientation.type){case"portrait-primary":document.documentElement.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","0px");break;case"landscape-primary":document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-left","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--safe-area-right","0px");break;case"landscape-secondary":document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","env(safe-area-inset-right)");break}}function pe(l,t,o){let s,a;$(l,b,i=>o(0,s=i)),$(l,j,i=>o(3,a=i));let{$$slots:n={},$$scope:e}=t;function r(i){s.savingStatus==="saving"&&i.preventDefault()}return R(()=>{window.addEventListener("beforeunload",r),screen.orientation.addEventListener("change",de),Z.subscribe(E.publishToFirestore),C.subscribe(E.publishToFirestore),ee.onAuthStateChanged(async i=>{if(!i){w(b,s.currentUser=i,s),w(j,a=window.location.pathname.slice(g.length),a),te(g+"/login");return}w(b,s.currentUser=i,s);try{E.loadFromFirestore()}catch(c){console.error(c)}})}),l.$$set=i=>{"$$scope"in i&&o(2,e=i.$$scope)},[s,n,e]}class Se extends L{constructor(t){super(),A(this,t,pe,me,P,{})}}export{Se as component,$e as universal};
