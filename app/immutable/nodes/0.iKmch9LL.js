import{s as $,e as D,u as T,g as E,f as I,o as x}from"../chunks/scheduler.kU6oEzG_.js";import{S as A,i as C,e as _,s as F,B as L,c as m,d,f as M,a as h,l as f,h as v,g,r as j,p as O}from"../chunks/index.D4XwTXRm.js";import{a as R,f as w,d as b,b as y,g as U,s as V,t as S}from"../chunks/tabsStore.Dmoamz-V.js";const k=!0,q="always",J=Object.freeze(Object.defineProperty({__proto__:null,prerender:k,trailingSlash:q},Symbol.toStringTag,{value:"Module"}));function z(c){let n,u,o,r,l;const a=c[1].default,t=D(a,c,c[0],null);return{c(){n=_("meta"),u=F(),o=_("div"),r=_("div"),t&&t.c(),this.h()},l(e){const s=L("svelte-1xk05yi",document.head);n=m(s,"META",{name:!0,content:!0}),s.forEach(d),u=M(e),o=m(e,"DIV",{class:!0});var i=h(o);r=m(i,"DIV",{class:!0});var p=h(r);t&&t.l(p),p.forEach(d),i.forEach(d),this.h()},h(){f(n,"name","viewport"),f(n,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),f(r,"class","content svelte-nc5tww"),f(o,"class","container svelte-nc5tww")},m(e,s){v(document.head,n),g(e,u,s),g(e,o,s),v(o,r),t&&t.m(r,null),l=!0},p(e,[s]){t&&t.p&&(!l||s&1)&&T(t,a,e,e[0],l?I(a,e[0],s,null):E(e[0]),null)},i(e){l||(j(t,e),l=!0)},o(e){O(t,e),l=!1},d(e){e&&(d(u),d(o)),d(n),t&&t.d(e)}}}function B(c,n,u){let{$$slots:o={},$$scope:r}=n;function l(a){a.length!==0&&a.forEach(t=>{try{S.newTabFromString(t)}catch(e){console.warn("Failed to parse tab!",t,e);return}})}return x(()=>{R.onAuthStateChanged(async a=>{if(!a){w.update(i=>({...i,isLoading:!1,currentUser:a}));return}const t=b(y,"users",a.uid),e=await U(t);let s={tabs:[],activeIndex:0};if(e.exists())console.log("Fetching firestore user doc..."),s=e.data();else{console.log("Creating firestore user doc...");const i=b(y,"users",a.uid);await V(i,s,{merge:!0})}l(s.tabs),S.setActiveIndex(s.activeIndex),w.update(i=>({...i,isLoading:!1,currentUser:a,data:s}))})}),c.$$set=a=>{"$$scope"in a&&u(0,r=a.$$scope)},[r,o]}class K extends A{constructor(n){super(),C(this,n,B,z,$,{})}}export{K as component,J as universal};
