import{r as me,s as K,n as ne,i as oe,b as ie,c as ve,f as _e,y as ge}from"../chunks/scheduler._-uiodl9.js";import{l as P,n as W,S as Q,i as Z,e as E,c as T,a as C,d as p,o as g,p as te,g as U,h as y,z as L,A as ye,s as H,u as G,f as Y,v as j,B as $,C as se,w as x,D as ae,x as J,q as pe,m as be,E as we,F as ke,G as Ie}from"../chunks/index.vJ3w6iaY.js";import{b as Ee,w as Me}from"../chunks/paths.DMdIKXjK.js";function fe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function De(t,e){P(t,1,1,()=>{e.delete(t.key)})}function Ae(t,e,n,s,i,l,o,v,f,c,r,m){let a=t.length,_=l.length,b=a;const D={};for(;b--;)D[t[b].key]=b;const d=[],h=new Map,w=new Map,R=[];for(b=_;b--;){const I=m(i,l,b),A=n(I);let S=o.get(A);S?R.push(()=>S.p(I,e)):(S=c(A,I),S.c()),h.set(A,d[b]=S),A in D&&w.set(A,Math.abs(b-D[A]))}const q=new Set,N=new Set;function z(I){W(I,1),I.m(v,r),o.set(I.key,I),r=I.first,_--}for(;a&&_;){const I=d[_-1],A=t[a-1],S=I.key,X=A.key;I===A?(r=I.first,a--,_--):h.has(X)?!o.has(S)||q.has(S)?z(I):N.has(X)?a--:w.get(S)>w.get(X)?(N.add(S),z(I)):(q.add(X),a--):(f(A,o),a--)}for(;a--;){const I=t[a];h.has(I.key)||f(I,o)}for(;_;)z(d[_-1]);return me(R),d}function Se(t){let e,n,s,i;return{c(){e=E("button"),n=E("div"),this.h()},l(l){e=T(l,"BUTTON",{class:!0});var o=C(e);n=T(o,"DIV",{class:!0,style:!0}),C(n).forEach(p),o.forEach(p),this.h()},h(){g(n,"class","icon svelte-fsrv9v"),te(n,"-webkit-mask","url("+t[1]+") no-repeat center / contain"),te(n,"mask","url("+t[1]+") no-repeat center / contain"),g(e,"class","svelte-fsrv9v")},m(l,o){U(l,e,o),y(e,n),s||(i=L(e,"click",ye(function(){oe(t[0])&&t[0].apply(this,arguments)})),s=!0)},p(l,[o]){t=l,o&2&&te(n,"-webkit-mask","url("+t[1]+") no-repeat center / contain"),o&2&&te(n,"mask","url("+t[1]+") no-repeat center / contain")},i:ne,o:ne,d(l){l&&p(e),s=!1,i()}}}function Ne(t,e,n){let{onClick:s=()=>{}}=e,{url:i=""}=e;return t.$$set=l=>{"onClick"in l&&n(0,s=l.onClick),"url"in l&&n(1,i=l.url)},[s,i]}class Te extends Q{constructor(e){super(),Z(this,e,Ne,Se,K,{onClick:0,url:1})}}function Ve(t){let e,n,s,i,l,o,v,f,c;return o=new Te({props:{url:Ee+"/images/svg/cancel.svg",onClick:t[2]}}),{c(){e=E("div"),n=E("button"),s=E("input"),i=H(),l=E("div"),G(o.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0});var m=C(e);n=T(m,"BUTTON",{class:!0});var a=C(n);s=T(a,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),i=Y(a),l=T(a,"DIV",{class:!0});var _=C(l);j(o.$$.fragment,_),_.forEach(p),a.forEach(p),m.forEach(p),this.h()},h(){g(s,"autocorrect","off"),g(s,"autocomplete","off"),g(s,"spellcheck","false"),g(s,"type","text"),g(s,"class","svelte-i6zefg"),g(l,"class","close-button svelte-i6zefg"),g(n,"class","tab svelte-i6zefg"),$(n,"active",t[1]),g(e,"class","container svelte-i6zefg")},m(r,m){U(r,e,m),y(e,n),y(n,s),t[6](s),se(s,t[0]),y(n,i),y(n,l),x(o,l,null),v=!0,f||(c=[L(s,"input",t[7]),L(n,"dblclick",ae(t[8])),L(n,"click",function(){oe(t[3])&&t[3].apply(this,arguments)}),L(n,"mousedown",ae(function(){oe(t[4])&&t[4].apply(this,arguments)}))],f=!0)},p(r,[m]){t=r,m&1&&s.value!==t[0]&&se(s,t[0]);const a={};m&4&&(a.onClick=t[2]),o.$set(a),(!v||m&2)&&$(n,"active",t[1])},i(r){v||(W(o.$$.fragment,r),v=!0)},o(r){P(o.$$.fragment,r),v=!1},d(r){r&&p(e),t[6](null),J(o),f=!1,me(c)}}}function Oe(t,e,n){let{title:s=""}=e,{active:i=!1}=e,{onClose:l=()=>{}}=e,{onClick:o=()=>{}}=e,{onMousedown:v=a=>{}}=e,f;function c(a){ie[a?"unshift":"push"](()=>{f=a,n(5,f)})}function r(){s=this.value,n(0,s)}const m=()=>f.select();return t.$$set=a=>{"title"in a&&n(0,s=a.title),"active"in a&&n(1,i=a.active),"onClose"in a&&n(2,l=a.onClose),"onClick"in a&&n(3,o=a.onClick),"onMousedown"in a&&n(4,v=a.onMousedown)},[s,i,l,o,v,f,c,r,m]}class Be extends Q{constructor(e){super(),Z(this,e,Oe,Ve,K,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}const B=Me({tabs:[],activeIndex:0,placeholderIndex:-1}),O={newTab:({title:t="Untitled",text:e=""}={})=>{B.update(n=>(n.tabs.push({title:t,text:e}),n.activeIndex=n.tabs.length-1,n))},removeTab:t=>{B.update(e=>(e.tabs.splice(t,1),e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1),e))},setActiveIndex:t=>{B.update(e=>(e.activeIndex=t<0||t>=e.tabs.length?0:t,e))},setPlaceholderIndex:t=>{B.update(e=>(e.placeholderIndex=t===void 0||t<0||t>=e.tabs.length?-1:t,e))},swapTabs:(t,e,n)=>{B.update(s=>{const i=s.tabs[t];return s.tabs[t]=s.tabs[e],s.tabs[e]=i,s.activeIndex==t?s.activeIndex=e:s.activeIndex==e&&(s.activeIndex=t),s.placeholderIndex==t?s.placeholderIndex=e:s.placeholderIndex==e&&(s.placeholderIndex=t),s}),n&&n()}};function Pe(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function We(t){return t*t*t}function Re(t){const e=t-1;return e*e*e+1}function de(t,e,n){const s=t.slice();return s[25]=e[n],s[26]=e,s[27]=n,s}function qe(t){let e,n,s;function i(){return t[10](t[27])}function l(){return t[11](t[27])}function o(...c){return t[12](t[27],...c)}function v(c){t[13](c,t[27])}let f={active:t[2].activeIndex==t[27],onClose:i,onClick:l,onMousedown:o};return t[2].tabs[t[27]].title!==void 0&&(f.title=t[2].tabs[t[27]].title),e=new Be({props:f}),ie.push(()=>Ie(e,"title",v)),{c(){G(e.$$.fragment)},l(c){j(e.$$.fragment,c)},m(c,r){x(e,c,r),s=!0},p(c,r){t=c;const m={};r&4&&(m.active=t[2].activeIndex==t[27]),r&4&&(m.onClose=i),r&4&&(m.onClick=l),r&4&&(m.onMousedown=o),!n&&r&4&&(n=!0,m.title=t[2].tabs[t[27]].title,ge(()=>n=!1)),e.$set(m)},i(c){s||(W(e.$$.fragment,c),s=!0)},o(c){P(e.$$.fragment,c),s=!1},d(c){J(e,c)}}}function Le(t){let e,n,s,i;return{c(){e=E("div"),this.h()},l(l){e=T(l,"DIV",{class:!0}),C(e).forEach(p),this.h()},h(){g(e,"class","tab-container placeholder svelte-1x40tdd"),$(e,"lockMaxWidth",t[1]>0)},m(l,o){U(l,e,o),i=!0},p(l,o){(!i||o&2)&&$(e,"lockMaxWidth",l[1]>0)},i(l){i||(l&&_e(()=>{i&&(s&&s.end(1),n=we(e,t[3],{}),n.start())}),i=!0)},o(l){n&&n.invalidate(),l&&(s=ke(e,t[4],{})),i=!1},d(l){l&&p(e),l&&s&&s.end()}}}function he(t,e){let n,s,i,l,o,v,f;const c=[Le,qe],r=[];function m(a,_){return a[2].placeholderIndex==a[27]?0:1}return s=m(e),i=r[s]=c[s](e),{key:t,first:null,c(){n=E("div"),i.c(),l=H(),this.h()},l(a){n=T(a,"DIV",{class:!0});var _=C(n);i.l(_),l=Y(_),_.forEach(p),this.h()},h(){g(n,"class","tab-container svelte-1x40tdd"),$(n,"lockMaxWidth",e[1]>0),this.first=n},m(a,_){U(a,n,_),r[s].m(n,null),y(n,l),f=!0},p(a,_){e=a;let b=s;s=m(e),s===b?r[s].p(e,_):(pe(),P(r[b],1,1,()=>{r[b]=null}),be(),i=r[s],i?i.p(e,_):(i=r[s]=c[s](e),i.c()),W(i,1),i.m(n,l)),(!f||_&2)&&$(n,"lockMaxWidth",e[1]>0)},i(a){f||(W(i),a&&_e(()=>{f&&(v&&v.end(1),o=we(n,e[3],{}),o.start())}),f=!0)},o(a){P(i),o&&o.invalidate(),a&&(v=ke(n,e[4],{})),f=!1},d(a){a&&p(n),r[s].d(),a&&v&&v.end()}}}function Ue(t){let e,n,s,i=[],l=new Map,o,v,f,c,r,m,a,_,b=fe(t[2].tabs);const D=d=>d[25];for(let d=0;d<b.length;d+=1){let h=de(t,b,d),w=D(h);l.set(w,i[d]=he(w,h))}return f=new Te({props:{url:Ee+"/images/svg/plus.svg",onClick:t[6]}}),{c(){e=E("div"),n=E("div"),s=E("div");for(let d=0;d<i.length;d+=1)i[d].c();o=H(),v=E("div"),G(f.$$.fragment),c=H(),r=E("div"),this.h()},l(d){e=T(d,"DIV",{});var h=C(e);n=T(h,"DIV",{class:!0});var w=C(n);s=T(w,"DIV",{class:!0});var R=C(s);for(let N=0;N<i.length;N+=1)i[N].l(R);R.forEach(p),o=Y(w),v=T(w,"DIV",{class:!0});var q=C(v);j(f.$$.fragment,q),q.forEach(p),w.forEach(p),c=Y(h),r=T(h,"DIV",{class:!0}),C(r).forEach(p),h.forEach(p),this.h()},h(){g(s,"class","tabs svelte-1x40tdd"),g(v,"class","buttons svelte-1x40tdd"),g(n,"class","toolbar svelte-1x40tdd"),g(r,"class","separator svelte-1x40tdd")},m(d,h){U(d,e,h),y(e,n),y(n,s);for(let w=0;w<i.length;w+=1)i[w]&&i[w].m(s,null);t[14](s),y(n,o),y(n,v),x(f,v,null),y(e,c),y(e,r),m=!0,a||(_=L(n,"click",ae(t[15])),a=!0)},p(d,[h]){h&678&&(b=fe(d[2].tabs),pe(),i=Ae(i,h,D,1,d,b,l,s,De,he,null,de),be())},i(d){if(!m){for(let h=0;h<b.length;h+=1)W(i[h]);W(f.$$.fragment,d),m=!0}},o(d){for(let h=0;h<i.length;h+=1)P(i[h]);P(f.$$.fragment,d),m=!1},d(d){d&&p(e);for(let h=0;h<i.length;h+=1)i[h].d();t[14](null),J(f),a=!1,_()}}}const Xe=200,$e=120,ze=80,Fe=20;function He(t,e,n){let s;ve(t,B,u=>n(2,s=u));let i,l=0;const o=(u,k=300)=>{let M;return(...V)=>{clearTimeout(M),M=setTimeout(()=>{u.apply(this,V)},k)}};function v(u){let k=u.getBoundingClientRect();return{duration:$e,easing:Re,css:M=>`width: ${k.width*M}px;`}}function f(u){var M;let k=u.getBoundingClientRect();return(M=u.querySelector(".tab"))==null||M.classList.remove("active"),{duration:ze,easing:We,css:V=>`width: ${k.width*V}px;`}}function c(u){O.setActiveIndex(u),i.children[u].scrollIntoView({behavior:"smooth"})}function r(){O.newTab(),setTimeout(()=>{i.scrollBy({left:i.scrollWidth,behavior:"smooth"})})}const m=o(()=>{n(1,l=0)},1e3);function a(u){s.tabs.length!=1&&(u<s.tabs.length-1&&(n(1,l=i.children[0].clientWidth),i.style.setProperty("--lock-width",`${l}px`),m()),O.removeTab(u))}function _(u,k,M){const V=getComputedStyle(u),ee=V.transform==="none"?"":V.transform,[F,Ze]=V.transformOrigin.split(" ").map(parseFloat),Ce=k.left+k.width*F/M.width-(M.left+F);let le;function re(ce){le===void 0&&(le=ce);const ue=1-Pe((ce-le)/Xe);ue>0?(u.style.cssText=`transform: ${ee} translateX(${Ce*ue}px);`,requestAnimationFrame(re)):u.style.cssText=""}requestAnimationFrame(re)}const b=(u,k)=>{const M=i.children[u],V=i.children[k],ee=M.getBoundingClientRect(),F=V.getBoundingClientRect();console.log("swapping "+u+" and "+k),O.swapTabs(u,k,()=>{_(M,ee,F),_(V,F,ee)})};let D=null,d=-1,h=null,w=!1;function R(u,k){u.target&&(window.addEventListener("mousemove",q),window.addEventListener("mouseup",N),window.addEventListener("blur",N),O.setActiveIndex(k),h=u.target.cloneNode(!0),D=[u.clientX,u.clientY],d=k)}function q(u){if(w)console.log("weee!!!!");else{if(D===null||Math.hypot(D[0]-u.clientX,D[1]-u.clientY)<Fe)return;w=!0,O.setPlaceholderIndex(d),O.setActiveIndex(d),console.log("dragging tab: ",s.placeholderIndex)}}function N(){window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",N),window.removeEventListener("blur",N),D=null,w&&(h!==null&&h.remove(),h=null,w=!1,d=-1,O.setPlaceholderIndex(),console.log("stop dragging"))}const z=u=>a(u),I=u=>c(u),A=(u,k)=>R(k,u);function S(u,k){t.$$.not_equal(s.tabs[k].title,u)&&(s.tabs[k].title=u,B.set(s))}function X(u){ie[u?"unshift":"push"](()=>{i=u,n(0,i)})}return[i,l,s,v,f,c,r,a,b,R,z,I,A,S,X,()=>{b(0,1)}]}class Ge extends Q{constructor(e){super(),Z(this,e,He,Ue,K,{})}}function Ye(t){let e,n,s,i;return{c(){e=E("div"),n=E("textarea"),this.h()},l(l){e=T(l,"DIV",{id:!0,class:!0});var o=C(e);n=T(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),C(n).forEach(p),o.forEach(p),this.h()},h(){g(n,"spellcheck","false"),g(n,"name","editor"),g(n,"id","text"),g(n,"class","svelte-7cpmmf"),g(e,"id","editor"),g(e,"class","svelte-7cpmmf")},m(l,o){U(l,e,o),y(e,n),se(n,t[0]),s||(i=L(n,"input",t[1]),s=!0)},p(l,[o]){o&1&&se(n,l[0])},i:ne,o:ne,d(l){l&&p(e),s=!1,i()}}}function je(t,e,n){let{text:s}=e;function i(){s=this.value,n(0,s)}return t.$$set=l=>{"text"in l&&n(0,s=l.text)},[s,i]}class xe extends Q{constructor(e){super(),Z(this,e,je,Ye,K,{text:0})}}function Je(t){let e,n,s,i,l,o;n=new Ge({});function v(c){t[1](c)}let f={};return t[0].tabs[t[0].activeIndex].text!==void 0&&(f.text=t[0].tabs[t[0].activeIndex].text),i=new xe({props:f}),ie.push(()=>Ie(i,"text",v)),{c(){e=E("div"),G(n.$$.fragment),s=H(),G(i.$$.fragment),this.h()},l(c){e=T(c,"DIV",{class:!0});var r=C(e);j(n.$$.fragment,r),s=Y(r),j(i.$$.fragment,r),r.forEach(p),this.h()},h(){g(e,"class","container svelte-16qa0xo")},m(c,r){U(c,e,r),x(n,e,null),y(e,s),x(i,e,null),o=!0},p(c,[r]){const m={};!l&&r&1&&(l=!0,m.text=c[0].tabs[c[0].activeIndex].text,ge(()=>l=!1)),i.$set(m)},i(c){o||(W(n.$$.fragment,c),W(i.$$.fragment,c),o=!0)},o(c){P(n.$$.fragment,c),P(i.$$.fragment,c),o=!1},d(c){c&&p(e),J(n),J(i)}}}function Ke(t,e,n){let s;ve(t,B,l=>n(0,s=l)),O.newTab({title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.17"});function i(l){t.$$.not_equal(s.tabs[s.activeIndex].text,l)&&(s.tabs[s.activeIndex].text=l,B.set(s))}return[s,i]}class st extends Q{constructor(e){super(),Z(this,e,Ke,Je,K,{})}}export{st as component};
