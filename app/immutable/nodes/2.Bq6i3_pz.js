const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/quill.Bk4jDS0q.js","../chunks/core.CG__ofcG.js"])))=>i.map(i=>d[i]);
var Ct=Object.defineProperty;var It=(e,t,n)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N=(e,t,n)=>It(e,typeof t!="symbol"?t+"":t,n);import{s as Ce,n as fe,r as et,e as Ee,f as tt,c as se,a as de,o as nt,d as J,z as Mt,A as Re,B as Yt}from"../chunks/scheduler.CNrmCPBX.js";import{S as Ie,i as Me,e as P,b as Xt,c as H,d as B,f as Pt,g as X,w as M,A as F,j as te,k as I,x as $,G as je,l as Ht,s as z,v as ue,h as W,z as st,a as U,o as ve,t as G,n as me,I as Te,C as Oe,J as St,p as be,q as pe,r as _e,u as ye,K as qe,m as Le}from"../chunks/index.Bx3bS2zy.js";import{e as ke,u as Je,o as Ze}from"../chunks/each.BP2nLSrP.js";import{b as K}from"../chunks/paths.DJyeuQft.js";import{m as he,a as yt,t as ae,d as oe,s as $e,f as At}from"../chunks/firebaseStore.NWDz_i0F.js";import{c as ge,s as De,S as Rt}from"../chunks/Spinner.DU_sV4I5.js";import{_ as it}from"../chunks/preload-helper.D6kgxu3v.js";import{t as qt}from"../chunks/themes.BTx5Q4mv.js";function Vt(e){let t,n,s,l,o,u;return{c(){t=P("div"),n=P("button"),s=P("span"),l=Xt(e[0]),this.h()},l(r){t=H(r,"DIV",{class:!0});var i=B(t);n=H(i,"BUTTON",{class:!0,draggable:!0});var g=B(n);s=H(g,"SPAN",{class:!0});var k=B(s);l=Pt(k,e[0]),k.forEach(X),g.forEach(X),i.forEach(X),this.h()},h(){M(s,"class","title svelte-w1fi59"),M(n,"class","tab svelte-w1fi59"),M(n,"draggable","true"),F(n,"active",e[1]),M(t,"class","tab-container svelte-w1fi59"),F(t,"preventHover",e[2])},m(r,i){te(r,t,i),I(t,n),I(n,s),I(s,l),o||(u=[$(n,"mousedown",je(function(){Ee(e[3])&&e[3].apply(this,arguments)})),$(n,"touchstart",je(function(){Ee(e[3])&&e[3].apply(this,arguments)})),$(n,"dragstart",je(function(){Ee(e[4])&&e[4].apply(this,arguments)}))],o=!0)},p(r,[i]){e=r,i&1&&Ht(l,e[0]),i&2&&F(n,"active",e[1]),i&4&&F(t,"preventHover",e[2])},i:fe,o:fe,d(r){r&&X(t),o=!1,et(u)}}}function Bt(e,t,n){let{title:s=""}=t,{active:l=!1}=t,{preventHover:o=!1}=t,{onPointerdown:u=i=>{}}=t,{onDragstart:r=i=>{}}=t;return e.$$set=i=>{"title"in i&&n(0,s=i.title),"active"in i&&n(1,l=i.active),"preventHover"in i&&n(2,o=i.preventHover),"onPointerdown"in i&&n(3,u=i.onPointerdown),"onDragstart"in i&&n(4,r=i.onDragstart)},[s,l,o,u,r]}class wt extends Ie{constructor(t){super(),Me(this,t,Bt,Vt,Ce,{title:0,active:1,preventHover:2,onPointerdown:3,onDragstart:4})}}const lt=(e,t)=>{const{duration:n=300,easing:s=ge,onEnd:l=()=>{},onStep:o=()=>{},css:u}=t;let r;function i(g){if(!e){console.warn("Cannot find element to animate");return}r===void 0&&(r=g);const k=s((g-r)/n),D=1-k;k<1?(e.style.cssText=u(k,D),o(k,D),requestAnimationFrame(i)):(e.style.cssText="",l())}requestAnimationFrame(i)},Qe=e=>{const{duration:t=300,easing:n=ge,onEnd:s=()=>{},onStep:l=()=>{}}=e;let o;function u(r){o===void 0&&(o=r);const i=n((r-o)/t),g=1-i;i<1?(l(i,g),requestAnimationFrame(u)):s()}requestAnimationFrame(u)};function rt(e){let t,n,s=`<span class="button-icon svelte-18u4svq" style="-webkit-mask: url(${K}/images/svg/undo.svg) no-repeat center / contain; mask: url(${K}/images/svg/undo.svg) no-repeat center / contain;"></span>`,l,o,u,r,i,g,k,D;return{c(){t=P("div"),n=P("button"),n.innerHTML=s,l=z(),o=P("input"),u=z(),r=P("input"),this.h()},l(w){t=H(w,"DIV",{class:!0});var b=B(t);n=H(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-1b4fip4"&&(n.innerHTML=s),l=W(b),o=H(b,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),u=W(b),r=H(b,"INPUT",{type:!0,class:!0}),b.forEach(X),this.h()},h(){M(n,"class","button svelte-18u4svq"),M(o,"type","range"),M(o,"min","2"),M(o,"max","20"),M(o,"step","2"),M(o,"class","slider svelte-18u4svq"),M(r,"type","color"),M(r,"class","color-picker svelte-18u4svq"),M(t,"class","pencil-tools svelte-18u4svq")},m(w,b){te(w,t,b),I(t,n),I(t,l),I(t,o),Oe(o,e[0]),I(t,u),I(t,r),Oe(r,e[1]),g=!0,k||(D=[$(n,"click",function(){Ee(e[4])&&e[4].apply(this,arguments)}),$(o,"change",e[8]),$(o,"input",e[8]),$(r,"input",e[9])],k=!0)},p(w,b){e=w,b&1&&Oe(o,e[0]),b&2&&Oe(r,e[1])},i(w){g||(w&&tt(()=>{g&&(i||(i=Te(t,De,{duration:200,axis:"x"},!0)),i.run(1))}),g=!0)},o(w){w&&(i||(i=Te(t,De,{duration:200,axis:"x"},!1)),i.run(0)),g=!1},d(w){w&&X(t),w&&i&&i.end(),k=!1,et(D)}}}function Ot(e){let t,n,s=`<span class="button-icon svelte-18u4svq" style="-webkit-mask: url(${K}/images/svg/pencil.svg) no-repeat center / contain; mask: url(${K}/images/svg/pencil.svg) no-repeat center / contain;"></span>`,l,o,u,r,i,g=`<span class="button-icon svelte-18u4svq" style="-webkit-mask: url(${K}/images/svg/trash.svg) no-repeat center / contain; mask: url(${K}/images/svg/trash.svg) no-repeat center / contain;"></span>`,k,D,w,b,_,L,p=`<span class="button-icon svelte-18u4svq" style="-webkit-mask: url(${K}/images/svg/user.svg) no-repeat center / contain; mask: url(${K}/images/svg/user.svg) no-repeat center / contain;"></span>`,C,A,q=`<span class="button-icon svelte-18u4svq" style="-webkit-mask: url(${K}/images/svg/maximize.svg) no-repeat center / contain; mask: url(${K}/images/svg/maximize.svg) no-repeat center / contain;"></span>`,v,m,c,f,y=e[5].activeTool==="pencil"&&rt(e);return{c(){t=P("div"),n=P("button"),n.innerHTML=s,l=z(),y&&y.c(),o=z(),u=P("div"),r=z(),i=P("button"),i.innerHTML=g,k=z(),D=P("button"),w=P("span"),_=z(),L=P("a"),L.innerHTML=p,C=z(),A=P("button"),A.innerHTML=q,this.h()},l(E){t=H(E,"DIV",{class:!0});var S=B(t);n=H(S,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-t1zbc2"&&(n.innerHTML=s),l=W(S),y&&y.l(S),o=W(S),u=H(S,"DIV",{class:!0}),B(u).forEach(X),r=W(S),i=H(S,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-cbr57k"&&(i.innerHTML=g),k=W(S),D=H(S,"BUTTON",{class:!0});var O=B(D);w=H(O,"SPAN",{class:!0,style:!0}),B(w).forEach(X),O.forEach(X),_=W(S),L=H(S,"A",{class:!0,href:!0,"data-svelte-h":!0}),ue(L)!=="svelte-1xuhzhs"&&(L.innerHTML=p),C=W(S),A=H(S,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(A)!=="svelte-siuh87"&&(A.innerHTML=q),S.forEach(X),this.h()},h(){M(n,"class","pencil button svelte-18u4svq"),F(n,"selected",e[5].activeTool==="pencil"),M(u,"class","spacer svelte-18u4svq"),M(i,"class","close button svelte-18u4svq"),M(w,"class","button-icon svelte-18u4svq"),st(w,"-webkit-mask","url("+K+"/images/svg/refresh.svg) no-repeat center / contain"),st(w,"mask","url("+K+"/images/svg/refresh.svg) no-repeat center / contain"),M(D,"class","refresh button svelte-18u4svq"),D.disabled=b=e[6].savingStatus==="saving",M(L,"class","button svelte-18u4svq"),M(L,"href",K+"/profile"),M(A,"class","button svelte-18u4svq"),M(t,"class","toolbar-container svelte-18u4svq")},m(E,S){te(E,t,S),I(t,n),I(t,l),y&&y.m(t,null),I(t,o),I(t,u),I(t,r),I(t,i),I(t,k),I(t,D),I(D,w),I(t,_),I(t,L),I(t,C),I(t,A),m=!0,c||(f=[$(n,"click",e[7]),$(i,"click",function(){Ee(e[3])&&e[3].apply(this,arguments)}),$(D,"click",function(){Ee(e[2])&&e[2].apply(this,arguments)}),$(A,"click",e[10])],c=!0)},p(E,[S]){e=E,(!m||S&32)&&F(n,"selected",e[5].activeTool==="pencil"),e[5].activeTool==="pencil"?y?(y.p(e,S),S&32&&U(y,1)):(y=rt(e),y.c(),U(y,1),y.m(t,o)):y&&(ve(),G(y,1,1,()=>{y=null}),me()),(!m||S&64&&b!==(b=e[6].savingStatus==="saving"))&&(D.disabled=b)},i(E){m||(U(y),E&&tt(()=>{m&&(v||(v=Te(t,De,{duration:200},!0)),v.run(1))}),m=!0)},o(E){G(y),E&&(v||(v=Te(t,De,{duration:200},!1)),v.run(0)),m=!1},d(E){E&&X(t),y&&y.d(),E&&v&&v.end(),c=!1,et(f)}}}function Nt(e,t,n){let s,l;se(e,he,_=>n(5,s=_)),se(e,yt,_=>n(6,l=_));let{onRefresh:o=()=>{}}=t,{onClose:u=()=>{}}=t,{onDrawingUndo:r=()=>{}}=t,{stroke:i}=t,{color:g}=t;const k=()=>{de(he,s.activeTool=s.activeTool==="pencil"?void 0:"pencil",s)};function D(){i=St(this.value),n(0,i)}function w(){g=this.value,n(1,g)}const b=()=>{de(he,s.toolbarVisible=!1,s),de(he,s.activeTool=void 0,s)};return e.$$set=_=>{"onRefresh"in _&&n(2,o=_.onRefresh),"onClose"in _&&n(3,u=_.onClose),"onDrawingUndo"in _&&n(4,r=_.onDrawingUndo),"stroke"in _&&n(0,i=_.stroke),"color"in _&&n(1,g=_.color)},[i,g,o,u,r,s,l,k,D,w,b]}class Ut extends Ie{constructor(t){super(),Me(this,t,Nt,Ot,Ce,{onRefresh:2,onClose:3,onDrawingUndo:4,stroke:0,color:1})}}function ot(e,t,n){const s=e.slice();return s[41]=t[n],s[42]=t,s[43]=n,s}function at(e,t){let n,s,l,o,u=t[43],r,i,g;function k(...L){return t[17](t[43],...L)}function D(L){t[18](L,t[41])}let w={active:t[9]==t[41],preventHover:t[8],onPointerdown:k,onDragstart:t[14]};t[11][t[41]].title!==void 0&&(w.title=t[11][t[41]].title),s=new wt({props:w}),J.push(()=>qe(s,"title",D));const b=()=>t[19](n,u),_=()=>t[19](null,u);return{key:e,first:null,c(){n=P("div"),be(s.$$.fragment),o=z(),this.h()},l(L){n=H(L,"DIV",{class:!0});var p=B(n);pe(s.$$.fragment,p),o=W(p),p.forEach(X),this.h()},h(){M(n,"class","tab-container svelte-6u8cf7"),F(n,"placeholder",t[10]==t[41]),this.first=n},m(L,p){te(L,n,p),_e(s,n,null),I(n,o),b(),r=!0,i||(g=Mt(t[13].call(null,n)),i=!0)},p(L,p){t=L;const C={};p[0]&514&&(C.active=t[9]==t[41]),p[0]&256&&(C.preventHover=t[8]),p[0]&2&&(C.onPointerdown=k),!l&&p[0]&2050&&(l=!0,C.title=t[11][t[41]].title,Re(()=>l=!1)),s.$set(C),u!==t[43]&&(_(),u=t[43],b()),(!r||p[0]&1026)&&F(n,"placeholder",t[10]==t[41])},i(L){r||(U(s.$$.fragment,L),r=!0)},o(L){G(s.$$.fragment,L),r=!1},d(L){L&&X(n),ye(s),_(),i=!1,g()}}}function ct(e){let t,n=`<span class="button-icon svelte-6u8cf7" style="-webkit-mask: url(${K}/images/svg/gear.svg) no-repeat center / contain; mask: url(${K}/images/svg/gear.svg) no-repeat center / contain;"></span>`,s,l,o,u;return{c(){t=P("button"),t.innerHTML=n,this.h()},l(r){t=H(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1wioe5y"&&(t.innerHTML=n),this.h()},h(){M(t,"class","button svelte-6u8cf7")},m(r,i){te(r,t,i),l=!0,o||(u=$(t,"click",e[21]),o=!0)},p:fe,i(r){l||(r&&tt(()=>{l&&(s||(s=Te(t,De,{duration:200,axis:"x"},!0)),s.run(1))}),l=!0)},o(r){r&&(s||(s=Te(t,De,{duration:200,axis:"x"},!1)),s.run(0)),l=!1},d(r){r&&X(t),r&&s&&s.end(),o=!1,u()}}}function Ft(e){let t,n,s,l=[],o=new Map,u,r,i,g=`<span class="button-icon svelte-6u8cf7" style="-webkit-mask: url(${K}/images/svg/plus.svg) no-repeat center / contain; mask: url(${K}/images/svg/plus.svg) no-repeat center / contain;"></span>`,k,D,w,b,_,L,p,C,A,q,v=ke(e[1].order);const m=f=>f[41];for(let f=0;f<v.length;f+=1){let y=ot(e,v,f),E=m(y);o.set(E,l[f]=at(E,y))}let c=!e[1].toolbarVisible&&e[1].order.length>0&&ct(e);return _=new wt({props:{title:e[4],active:!e[6],preventHover:!0}}),{c(){t=P("div"),n=P("div"),s=P("div");for(let f=0;f<l.length;f+=1)l[f].c();u=z(),r=P("div"),i=P("button"),i.innerHTML=g,k=z(),D=P("div"),c&&c.c(),w=z(),b=P("div"),be(_.$$.fragment),L=z(),p=P("div"),this.h()},l(f){t=H(f,"DIV",{class:!0});var y=B(t);n=H(y,"DIV",{class:!0});var E=B(n);s=H(E,"DIV",{class:!0});var S=B(s);for(let j=0;j<l.length;j+=1)l[j].l(S);S.forEach(X),u=W(E),r=H(E,"DIV",{class:!0});var O=B(r);i=H(O,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-g0ls06"&&(i.innerHTML=g),O.forEach(X),k=W(E),D=H(E,"DIV",{class:!0});var ee=B(D);c&&c.l(ee),ee.forEach(X),w=W(E),b=H(E,"DIV",{class:!0});var Z=B(b);pe(_.$$.fragment,Z),Z.forEach(X),E.forEach(X),L=W(y),p=H(y,"DIV",{class:!0}),B(p).forEach(X),y.forEach(X),this.h()},h(){M(s,"class","tabs svelte-6u8cf7"),M(i,"class","button svelte-6u8cf7"),M(r,"class","new-tab-container svelte-6u8cf7"),M(D,"class","buttons-container svelte-6u8cf7"),M(b,"class","clone svelte-6u8cf7"),F(b,"dragging",e[0]),M(n,"class","tabbar svelte-6u8cf7"),M(p,"class","divider svelte-6u8cf7"),M(t,"class","svelte-6u8cf7")},m(f,y){te(f,t,y),I(t,n),I(n,s);for(let E=0;E<l.length;E+=1)l[E]&&l[E].m(s,null);e[20](s),I(n,u),I(n,r),I(r,i),I(n,k),I(n,D),c&&c.m(D,null),I(n,w),I(n,b),_e(_,b,null),e[22](b),I(t,L),I(t,p),e[23](t),C=!0,A||(q=$(i,"click",e[12]),A=!0)},p(f,y){y[0]&53002&&(v=ke(f[1].order),ve(),l=Je(l,y,m,1,f,v,o,s,Ze,at,null,ot),me()),!f[1].toolbarVisible&&f[1].order.length>0?c?(c.p(f,y),y[0]&2&&U(c,1)):(c=ct(f),c.c(),U(c,1),c.m(D,null)):c&&(ve(),G(c,1,1,()=>{c=null}),me());const E={};y[0]&16&&(E.title=f[4]),y[0]&64&&(E.active=!f[6]),_.$set(E),(!C||y[0]&1)&&F(b,"dragging",f[0])},i(f){if(!C){for(let y=0;y<v.length;y+=1)U(l[y]);U(c),U(_.$$.fragment,f),C=!0}},o(f){for(let y=0;y<l.length;y+=1)G(l[y]);G(c),G(_.$$.fragment,f),C=!1},d(f){f&&X(t);for(let y=0;y<l.length;y+=1)l[y].d();e[20](null),c&&c.d(),ye(_),e[22](null),e[23](null),A=!1,q()}}}const zt=12,Ne=200,He=32,Se=200,Wt=1600,ut=.3;function Gt(e,t,n){let s,l,o,u;se(e,he,d=>n(1,o=d)),se(e,ae,d=>n(11,u=d));const r=()=>{E(o.order[o.activeIndex])};let i,g=[],k=0,D=null,w=-1,b="",_,L,p,C=!1,A=!1,q=0,v=0,m,c=!1;const f=(d,x=300)=>{let R;return(...V)=>{clearTimeout(R),R=setTimeout(()=>{d.apply(void 0,V)},x)}};function y(){oe.newTab()}const E=d=>{const x=o.order.findIndex(R=>R===d);if(x<0||!g[x]){console.warn("Cannot close tab!");return}k=g[x].getBoundingClientRect().width,x<o.order.length-1&&(i.style.setProperty("--tab-max-width",`${k}px`),S()),x==o.activeIndex&&(x==o.order.length-1?oe.setActiveIndex(x-1):oe.setActiveIndex(x+1)),Qe({duration:Se,easing:ge,onStep:(R,V)=>{x==0?n(2,i.style.gridTemplateColumns=`minmax(${V*He}px, ${V*k}px)`,i):n(2,i.style.gridTemplateColumns=`repeat(${x}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${V*He}px, ${V*k}px)`,i)},onEnd:()=>{n(2,i.style.gridTemplateColumns="",i),oe.removeTab(d)}})},S=f(()=>{i&&(i.style.setProperty("--tab-max-width",`${Ne}px`),Qe({duration:Se,easing:ge,onStep:(d,x)=>{i.style.setProperty("--tab-max-width",`${k+d*(Ne-k)}px`)},onEnd:()=>{i.style.setProperty("--tab-max-width",`${Ne}px`)}}))},Wt);function O(d){if(!i)return;const x=d.getBoundingClientRect().width;Qe({duration:Se,easing:ge,onStep:(R,V)=>{o.order.length==1?n(2,i.style.gridTemplateColumns=`minmax(${R*He}px, ${R*x}px)`,i):n(2,i.style.gridTemplateColumns=`repeat(${o.order.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${R*He}px, ${R*x}px)`,i),n(2,i.scrollLeft=i.scrollWidth,i)},onEnd:()=>{n(2,i.style.gridTemplateColumns="",i)}})}const ee=(d,x)=>{const R=g[0].getBoundingClientRect().width;oe.moveTab(d,x,()=>{if(d>x)for(let V=x;V<d;V++)lt(g[V],{duration:Se,easing:ge,css:(Xe,re)=>`transform: translateX(-${re*R}px);`});if(d<x)for(let V=x;V>d;V--)lt(g[V],{duration:Se,easing:ge,css:(Xe,re)=>`transform: translateX(${re*R}px);`})})};function Z(d){!d.target||!d.dataTransfer||(d.dataTransfer.setData("text/plain",s),d.dataTransfer.setDragImage(new Image,0,0))}function j(d,x){if(d==0&&x==0){n(5,p.style.left="-1000px",p),n(5,p.style.top="-1000px",p);return}let R=m.getBoundingClientRect();if(d<R.left||d>R.right||x<R.top||x>R.bottom){A||(v=0),n(5,p.style.left=`${d+q}px`,p),n(5,p.style.top=`${x-L.height/2}px`,p),n(6,A=!0);return}A&&n(6,A=!1),n(5,p.style.left=`${d+q}px`,p),n(5,p.style.top=`${L.top}px`,p);const V=-i.scrollLeft,Xe=g[0].getBoundingClientRect().width;let re=-1;if(d>V+o.order.length*Xe)re=o.order.length-1;else for(let Pe=0;Pe<o.order.length;Pe++)if(d>V+Pe*Xe&&d<V+(Pe+1)*Xe){re=Pe;break}d<20?(v=-ut,requestAnimationFrame(we)):d>i.clientWidth-10?(v=ut,requestAnimationFrame(we)):v=0,!(re==-1||re==o.placeholderIndex)&&ee(o.placeholderIndex,re)}let ie=0;function we(d){if(!C||v==0){ie=0;return}ie==0&&(ie=d);const x=d-ie;ie=d,i.scrollBy({left:v*x}),requestAnimationFrame(we)}function Ve(d,x){if(!d.target)return;let R,V;d instanceof TouchEvent?(R=d.touches[0].clientX,V=d.touches[0].clientY):(R=d.clientX,V=d.clientY),window.addEventListener("touchmove",le,{passive:!1}),window.addEventListener("touchend",ne),window.addEventListener("mousemove",le),window.addEventListener("mouseup",ne),window.addEventListener("drag",le),window.addEventListener("dragend",ne),window.addEventListener("blur",ne),oe.setActiveIndex(x),_=d.target,L=_.getBoundingClientRect(),D=[R,V],q=L.left-R,L.top-V,n(5,p.style.width=`${L.width}px`,p),n(5,p.style.left=`${L.left}px`,p),n(5,p.style.top=`${L.top}px`,p),w=x,n(4,b=u[o.order[x]].title)}function le(d){let x,R;if(d instanceof TouchEvent?(x=d.touches[0].clientX,R=d.touches[0].clientY,d.preventDefault()):(x=d.clientX,R=d.clientY),C){j(x,R);return}D===null||Math.hypot(D[0]-x,D[1]-R)<zt||(n(0,C=!0),oe.setPlaceholderIndex(w),oe.setActiveIndex(w))}function ne(){window.removeEventListener("touchmove",le),window.removeEventListener("touchend",ne),window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",ne),window.removeEventListener("drag",le),window.removeEventListener("dragend",ne),window.removeEventListener("blur",ne),D=null,n(6,A=!1),w=-1,q=0,oe.setPlaceholderIndex(),n(0,C=!1)}nt(()=>{i.style.setProperty("--tab-max-width",`${Ne}px`),i.style.setProperty("--tab-min-width",`${He}px`)});const Ye=(d,x)=>Ve(x,d);function Be(d,x){e.$$.not_equal(u[x].title,d)&&(u[x].title=d,ae.set(u))}function We(d,x){J[d?"unshift":"push"](()=>{g[x]=d,n(3,g)})}function Ge(d){J[d?"unshift":"push"](()=>{i=d,n(2,i)})}const Ke=()=>{de(he,o.toolbarVisible=!0,o)};function T(d){J[d?"unshift":"push"](()=>{p=d,n(5,p)})}function Q(d){J[d?"unshift":"push"](()=>{m=d,n(7,m)})}return e.$$.update=()=>{e.$$.dirty[0]&2&&n(9,s=o.order[o.activeIndex]),e.$$.dirty[0]&2&&n(10,l=o.order[o.placeholderIndex]),e.$$.dirty[0]&1&&(C?n(8,c=!0):setTimeout(()=>n(8,c=!1),20))},[C,o,i,g,b,p,A,m,c,s,l,u,y,O,Z,Ve,r,Ye,Be,We,Ge,Ke,T,Q]}class Kt extends Ie{constructor(t){super(),Me(this,t,Gt,Ft,Ce,{closeActiveTab:16},null,[-1,-1])}get closeActiveTab(){return this.$$.ctx[16]}}function jt(e){let t,n;return{c(){t=P("div"),n=P("div"),this.h()},l(s){t=H(s,"DIV",{class:!0});var l=B(t);n=H(l,"DIV",{class:!0}),B(n).forEach(X),l.forEach(X),this.h()},h(){M(n,"class","quill-editor svelte-1zs6ve"),M(t,"class","quill-editor-wrapper svelte-1zs6ve"),F(t,"disabled",e[0])},m(s,l){te(s,t,l),I(t,n),e[5](n)},p(s,[l]){l&1&&F(t,"disabled",s[0])},i:fe,o:fe,d(s){s&&X(t),e[5](null)}}}function Qt(e,t,n){let s,l;se(e,ae,v=>n(6,s=v)),se(e,$e,v=>n(4,l=v));let{tabID:o}=t,{disabled:u=!1}=t,r,i;const g=(v,m=300)=>{let c;return(...f)=>{clearTimeout(c),c=setTimeout(()=>{v.apply(void 0,f)},m)}};async function k(v){var y,E,S,O;if(!r)return;const{Delta:m,Range:c}=await it(async()=>{const{Delta:ee,Range:Z}=await import("../chunks/core.CG__ofcG.js").then(j=>j.G);return{Delta:ee,Range:Z}},[],import.meta.url);if(v.undo.length>0)for(var f=0;f<v.undo.length;f++){const ee=(y=v.undo[f].range)==null?void 0:y.index,Z=(E=v.undo[f].range)==null?void 0:E.length,j={delta:new m(v.undo[f].delta.ops),range:ee!==void 0&&Z!==void 0?new c(ee,Z):null};r.history.stack.undo.push(j)}if(v.redo.length>0)for(var f=0;f<v.redo.length;f++){const Z=(S=v.redo[f].range)==null?void 0:S.index,j=(O=v.redo[f].range)==null?void 0:O.length,ie={delta:new m(v.redo[f].delta.ops),range:Z!==void 0&&j!==void 0?new c(Z,j):null};r.history.stack.redo.push(ie)}}function D(v){var m;r&&((m=r.getSelection())==null?void 0:m.length)===0&&window.open(v.target.href,"_blank")}function w(){if(!r||!s[o])return;const v=s[o].ops;r.setContents(v);const m=s[o].history;k(m)}function b(){if(!r||!s[o])return;de(ae,s[o].ops=r.getContents().ops,s);const v=structuredClone(r.history.stack);de(ae,s[o].history=v,s)}const _=g(b,500);function L(){if(!r)return;r.formatText(0,r.getLength(),"link",!1,"api");const v=r.getText(),m=/https?:\/\/\S+/gi,c=v.matchAll(m);for(const E of c)r.formatText(E.index,E[0].length,"link",E[0],"api");const f=/.+\@.+\..+/gi,y=v.matchAll(f);for(const E of y)r.formatText(E.index,E[0].length,"link","mailto:"+E[0],"api");document.querySelectorAll(".ql-editor a").forEach(E=>{E.addEventListener("click",D)})}const p=g(L,500);function C(v,m,c){if(c==="user"){const f=r.getText().split(`
`)[0].trim();de(ae,s[o].title=f===""?"Untitled":f,s),p(),_()}}async function A(){const{default:v}=await it(async()=>{const{default:m}=await import("../chunks/quill.Bk4jDS0q.js");return{default:m}},__vite__mapDeps([0,1]),import.meta.url);n(3,r=new v(i,{formats:["bold","italic","underline","strike","code","link"],placeholder:"Enter text here"})),w(),L(),r.on("text-change",C),r.keyboard.addBinding({key:"/",altKey:!0},()=>{r.format("code",!r.getFormat().code)}),r.keyboard.addBinding({key:"-",altKey:!0},()=>{r.format("strike",!r.getFormat().strike)})}nt(()=>{A()});function q(v){J[v?"unshift":"push"](()=>{i=v,n(1,i)})}return e.$$set=v=>{"tabID"in v&&n(2,o=v.tabID),"disabled"in v&&n(0,u=v.disabled)},e.$$.update=()=>{e.$$.dirty&9&&(u?r==null||r.disable():r==null||r.enable()),e.$$.dirty&24&&(r==null||r.root.setAttribute("spellcheck",l.spellCheck.toString()))},[u,i,o,r,l,q]}class Jt extends Ie{constructor(t){super(),Me(this,t,Qt,jt,Ce,{tabID:2,disabled:0})}}const dt=500,Zt=300,ft=500,$t=300;class en{constructor(){N(this,"isMoving",!1);N(this,"isLongclick",!1);N(this,"button",0);N(this,"lastX",0);N(this,"lastY",0);N(this,"consecutiveClicks",0);N(this,"lastMouseupTime",0);N(this,"activeElement",null);this.reset()}reset(){this.isMoving=!1,this.isLongclick=!1,this.button=0,this.lastX=0,this.lastY=0,this.consecutiveClicks=0,this.lastMouseupTime=0,this.activeElement=null}}class tn{constructor(){N(this,"isDragging",!1);N(this,"isPinching",!1);N(this,"isLongpressed",!1);N(this,"consecutiveTaps",0);N(this,"lastTouchendTime",0);N(this,"lastCenterX",0);N(this,"lastCenterY",0);N(this,"identifier",0);N(this,"x",0);N(this,"y",0);N(this,"hypotenuse",0);N(this,"activeElement",null);this.reset()}reset(){this.isDragging=!1,this.isPinching=!1,this.isLongpressed=!1,this.consecutiveTaps=0,this.lastTouchendTime=0,this.lastCenterX=0,this.lastCenterY=0,this.identifier=0,this.x=0,this.y=0,this.hypotenuse=0,this.activeElement=null}}let ce=[],h=new en,a=new tn;const Y=(e,t)=>{e!=null&&e.dispatchEvent(new CustomEvent("gesture",{detail:t,bubbles:!1,cancelable:!1}))},kt=e=>{h.reset(),a.reset(),h.lastMouseupTime=Date.now(),window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",Fe),window.removeEventListener("touchmove",ze),window.removeEventListener("touchend",xe)},Et=e=>{if(window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",Fe),window.removeEventListener("touchmove",ze),window.removeEventListener("touchend",xe),h.isMoving)if(h.isMoving=!1,h.isLongclick)h.isLongclick=!1,Y(h.activeElement,{event:e,name:"longclick-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});else switch(h.button){case 0:Y(h.activeElement,{event:e,name:"left-click-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});break;case 1:Y(h.activeElement,{event:e,name:"middle-click-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});break;case 2:Y(h.activeElement,{event:e,name:"right-click-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});break}h.isLongclick&&Y(h.activeElement,{event:e,name:"longclick-release",x:h.lastX,y:h.lastY,dx:0,dy:0}),h.reset(),a.isDragging&&(a.isDragging=!1,a.isLongpressed?(a.isLongpressed=!1,Y(a.activeElement,{event:e,name:"longpress-drag-end",x:a.lastCenterX,y:a.lastCenterY,dx:0,dy:0})):Y(a.activeElement,{event:e,name:"touch-drag-end",x:a.lastCenterX,y:a.lastCenterY,dx:0,dy:0})),a.isLongpressed&&Y(a.activeElement,{event:e,name:"longpress-release",x:a.lastCenterX,y:a.lastCenterY,dx:0,dy:0}),a.reset()},Tt=e=>{Y(e.target,{event:e,name:"wheel",x:e.clientX,y:e.clientY,dx:0,dy:0})},Lt=e=>{},Dt=e=>{document.activeElement!==e.target&&(window.addEventListener("mousemove",Ue),window.addEventListener("mouseup",Fe),h.activeElement=e.target,h.lastX=e.clientX,h.lastY=e.clientY,h.isMoving||(h.button=e.button),h.button===0&&window.setTimeout(()=>{Date.now()-h.lastMouseupTime>=ft&&!h.isMoving&&(h.isLongclick=!0,Y(h.activeElement,{event:e,name:"longclick",x:e.clientX,y:e.clientY,dx:0,dy:0}))},ft))},Ue=e=>{if(e.movementX===0&&e.movementY===0)return;let t=e.clientX-h.lastX,n=e.clientY-h.lastY;if(!h.isMoving)if(h.isLongclick)Y(h.activeElement,{event:e,name:"longclick-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});else switch(h.button){case 0:Y(h.activeElement,{event:e,name:"left-click-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});break;case 1:Y(h.activeElement,{event:e,name:"middle-click-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});break;case 2:Y(h.activeElement,{event:e,name:"right-click-drag-start",x:e.clientX,y:e.clientY,dx:0,dy:0});break}if(h.isMoving=!0,h.lastX=e.clientX,h.lastY=e.clientY,h.isLongclick)Y(h.activeElement,{event:e,name:"longclick-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});else switch(h.button){case 0:Y(h.activeElement,{event:e,name:"left-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});break;case 1:Y(h.activeElement,{event:e,name:"middle-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});break;case 2:Y(h.activeElement,{event:e,name:"right-click-dragging",x:e.clientX,y:e.clientY,dx:t,dy:n});break}},Fe=e=>{if(window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",Fe),h.lastMouseupTime=Date.now(),h.isMoving)if(h.isMoving=!1,h.isLongclick)h.isLongclick=!1,Y(h.activeElement,{event:e,name:"longclick-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});else switch(h.button){case 0:Y(h.activeElement,{event:e,name:"left-click-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});break;case 1:Y(h.activeElement,{event:e,name:"middle-click-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});break;case 2:Y(h.activeElement,{event:e,name:"right-click-drag-end",x:h.lastX,y:h.lastY,dx:0,dy:0});break}else h.isLongclick||(e.button===2?Y(h.activeElement,{event:e,name:"right-click",x:e.clientX,y:e.clientY,dx:0,dy:0}):e.button===1?Y(h.activeElement,{event:e,name:"middle-click",x:e.clientX,y:e.clientY,dx:0,dy:0}):(h.consecutiveClicks===0&&Y(h.activeElement,{event:e,name:"left-click",x:e.clientX,y:e.clientY,dx:0,dy:0}),h.consecutiveClicks++,window.setTimeout(()=>{h.consecutiveClicks>1&&Y(h.activeElement,{event:e,name:"double-click",x:e.clientX,y:e.clientY,dx:0,dy:0}),h.consecutiveClicks=0},$t)));h.isLongclick&&Y(h.activeElement,{event:e,name:"longclick-release",x:e.clientX,y:e.clientY,dx:0,dy:0}),h.isLongclick=!1},xt=e=>{if(e.touches.length>1,document.activeElement!==e.target){if(e.touches.length>1){if(e.touches[0].identifier===a.identifier)return;a.isPinching=!0}window.addEventListener("touchmove",ze,{passive:!1}),window.addEventListener("touchend",xe),window.addEventListener("touchcancel",xe),a.identifier=e.touches[0].identifier,a.x=e.touches[0].clientX,a.y=e.touches[0].clientY,a.activeElement=e.target,window.setTimeout(()=>{a.isPinching||a.isDragging||Date.now()-a.lastTouchendTime>=dt&&(a.isDragging=!1,a.isPinching=!1,a.hypotenuse=null,a.isLongpressed=!0,Y(a.activeElement,{event:e,name:"longpress",x:a.x,y:a.y,dx:0,dy:0}))},dt)}},ze=e=>{if(a.isDragging){let t=a.x,n=a.y;a.x=e.touches[0].clientX,a.y=e.touches[0].clientY;let s=a.x-t,l=a.y-n;a.isLongpressed?Y(a.activeElement,{event:e,name:"longpress-dragging",x:a.x,y:a.y,dx:s,dy:l,force:e.touches[0].force}):Y(a.activeElement,{event:e,name:"touch-dragging",x:a.x,y:a.y,dx:s,dy:l,force:e.touches[0].force});return}else if(!a.isLongpressed&&(a.isPinching||e.touches.length>1)){a.x=e.touches[0].clientX,a.y=e.touches[0].clientY;let t={x:e.touches[1].clientX,y:e.touches[1].clientY},n={x:(a.x+t.x)/2,y:(a.y+t.y)/2},s=Math.hypot(a.x-t.x,a.y-t.y);a.hypotenuse===null&&(a.hypotenuse=s,a.lastCenterX=n.x,a.lastCenterY=n.y,Y(a.activeElement,{event:e,name:"pinch-start",x:n.x,y:n.y,dx:0,dy:0})),a.isPinching=!0;let l=s/a.hypotenuse,o=n.x-a.lastCenterX,u=n.y-a.lastCenterY;Y(a.activeElement,{event:e,name:"pinching",x:n.x,y:n.y,zoom:l,dx:o,dy:u}),a.hypotenuse=s,a.lastCenterX=n.x,a.lastCenterY=n.y;return}else a.isDragging=!0,a.isLongpressed?(Y(a.activeElement,{event:e,name:"longpress-drag-start",x:a.x,y:a.y,dx:0,dy:0,force:e.touches[0].force}),a.x=e.touches[0].clientX,a.y=e.touches[0].clientY,Y(a.activeElement,{event:e,name:"longpress-dragging",x:a.x,y:a.y,dx:0,dy:0,force:e.touches[0].force})):(Y(a.activeElement,{event:e,name:"touch-drag-start",x:a.x,y:a.y,dx:0,dy:0,force:e.touches[0].force}),a.x=e.touches[0].clientX,a.y=e.touches[0].clientY,Y(a.activeElement,{event:e,name:"touch-dragging",x:a.x,y:a.y,dx:0,dy:0,force:e.touches[0].force}))},xe=e=>{a.isDragging&&e.touches.length>0&&e.touches[0].identifier===a.identifier||(a.lastTouchendTime=Date.now(),window.removeEventListener("touchmove",ze),window.removeEventListener("touchend",xe),window.removeEventListener("touchcancel",xe),a.isDragging?(a.isDragging=!1,a.isLongpressed?(a.isLongpressed=!1,Y(a.activeElement,{event:e,name:"longpress-drag-end",x:a.x,y:a.y,dx:0,dy:0})):Y(a.activeElement,{event:e,name:"touch-drag-end",x:a.x,y:a.y,dx:0,dy:0})):a.isPinching?(a.isPinching=!1,a.hypotenuse=null,Y(a.activeElement,{event:e,name:"pinch-end",x:a.lastCenterX,y:a.lastCenterY,dx:0,dy:0})):a.isLongpressed||(a.consecutiveTaps===0&&Y(a.activeElement,{event:e,name:"tap",x:a.x,y:a.y,dx:0,dy:0}),a.consecutiveTaps++,window.setTimeout(()=>{a.consecutiveTaps>1&&Y(a.activeElement,{event:e,name:"double-tap",x:a.x,y:a.y,dx:0,dy:0}),a.consecutiveTaps=0},Zt)),a.isLongpressed&&Y(a.activeElement,{event:e,name:"longpress-release",x:a.x,y:a.y,dx:0,dy:0}),a.isLongpressed=!1)};function nn(...e){for(let t of e)ce.findIndex(n=>n===t)===-1&&(ce.length==0&&(window.addEventListener("blur",Et),window.addEventListener("focus",kt)),ce.push(t),t.addEventListener("touchstart",xt,{passive:!1}),t.addEventListener("mousedown",Dt,{passive:!1}),t.addEventListener("contextmenu",Lt,{passive:!1}),t.addEventListener("wheel",Tt,{passive:!1}))}function sn(...e){const t=n=>{n.removeEventListener("touchstart",xt),n.removeEventListener("mousedown",Dt),n.removeEventListener("contextmenu",Lt),n.removeEventListener("wheel",Tt)};if(e.length==0){for(let n of ce)t(n);ce=[]}else for(let n of e){let s=ce.findIndex(l=>l===n);s!==-1&&(t(n),ce.splice(s,1))}ce.length==0&&(window.removeEventListener("blur",Et),window.removeEventListener("focus",kt))}function ln(e){let t,n,s,l,o,u,r="LOG";return{c(){t=P("div"),n=P("canvas"),s=z(),l=P("canvas"),o=z(),u=P("div"),u.textContent=r,this.h()},l(i){t=H(i,"DIV",{class:!0});var g=B(t);n=H(g,"CANVAS",{id:!0,class:!0}),B(n).forEach(X),s=W(g),l=H(g,"CANVAS",{id:!0,class:!0}),B(l).forEach(X),o=W(g),u=H(g,"DIV",{class:!0,"data-svelte-h":!0}),ue(u)!=="svelte-rtly9t"&&(u.textContent=r),g.forEach(X),this.h()},h(){M(n,"id","currentPath"),M(n,"class","svelte-1b93g54"),F(n,"disabled",e[0]),M(l,"id","canvas"),M(l,"class","svelte-1b93g54"),F(l,"disabled",e[0]),M(u,"class","log svelte-1b93g54"),M(t,"class","canvas-container svelte-1b93g54"),F(t,"hide",e[1])},m(i,g){te(i,t,g),I(t,n),e[12](n),I(t,s),I(t,l),e[13](l),I(t,o),I(t,u),e[14](u)},p(i,g){g[0]&1&&F(n,"disabled",i[0]),g[0]&1&&F(l,"disabled",i[0]),g[0]&2&&F(t,"hide",i[1])},i:fe,o:fe,d(i){i&&X(t),e[12](null),e[13](null),e[14](null)}}}const rn=2,on=178;function an(e,t,n){var s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),l=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),u=Math.acos((l*l+s*s-o*o)/(2*l*s));return u*(180/Math.PI)}function gt(e){if(e.points.length<4)return e;for(let t=1;t<e.points.length-2;t++){const n=e.points[t-1],s=e.points[t],l=e.points[t+1];an(n,s,l)>on&&(e.points.splice(t,1),t--)}return e}async function Ae(e,t){if(t.lineWidth=e.lineWidth,t.lineCap="round",t.strokeStyle=e.color,e.points.length<2){t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y),t.lineTo(e.points[0].x,e.points[0].y),t.stroke();return}t.beginPath();let n=e.points[0].x,s=e.points[0].y;for(let l=0;l<e.points.length-1;l++)t.moveTo(n,s),n=(e.points[l].x+e.points[l+1].x)/2,s=(e.points[l].y+e.points[l+1].y)/2,t.quadraticCurveTo(e.points[l].x,e.points[l].y,n,s);t.stroke()}function cn(e){return{x:ht(e.x),y:ht(e.y)}}function ht(e){const t=e.toFixed(rn);return Number(t)}function un(e,t,n){let s;se(e,ae,T=>n(25,s=T));let{radius:l=3}=t,{smoothness:o=0}=t,{stroke:u=5}=t,{color:r="#000000"}=t,{disabled:i=!1}=t,{hide:g=!1}=t,{tabID:k=""}=t;function D(){_.clearRect(0,0,q/v,A/v),E=[]}function w(){if(E.length!=0){n(4,c.innerHTML="Undo",c),E.pop(),p.clearRect(0,0,q/v,A/v);for(let T=0;T<E.length;T++)Ae(E[T],p);we()}}let b,_,L,p,C={x:0,y:0},A=0,q=0,v,m=!1,c,f,y,E=[];function S(){b&&(nn(b),window.addEventListener("keydown",Be))}function O(){b&&(sn(b),window.removeEventListener("keydown",Be))}const ee=(T,Q,d,x)=>{var R=d-T,V=x-Q;return Math.sqrt(R*R+V*V)},Z=(T,Q=300)=>{let d;return(...x)=>{clearTimeout(d),d=setTimeout(()=>{T.apply(void 0,x)},Q)}};function j(T,Q){let d=b.getBoundingClientRect();return{x:T-d.left,y:Q-d.top}}function ie(){if(!b||!L)return;Ye(),v=window.devicePixelRatio;let T=b.getBoundingClientRect();A=T.height*v,q=T.width*v,n(2,b.width=q,b),n(2,b.height=A,b),n(3,L.width=q,L),n(3,L.height=A,L),_.scale(v,v),p.scale(v,v);for(let Q=0;Q<E.length;Q++)Ae(E[Q],p)}function we(){s[k]&&de(ae,s[k].paths=E.filter(T=>gt(T)),s)}function Ve(){s[k]&&(E=s[k].paths,ie())}function le(T,Q){m=!0,C=j(T,Q),_.lineWidth=u,_.lineCap="round",_.strokeStyle=r,_.beginPath(),_.moveTo(C.x,C.y),_.stroke(),f={points:[],lineWidth:u,color:r}}function ne(T,Q){if(!m)return;let d=j(T,Q);if(l>0){if(ee(d.x,d.y,C.x,C.y)<=l){f.points.length===0&&(f.points.push(d),Ae(f,_));return}let x=Math.sqrt(d.x*d.x+d.y*d.y-2*d.x*C.x+C.x*C.x-2*d.y*C.y+C.y*C.y);if(d={x:d.x+l*((C.x-d.x)/x),y:d.y+l*((C.y-d.y)/x)},ee(C.x,C.y,d.x,d.y)<=o)return}f.points.push(cn(d)),_.clearRect(0,0,q/v,A/v),Ae(f,_),C=d}function Ye(){m&&(E.push(gt(f)),Ae(f,p),_.clearRect(0,0,q/v,A/v),we()),m=!1}const Be=function(T){T.ctrlKey&&T.key=="z"&&w(),T.preventDefault()};nt(()=>{_=b.getContext("2d"),_.imageSmoothingEnabled=!1,p=L.getContext("2d"),p.imageSmoothingEnabled=!1,b.addEventListener("gesture",T=>{switch(T.detail.name){case"left-click-drag-start":case"touch-drag-start":le(T.detail.x,T.detail.y);break;case"left-click-dragging":case"touch-dragging":T.detail.force>0&&n(4,c.innerHTML=T.detail.force,c),ne(T.detail.x,T.detail.y);break;case"left-click-drag-end":case"touch-drag-end":Ye();break;case"left-click":case"tap":le(T.detail.x,T.detail.y),ne(T.detail.x,T.detail.y),Ye();break}}),y=new ResizeObserver(Z(ie,0)),y.observe(b),Ve(),i?O():S()}),Yt(()=>{y&&y.disconnect(),O()});function We(T){J[T?"unshift":"push"](()=>{L=T,n(3,L)})}function Ge(T){J[T?"unshift":"push"](()=>{b=T,n(2,b)})}function Ke(T){J[T?"unshift":"push"](()=>{c=T,n(4,c)})}return e.$$set=T=>{"radius"in T&&n(5,l=T.radius),"smoothness"in T&&n(6,o=T.smoothness),"stroke"in T&&n(7,u=T.stroke),"color"in T&&n(8,r=T.color),"disabled"in T&&n(0,i=T.disabled),"hide"in T&&n(1,g=T.hide),"tabID"in T&&n(9,k=T.tabID)},e.$$.update=()=>{e.$$.dirty[0]&1&&(i?O():S())},[i,g,b,L,c,l,o,u,r,k,D,w,We,Ge,Ke]}class dn extends Ie{constructor(t){super(),Me(this,t,un,ln,Ce,{radius:5,smoothness:6,stroke:7,color:8,disabled:0,hide:1,tabID:9,clear:10,undo:11},null,[-1,-1])}get clear(){return this.$$.ctx[10]}get undo(){return this.$$.ctx[11]}}function vt(e,t,n){const s=e.slice();return s[19]=t[n],s[20]=t,s[21]=n,s}function mt(e,t,n){const s=e.slice();return s[19]=t[n],s}function fn(e){let t,n;return t=new Rt({}),{c(){be(t.$$.fragment)},l(s){pe(t.$$.fragment,s)},m(s,l){_e(t,s,l),n=!0},p:fe,i(s){n||(U(t.$$.fragment,s),n=!0)},o(s){G(t.$$.fragment,s),n=!1},d(s){ye(t,s)}}}function gn(e){let t,n,s,l,o,u,r,i=[],g=new Map,k,D,w=[],b=new Map,_,L={};n=new Kt({props:L}),e[9](n);let p=e[1].toolbarVisible&&e[1].order.length>0&&bt(e),C=ke(Object.keys(e[8]));const A=m=>m[19];for(let m=0;m<C.length;m+=1){let c=mt(e,C,m),f=A(c);g.set(f,i[m]=pt(f,c))}let q=ke(Object.keys(e[8]));const v=m=>m[19];for(let m=0;m<q.length;m+=1){let c=vt(e,q,m),f=v(c);b.set(f,w[m]=_t(f,c))}return{c(){t=P("div"),be(n.$$.fragment),s=z(),l=P("div"),p&&p.c(),o=z(),u=P("div"),r=P("div");for(let m=0;m<i.length;m+=1)i[m].c();k=z(),D=P("div");for(let m=0;m<w.length;m+=1)w[m].c();this.h()},l(m){t=H(m,"DIV",{class:!0});var c=B(t);pe(n.$$.fragment,c),s=W(c),l=H(c,"DIV",{class:!0});var f=B(l);p&&p.l(f),f.forEach(X),o=W(c),u=H(c,"DIV",{class:!0});var y=B(u);r=H(y,"DIV",{class:!0});var E=B(r);for(let O=0;O<i.length;O+=1)i[O].l(E);E.forEach(X),k=W(y),D=H(y,"DIV",{class:!0});var S=B(D);for(let O=0;O<w.length;O+=1)w[O].l(S);S.forEach(X),y.forEach(X),c.forEach(X),this.h()},h(){M(l,"class","toolbar"),M(r,"class","editor-container svelte-1wc0tmc"),M(D,"class","drawing-container svelte-1wc0tmc"),F(D,"disabled",e[1].activeTool!=="pencil"),M(u,"class","canvas-container svelte-1wc0tmc"),M(t,"class","page-container svelte-1wc0tmc")},m(m,c){te(m,t,c),_e(n,t,null),I(t,s),I(t,l),p&&p.m(l,null),I(t,o),I(t,u),I(u,r);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(r,null);I(u,k),I(u,D);for(let f=0;f<w.length;f+=1)w[f]&&w[f].m(D,null);_=!0},p(m,c){const f={};n.$set(f),m[1].toolbarVisible&&m[1].order.length>0?p?(p.p(m,c),c&2&&U(p,1)):(p=bt(m),p.c(),U(p,1),p.m(l,null)):p&&(ve(),G(p,1,1,()=>{p=null}),me()),c&320&&(C=ke(Object.keys(m[8])),ve(),i=Je(i,c,A,1,m,C,g,r,Ze,pt,null,mt),me()),c&374&&(q=ke(Object.keys(m[8])),ve(),w=Je(w,c,v,1,m,q,b,D,Ze,_t,null,vt),me()),(!_||c&2)&&F(D,"disabled",m[1].activeTool!=="pencil")},i(m){if(!_){U(n.$$.fragment,m),U(p);for(let c=0;c<C.length;c+=1)U(i[c]);for(let c=0;c<q.length;c+=1)U(w[c]);_=!0}},o(m){G(n.$$.fragment,m),G(p);for(let c=0;c<i.length;c+=1)G(i[c]);for(let c=0;c<w.length;c+=1)G(w[c]);_=!1},d(m){m&&X(t),e[9](null),ye(n),p&&p.d();for(let c=0;c<i.length;c+=1)i[c].d();for(let c=0;c<w.length;c+=1)w[c].d()}}}function bt(e){let t,n,s,l;function o(i){e[13](i)}function u(i){e[14](i)}let r={onClose:e[10],onDrawingUndo:e[11],onRefresh:e[12]};return e[2]!==void 0&&(r.stroke=e[2]),e[0]!==void 0&&(r.color=e[0]),t=new Ut({props:r}),J.push(()=>qe(t,"stroke",o)),J.push(()=>qe(t,"color",u)),{c(){be(t.$$.fragment)},l(i){pe(t.$$.fragment,i)},m(i,g){_e(t,i,g),l=!0},p(i,g){const k={};g&8&&(k.onClose=i[10]),g&80&&(k.onDrawingUndo=i[11]),!n&&g&4&&(n=!0,k.stroke=i[2],Re(()=>n=!1)),!s&&g&1&&(s=!0,k.color=i[0],Re(()=>s=!1)),t.$set(k)},i(i){l||(U(t.$$.fragment,i),l=!0)},o(i){G(t.$$.fragment,i),l=!1},d(i){ye(t,i)}}}function pt(e,t){let n,s,l;return s=new Jt({props:{disabled:t[19]!==t[6],tabID:t[19]}}),{key:e,first:null,c(){n=Le(),be(s.$$.fragment),this.h()},l(o){n=Le(),pe(s.$$.fragment,o),this.h()},h(){this.first=n},m(o,u){te(o,n,u),_e(s,o,u),l=!0},p(o,u){t=o;const r={};u&320&&(r.disabled=t[19]!==t[6]),u&256&&(r.tabID=t[19]),s.$set(r)},i(o){l||(U(s.$$.fragment,o),l=!0)},o(o){G(s.$$.fragment,o),l=!1},d(o){o&&X(n),ye(s,o)}}}function _t(e,t){let n,s,l=t[19],o,u,r;const i=()=>t[15](s,l),g=()=>t[15](null,l);function k(b){t[16](b)}function D(b){t[17](b)}let w={tabID:t[19],hide:t[19]!==t[6],disabled:t[19]!==t[6]||t[1].activeTool!=="pencil"};return t[5]!==void 0&&(w.color=t[5]),t[2]!==void 0&&(w.stroke=t[2]),s=new dn({props:w}),i(),J.push(()=>qe(s,"color",k)),J.push(()=>qe(s,"stroke",D)),{key:e,first:null,c(){n=Le(),be(s.$$.fragment),this.h()},l(b){n=Le(),pe(s.$$.fragment,b),this.h()},h(){this.first=n},m(b,_){te(b,n,_),_e(s,b,_),r=!0},p(b,_){t=b,l!==t[19]&&(g(),l=t[19],i());const L={};_&256&&(L.tabID=t[19]),_&320&&(L.hide=t[19]!==t[6]),_&322&&(L.disabled=t[19]!==t[6]||t[1].activeTool!=="pencil"),!o&&_&32&&(o=!0,L.color=t[5],Re(()=>o=!1)),!u&&_&4&&(u=!0,L.stroke=t[2],Re(()=>u=!1)),s.$set(L)},i(b){r||(U(s.$$.fragment,b),r=!0)},o(b){G(s.$$.fragment,b),r=!1},d(b){b&&X(n),g(),ye(s,b)}}}function hn(e){let t,n,s,l;const o=[gn,fn],u=[];function r(i,g){return i[7].currentUser&&!i[7].isLoading?0:1}return t=r(e),n=u[t]=o[t](e),{c(){n.c(),s=Le()},l(i){n.l(i),s=Le()},m(i,g){u[t].m(i,g),te(i,s,g),l=!0},p(i,[g]){let k=t;t=r(i),t===k?u[t].p(i,g):(ve(),G(u[k],1,1,()=>{u[k]=null}),me(),n=u[t],n?n.p(i,g):(n=u[t]=o[t](i),n.c()),U(n,1),n.m(s.parentNode,s))},i(i){l||(U(n),l=!0)},o(i){G(n),l=!1},d(i){i&&X(s),u[t].d(i)}}}function vn(e,t){var n=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),l=parseInt(e.slice(5,7),16);return"rgb("+n+", "+s+", "+l+")"}function mn(e,t,n){let s,l,o,u,r,i;se(e,$e,c=>n(18,o=c)),se(e,he,c=>n(1,u=c)),se(e,yt,c=>n(7,r=c)),se(e,ae,c=>n(8,i=c));let g="#000000";$e.subscribe(()=>{var c;n(0,g=((c=qt.find(f=>f.name===o.theme))==null?void 0:c.caret)||"#000000")});let k=10,D,w={};function b(c){J[c?"unshift":"push"](()=>{D=c,n(3,D)})}const _=()=>D.closeActiveTab(),L=()=>w[s].undo(),p=()=>At.loadFromFirestore();function C(c){k=c,n(2,k)}function A(c){g=c,n(0,g)}function q(c,f){J[c?"unshift":"push"](()=>{w[f]=c,n(4,w)})}function v(c){l=c,n(5,l),n(0,g)}function m(c){k=c,n(2,k)}return e.$$.update=()=>{e.$$.dirty&2&&n(6,s=u.order[u.activeIndex]),e.$$.dirty&1&&n(5,l=vn(g))},[g,u,k,D,w,l,s,r,i,b,_,L,p,C,A,q,v,m]}class Dn extends Ie{constructor(t){super(),Me(this,t,mn,hn,Ce,{})}}export{Dn as component};
