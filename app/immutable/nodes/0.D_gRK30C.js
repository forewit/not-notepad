import{s as C,u as x,v as F,w as U,x as q,c as S,n as L,o as B,a as G}from"../chunks/scheduler.uUNFeN3d.js";import{S as E,i as I,H as J,s as H,D as K,h as A,j as k,a as w,t as y,g as m,e as _,c as v,v as N,w as g,A as h,p as O,E as Q,q as z,k as $,r as P,u as W,d as T}from"../chunks/index.Bn23-NmW.js";import{s as X,a as b,c as Y,d as M,e as j,g as Z,h as ee,b as R}from"../chunks/firebaseStore.DiSg5b0b.js";import{t as V}from"../chunks/tabsStore.Bvz8gcXN.js";import{g as te}from"../chunks/entry.Crh7C5lJ.js";import{b as D}from"../chunks/paths.MHd6NlvK.js";import{t as se}from"../chunks/themes.BTx5Q4mv.js";/* empty css                                                         */const ae=!0,re="always",we=Object.freeze(Object.defineProperty({__proto__:null,prerender:ae,trailingSlash:re},Symbol.toStringTag,{value:"Module"}));function ne(i){let e,n,a;const o=i[3].default,r=x(o,i,i[2],null);return{c(){e=new J(!1),n=H(),r&&r.c(),this.h()},l(t){e=K(t,!1),n=A(t),r&&r.l(t),this.h()},h(){e.a=n},m(t,c){e.m(i[0],t,c),k(t,n,c),r&&r.m(t,c),a=!0},p(t,[c]){(!a||c&1)&&e.p(t[0]),r&&r.p&&(!a||c&4)&&F(r,o,t,t[2],a?q(o,t[2],c,null):U(t[2]),null)},i(t){a||(w(r,t),a=!0)},o(t){y(r,t),a=!1},d(t){t&&(e.d(),m(n)),r&&r.d(t)}}}function oe(i,e,n){let a,o;S(i,X,l=>n(1,o=l));let{$$slots:r={},$$scope:t}=e;function c(l){const s=se.find(u=>u.name===l);return s?`<style>
    :root {
    --bg: ${s.bg};
    --bg-alt: ${s.bgAlt};
    --main: ${s.main};
    --caret: ${s.caret};
    --error: ${s.error};
    --sub: ${s.sub};
    --text: ${s.text};
    }
    </style>`:""}return i.$$set=l=>{"$$scope"in l&&n(2,t=l.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&n(0,a=c(o.theme))},[a,o,t,r]}class ie extends E{constructor(e){super(),I(this,e,oe,ne,C,{})}}function le(i){let e,n=`<span class="status-icon svelte-1mx6eh7" style="-webkit-mask: url(${D}/images/svg/double-checkmark.svg) no-repeat center / contain; mask: url(${D}/images/svg/double-checkmark.svg) no-repeat center / contain;"></span>`;return{c(){e=_("div"),e.innerHTML=n,this.h()},l(a){e=v(a,"DIV",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-jbp3id"&&(e.innerHTML=n),this.h()},h(){g(e,"class","status svelte-1mx6eh7"),h(e,"saving",i[0].savingStatus==="saving"),h(e,"saved",i[0].savingStatus==="saved"),h(e,"error",i[0].savingStatus==="error")},m(a,o){k(a,e,o)},p(a,[o]){o&1&&h(e,"saving",a[0].savingStatus==="saving"),o&1&&h(e,"saved",a[0].savingStatus==="saved"),o&1&&h(e,"error",a[0].savingStatus==="error")},i:L,o:L,d(a){a&&m(e)}}}function ce(i,e,n){let a;return S(i,b,o=>n(0,a=o)),[a]}class ue extends E{constructor(e){super(),I(this,e,ce,le,C,{})}}function fe(i){let e,n,a,o,r,t;const c=i[2].default,l=x(c,i,i[3],null);return r=new ue({}),{c(){e=_("div"),n=_("div"),l&&l.c(),a=H(),o=_("div"),O(r.$$.fragment),this.h()},l(s){e=v(s,"DIV",{class:!0});var u=T(e);n=v(u,"DIV",{class:!0});var f=T(n);l&&l.l(f),a=A(f),o=v(f,"DIV",{class:!0});var d=T(o);z(r.$$.fragment,d),d.forEach(m),f.forEach(m),u.forEach(m),this.h()},h(){g(o,"class","sync-status svelte-14x3dky"),g(n,"class","content svelte-14x3dky"),g(e,"class","container svelte-14x3dky")},m(s,u){k(s,e,u),$(e,n),l&&l.m(n,null),$(n,a),$(n,o),P(r,o,null),t=!0},p(s,u){l&&l.p&&(!t||u&8)&&F(l,c,s,s[3],t?q(c,s[3],u,null):U(s[3]),null)},i(s){t||(w(l,s),w(r.$$.fragment,s),t=!0)},o(s){y(l,s),y(r.$$.fragment,s),t=!1},d(s){s&&m(e),l&&l.d(s),W(r)}}}function me(i){let e,n,a,o;return a=new ie({props:{$$slots:{default:[fe]},$$scope:{ctx:i}}}),{c(){e=_("meta"),n=H(),O(a.$$.fragment),this.h()},l(r){const t=Q("svelte-1xk05yi",document.head);e=v(t,"META",{name:!0,content:!0}),t.forEach(m),n=A(r),z(a.$$.fragment,r),this.h()},h(){g(e,"name","viewport"),g(e,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover")},m(r,t){$(document.head,e),k(r,n,t),P(a,r,t),o=!0},p(r,[t]){const c={};t&8&&(c.$$scope={dirty:t,ctx:r}),a.$set(c)},i(r){o||(w(a.$$.fragment,r),o=!0)},o(r){y(a.$$.fragment,r),o=!1},d(r){r&&m(n),m(e),W(a,r)}}}function de(i,e,n){let a,o;S(i,R,s=>n(4,a=s)),S(i,b,s=>n(1,o=s));let{$$slots:r={},$$scope:t}=e;function c(s){s.length!==0&&s.forEach(u=>{try{V.newTabFromString(u)}catch(f){console.warn("Failed to parse tab!",u,f);return}})}let l=!1;return B(()=>{Y.onAuthStateChanged(async s=>{if(!s){b.update(p=>({...p,isLoading:!1,currentUser:s})),n(0,l=!0);return}const u=M(j,"users",s.uid),f=await Z(u);let d={tabs:[],activeIndex:0,settings:{theme:"Canvas",spellCheck:!0}};if(f.exists())console.log("Fetching firestore user doc..."),d=f.data();else{console.log("Creating firestore user doc...");const p=M(j,"users",s.uid);await ee(p,d,{merge:!0})}c(d.tabs),V.setActiveIndex(d.activeIndex),b.update(p=>({...p,isLoading:!1,currentUser:s,data:d})),n(0,l=!0)})}),i.$$set=s=>{"$$scope"in s&&n(3,t=s.$$scope)},i.$$.update=()=>{i.$$.dirty&3&&!o.currentUser&&l&&(G(R,a=window.location.pathname,a),te(D+"/login"))},[l,o,r,t]}class ye extends E{constructor(e){super(),I(this,e,de,me,C,{})}}export{ye as component,we as universal};
