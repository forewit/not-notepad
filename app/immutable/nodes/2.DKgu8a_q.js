import{s as tt,n as ot,j as ft,r as Nt,b as X,c as kt,o as Wt,a as xt,y as Tt}from"../chunks/scheduler.enZu1EuY.js";import{S as et,i as nt,e as E,c as y,a as A,d as k,l as v,u as lt,g as Z,h as C,m as G,C as Xt,s as H,x as j,f as O,y as U,D as z,E as it,z as Y,F as gt,p as N,o as W,A as q,v as Ht,r as Ot,G as Ct}from"../chunks/index.CRfKgsjb.js";import{e as bt,u as jt,o as Ut,a as ut,b as _t,c as Q}from"../chunks/animate.CysUV05B.js";import{b as dt,w as Yt}from"../chunks/paths.DGrJK5AT.js";function qt(s){let t,e,n,l;return{c(){t=E("button"),e=E("div"),this.h()},l(o){t=y(o,"BUTTON",{class:!0});var r=A(t);e=y(r,"DIV",{class:!0,style:!0}),A(e).forEach(k),r.forEach(k),this.h()},h(){v(e,"class","icon svelte-fsrv9v"),lt(e,"-webkit-mask","url("+s[1]+") no-repeat center / contain"),lt(e,"mask","url("+s[1]+") no-repeat center / contain"),v(t,"class","svelte-fsrv9v")},m(o,r){Z(o,t,r),C(t,e),n||(l=G(t,"click",Xt(function(){ft(s[0])&&s[0].apply(this,arguments)})),n=!0)},p(o,[r]){s=o,r&2&&lt(e,"-webkit-mask","url("+s[1]+") no-repeat center / contain"),r&2&&lt(e,"mask","url("+s[1]+") no-repeat center / contain")},i:ot,o:ot,d(o){o&&k(t),n=!1,l()}}}function Ft(s,t,e){let{onClick:n=()=>{}}=t,{url:l=""}=t;return s.$$set=o=>{"onClick"in o&&e(0,n=o.onClick),"url"in o&&e(1,l=o.url)},[n,l]}class ht extends et{constructor(t){super(),nt(this,t,Ft,qt,tt,{onClick:0,url:1})}}function Gt(s){let t,e,n,l,o,r,h,m,d;return r=new ht({props:{url:dt+"/images/svg/cancel.svg",onClick:s[2]}}),{c(){t=E("div"),e=E("button"),n=E("input"),l=H(),o=E("div"),j(r.$$.fragment),this.h()},l(c){t=y(c,"DIV",{class:!0});var w=A(t);e=y(w,"BUTTON",{class:!0});var u=A(e);n=y(u,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),l=O(u),o=y(u,"DIV",{class:!0});var T=A(o);U(r.$$.fragment,T),T.forEach(k),u.forEach(k),w.forEach(k),this.h()},h(){v(n,"autocorrect","off"),v(n,"autocomplete","off"),v(n,"spellcheck","false"),v(n,"type","text"),v(n,"class","svelte-1tws2uh"),v(o,"class","close-button svelte-1tws2uh"),v(e,"class","tab svelte-1tws2uh"),z(e,"active",s[1]),v(t,"class","container svelte-1tws2uh")},m(c,w){Z(c,t,w),C(t,e),C(e,n),s[6](n),it(n,s[0]),C(e,l),C(e,o),Y(r,o,null),h=!0,m||(d=[G(n,"input",s[7]),G(e,"dblclick",gt(s[8])),G(e,"click",function(){ft(s[3])&&s[3].apply(this,arguments)}),G(e,"mousedown",gt(function(){ft(s[4])&&s[4].apply(this,arguments)}))],m=!0)},p(c,[w]){s=c,w&1&&n.value!==s[0]&&it(n,s[0]);const u={};w&4&&(u.onClick=s[2]),r.$set(u),(!h||w&2)&&z(e,"active",s[1])},i(c){h||(N(r.$$.fragment,c),h=!0)},o(c){W(r.$$.fragment,c),h=!1},d(c){c&&k(t),s[6](null),q(r),m=!1,Nt(d)}}}function zt(s,t,e){let{title:n=""}=t,{active:l=!1}=t,{onClose:o=()=>{}}=t,{onClick:r=()=>{}}=t,{onMousedown:h=u=>{}}=t,m;function d(u){X[u?"unshift":"push"](()=>{m=u,e(5,m)})}function c(){n=this.value,e(0,n)}const w=()=>m.select();return s.$$set=u=>{"title"in u&&e(0,n=u.title),"active"in u&&e(1,l=u.active),"onClose"in u&&e(2,o=u.onClose),"onClick"in u&&e(3,r=u.onClick),"onMousedown"in u&&e(4,h=u.onMousedown)},[n,l,o,r,h,m,d,c,w]}class Et extends et{constructor(t){super(),nt(this,t,zt,Gt,tt,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}const L=Yt({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:s=>{const{title:t="Untitled",text:e="",index:n=-1,callback:l=()=>{}}=s||{};L.update(o=>(n<0?(o.tabs.push({title:t,text:e}),o.activeIndex=o.tabs.length-1):(o.tabs.splice(n,0,{title:t,text:e}),o.activeIndex=n),o)),l()},removeTab:s=>{L.update(t=>(t.tabs.splice(s,1),s==t.activeIndex-1?t.activeIndex=Math.max(0,s):t.activeIndex=Math.min(t.activeIndex,t.tabs.length-1),t))},setActiveIndex:s=>{L.update(t=>(s<0?t.activeIndex=0:s>t.tabs.length?t.activeIndex=t.tabs.length-1:t.activeIndex=s,t))},setPlaceholderIndex:s=>{L.update(t=>(t.placeholderIndex=s===void 0||s<0||s>=t.tabs.length?-1:s,t))},swapTabs:(s,t,e=()=>{})=>{L.update(n=>{const l=n.tabs[s];return n.tabs[s]=n.tabs[t],n.tabs[t]=l,n.activeIndex==s?n.activeIndex=t:n.activeIndex==t&&(n.activeIndex=s),n.placeholderIndex==s?n.placeholderIndex=t:n.placeholderIndex==t&&(n.placeholderIndex=s),n}),e()}};function vt(s,t,e){const n=s.slice();return n[36]=t[e],n[37]=t,n[38]=e,n}function wt(s,t){let e,n,l,o,r=t[38],h,m,d;function c(){return t[14](t[38])}function w(){return t[15](t[38])}function u(...b){return t[16](t[38],...b)}function T(b){t[17](b,t[38])}let M={active:t[7].activeIndex==t[38],onClose:c,onClick:w,onMousedown:u};t[7].tabs[t[38]].title!==void 0&&(M.title=t[7].tabs[t[38]].title),n=new Et({props:M}),X.push(()=>Ct(n,"title",T));const D=()=>t[18](e,r),S=()=>t[18](null,r);return{key:s,first:null,c(){e=E("div"),j(n.$$.fragment),o=H(),this.h()},l(b){e=y(b,"DIV",{class:!0});var _=A(e);U(n.$$.fragment,_),o=O(_),_.forEach(k),this.h()},h(){v(e,"class","tab-container svelte-13jp0dd"),z(e,"placeholder",t[7].placeholderIndex==t[38]),this.first=e},m(b,_){Z(b,e,_),Y(n,e,null),C(e,o),D(),h=!0,m||(d=xt(t[10].call(null,e)),m=!0)},p(b,_){t=b;const i={};_[0]&128&&(i.active=t[7].activeIndex==t[38]),_[0]&128&&(i.onClose=c),_[0]&128&&(i.onClick=w),_[0]&128&&(i.onMousedown=u),!l&&_[0]&128&&(l=!0,i.title=t[7].tabs[t[38]].title,Tt(()=>l=!1)),n.$set(i),r!==t[38]&&(S(),r=t[38],D()),(!h||_[0]&128)&&z(e,"placeholder",t[7].placeholderIndex==t[38])},i(b){h||(N(n.$$.fragment,b),h=!0)},o(b){W(n.$$.fragment,b),h=!1},d(b){b&&k(e),q(n),S(),m=!1,d()}}}function Zt(s){let t,e,n,l=[],o=new Map,r,h,m,d,c,w,u,T,M,D,S,b=bt(s[7].tabs);const _=i=>i[36];for(let i=0;i<b.length;i+=1){let f=vt(s,b,i),g=_(f);o.set(g,l[i]=wt(g,f))}return m=new ht({props:{url:dt+"/images/svg/plus.svg",onClick:s[9]}}),c=new ht({props:{url:dt+"/images/svg/swap.svg",onClick:s[20]}}),T=new Et({props:{title:s[2].title,active:!s[5]}}),{c(){t=E("div"),e=E("div"),n=E("div");for(let i=0;i<l.length;i+=1)l[i].c();r=H(),h=E("div"),j(m.$$.fragment),d=H(),j(c.$$.fragment),w=H(),u=E("div"),j(T.$$.fragment),M=H(),D=E("div"),this.h()},l(i){t=y(i,"DIV",{});var f=A(t);e=y(f,"DIV",{class:!0});var g=A(e);n=y(g,"DIV",{class:!0});var F=A(n);for(let J=0;J<l.length;J+=1)l[J].l(F);F.forEach(k),r=O(g),h=y(g,"DIV",{class:!0});var R=A(h);U(m.$$.fragment,R),d=O(R),U(c.$$.fragment,R),R.forEach(k),w=O(g),u=y(g,"DIV",{class:!0});var x=A(u);U(T.$$.fragment,x),x.forEach(k),g.forEach(k),M=O(f),D=y(f,"DIV",{class:!0}),A(D).forEach(k),f.forEach(k),this.h()},h(){v(n,"class","tabs svelte-13jp0dd"),v(h,"class","buttons svelte-13jp0dd"),v(u,"class","clone svelte-13jp0dd"),z(u,"dragging",s[4]),v(e,"class","toolbar svelte-13jp0dd"),v(D,"class","separator svelte-13jp0dd")},m(i,f){Z(i,t,f),C(t,e),C(e,n);for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(n,null);s[19](n),C(e,r),C(e,h),Y(m,h,null),C(h,d),Y(c,h,null),C(e,w),C(e,u),Y(T,u,null),s[21](u),C(t,M),C(t,D),s[22](t),S=!0},p(i,f){f[0]&10626&&(b=bt(i[7].tabs),Ht(),l=jt(l,f,_,1,i,b,o,n,Ut,wt,null,vt),Ot());const g={};f[0]&4&&(g.title=i[2].title),f[0]&32&&(g.active=!i[5]),T.$set(g),(!S||f[0]&16)&&z(u,"dragging",i[4])},i(i){if(!S){for(let f=0;f<b.length;f+=1)N(l[f]);N(m.$$.fragment,i),N(c.$$.fragment,i),N(T.$$.fragment,i),S=!0}},o(i){for(let f=0;f<l.length;f+=1)W(l[f]);W(m.$$.fragment,i),W(c.$$.fragment,i),W(T.$$.fragment,i),S=!1},d(i){i&&k(t);for(let f=0;f<l.length;f+=1)l[f].d();s[19](null),q(m),q(c),q(T),s[21](null),s[22](null)}}}const It=200,Jt=12,at=140,$=70,ct=160,Kt=1600;function Qt(s,t,e){let n;kt(s,L,a=>e(7,n=a));let l,o=[],r=0;Wt(()=>{l.style.setProperty("--tab-max-width",`${at}px`),l.style.setProperty("--tab-min-width",`${$}px`)});const h=(a,p=300)=>{let I;return(...P)=>{clearTimeout(I),I=setTimeout(()=>{a.apply(this,P)},p)}};function m(a){B.setActiveIndex(a),l.children[a].scrollIntoView({behavior:"smooth"})}function d(){B.newTab()}function c(a){if(!l)return;const p=a.getBoundingClientRect().width;ut({duration:ct,easing:Q,onStep:(I,P)=>{n.tabs.length==1?e(0,l.style.gridTemplateColumns=`minmax(${I*$}px, ${I*p}px)`,l):e(0,l.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${I*$}px, ${I*p}px)`,l),e(0,l.scrollLeft=l.scrollWidth,l)},onEnd:()=>{e(0,l.style.gridTemplateColumns="",l)}})}const w=h(()=>{if(!l)return;l.style.setProperty("--tab-max-width",`${at}px`);const a=o[0].getBoundingClientRect().width;ut({duration:ct,easing:Q,onStep:(p,I)=>{l.style.setProperty("--tab-max-width",`${r+p*(a-r)}px`)},onEnd:()=>{l.style.setProperty("--tab-max-width",`${at}px`)}})},Kt);function u(a){r=o[a].getBoundingClientRect().width,a<n.tabs.length-1&&r<at&&(l.style.setProperty("--tab-max-width",`${r}px`),w()),a==n.tabs.length-1?B.setActiveIndex(a-1):a==n.activeIndex&&B.setActiveIndex(a+1),ut({duration:ct,easing:Q,onStep:(p,I)=>{a==0?e(0,l.style.gridTemplateColumns=`minmax(${I*$}px, ${I*r}px)`,l):e(0,l.style.gridTemplateColumns=`repeat(${a}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${I*$}px, ${I*r}px)`,l)},onEnd:()=>{e(0,l.style.gridTemplateColumns="",l),B.removeTab(a)}})}const T=(a,p)=>{const I=l.children[a],P=l.children[p],K=I.getBoundingClientRect().left-P.getBoundingClientRect().left;B.swapTabs(a,p,()=>{_t(I,{duration:It,easing:Q,css:(V,rt)=>`transform: translateX(${K*rt}px);`}),_t(P,{duration:It,easing:Q,css:(V,rt)=>`transform: translateX(${-K*rt}px);`})})};let M=null,D=-1,S={title:"",text:""},b,_,i,f=!1,g=!1,F=0,R=0,x;function J(a,p){e(3,i.style.left=`${a+F}px`,i),e(3,i.style.top=`${_.top}px`,i);let I=x.getBoundingClientRect();if(a<I.left||a>I.right||p<I.top||p>I.bottom){g||(console.log("out"),i.addEventListener("dragstart",yt),i.dispatchEvent(new Event("dragstart"))),e(3,i.style.top=`${p+R}px`,i),e(5,g=!0);return}g&&(e(5,g=!1),console.log("in"));const P=-l.scrollLeft,K=_.width;for(let V=0;V<n.tabs.length;V++)V!=n.placeholderIndex&&a>P+V*K&&a<P+(V+1)*K&&T(V,n.placeholderIndex)}function yt(a){console.warn("drag events not implemented"),a.dataTransfer}function mt(a,p){a.target&&(window.addEventListener("mousemove",pt),window.addEventListener("mouseup",st),window.addEventListener("blur",st),B.setActiveIndex(p),b=a.target,_=b.getBoundingClientRect(),M=[a.clientX,a.clientY],F=_.left-a.clientX,R=_.top-a.clientY,e(3,i.style.width=`${_.width}px`,i),e(3,i.style.left=`${_.left}px`,i),e(3,i.style.top=`${_.top}px`,i),e(2,S={...n.tabs[p]}),D=p)}function pt(a){if(f){J(a.clientX,a.clientY);return}M===null||Math.hypot(M[0]-a.clientX,M[1]-a.clientY)<Jt||(e(4,f=!0),B.setPlaceholderIndex(D),B.setActiveIndex(D))}function st(){window.removeEventListener("mousemove",pt),window.removeEventListener("mouseup",st),window.removeEventListener("blur",st),M=null,e(4,f=!1),e(5,g=!1),D=-1,F=0,R=0,B.setPlaceholderIndex()}const At=a=>u(a),Dt=a=>m(a),Mt=(a,p)=>mt(p,a);function St(a,p){s.$$.not_equal(n.tabs[p].title,a)&&(n.tabs[p].title=a,L.set(n))}function Bt(a,p){X[a?"unshift":"push"](()=>{o[p]=a,e(1,o)})}function Rt(a){X[a?"unshift":"push"](()=>{l=a,e(0,l)})}const Pt=()=>{T(0,1)};function Vt(a){X[a?"unshift":"push"](()=>{i=a,e(3,i)})}function Lt(a){X[a?"unshift":"push"](()=>{x=a,e(6,x)})}return[l,o,S,i,f,g,x,n,m,d,c,u,T,mt,At,Dt,Mt,St,Bt,Rt,Pt,Vt,Lt]}class $t extends et{constructor(t){super(),nt(this,t,Qt,Zt,tt,{},null,[-1,-1])}}function te(s){let t,e,n,l;return{c(){t=E("div"),e=E("textarea"),this.h()},l(o){t=y(o,"DIV",{id:!0,class:!0});var r=A(t);e=y(r,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),A(e).forEach(k),r.forEach(k),this.h()},h(){v(e,"spellcheck","false"),v(e,"name","editor"),v(e,"id","text"),v(e,"class","svelte-7cpmmf"),v(t,"id","editor"),v(t,"class","svelte-7cpmmf")},m(o,r){Z(o,t,r),C(t,e),it(e,s[0]),n||(l=G(e,"input",s[1]),n=!0)},p(o,[r]){r&1&&it(e,o[0])},i:ot,o:ot,d(o){o&&k(t),n=!1,l()}}}function ee(s,t,e){let{text:n}=t;function l(){n=this.value,e(0,n)}return s.$$set=o=>{"text"in o&&e(0,n=o.text)},[n,l]}class ne extends et{constructor(t){super(),nt(this,t,ee,te,tt,{text:0})}}function se(s){let t,e,n,l,o,r;e=new $t({});function h(d){s[2](d)}let m={};return s[0].text!==void 0&&(m.text=s[0].text),l=new ne({props:m}),X.push(()=>Ct(l,"text",h)),{c(){t=E("div"),j(e.$$.fragment),n=H(),j(l.$$.fragment),this.h()},l(d){t=y(d,"DIV",{class:!0});var c=A(t);U(e.$$.fragment,c),n=O(c),U(l.$$.fragment,c),c.forEach(k),this.h()},h(){v(t,"class","container svelte-16qa0xo")},m(d,c){Z(d,t,c),Y(e,t,null),C(t,n),Y(l,t,null),r=!0},p(d,[c]){const w={};!o&&c&1&&(o=!0,w.text=d[0].text,Tt(()=>o=!1)),l.$set(w)},i(d){r||(N(e.$$.fragment,d),N(l.$$.fragment,d),r=!0)},o(d){W(e.$$.fragment,d),W(l.$$.fragment,d),r=!1},d(d){d&&k(t),q(e),q(l)}}}function le(s,t,e){let n,l;kt(s,L,r=>e(1,l=r)),B.newTab({title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.19"});function o(r){s.$$.not_equal(n.text,r)&&(n.text=r,e(0,n),e(1,l))}return s.$$.update=()=>{s.$$.dirty&2&&e(0,n=l.tabs.length>0?l.tabs[l.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[n,l,o]}class ue extends et{constructor(t){super(),nt(this,t,le,se,tt,{})}}export{ue as component};
