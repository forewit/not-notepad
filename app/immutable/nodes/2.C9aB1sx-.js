import{r as _e,s as $,n as Y,i as ae,b as Z,c as ve,x as Ve,y as ke}from"../chunks/scheduler._wRqQmaL.js";import{l as N,n as O,S as x,i as ee,e as D,c as M,a as S,d as _,o as w,p as te,g as L,h as A,z as G,A as Be,s as X,u as j,f as H,v as J,B as U,C as le,w as K,D as fe,x as Q,q as we,m as Ie,k as ne,E as Ee}from"../chunks/index.lnOodMs8.js";import{b as oe,w as We}from"../chunks/paths.IbGgb7Cw.js";function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Re(t,e){N(t,1,1,()=>{e.delete(t.key)})}function Ne(t,e,n,s,l,i,o,m,u,f,a,g){let c=t.length,b=i.length,p=c;const E={};for(;p--;)E[t[p].key]=p;const T=[],v=new Map,d=new Map,h=[];for(p=b;p--;){const k=g(l,i,p),V=n(k);let B=o.get(V);B?h.push(()=>B.p(k,e)):(B=f(V,k),B.c()),v.set(V,T[p]=B),V in E&&d.set(V,Math.abs(p-E[V]))}const y=new Set,q=new Set;function W(k){O(k,1),k.m(m,a),o.set(k.key,k),a=k.first,b--}for(;c&&b;){const k=T[b-1],V=t[c-1],B=k.key,F=V.key;k===V?(a=k.first,c--,b--):v.has(F)?!o.has(B)||y.has(B)?W(k):q.has(F)?c--:d.get(B)>d.get(F)?(q.add(B),W(k)):(y.add(F),c--):(u(V,o),c--)}for(;c--;){const k=t[c];v.has(k.key)||u(k,o)}for(;b;)W(T[b-1]);return _e(h),T}function Oe(t){let e,n,s,l;return{c(){e=D("button"),n=D("div"),this.h()},l(i){e=M(i,"BUTTON",{class:!0});var o=S(e);n=M(o,"DIV",{class:!0,style:!0}),S(n).forEach(_),o.forEach(_),this.h()},h(){w(n,"class","icon svelte-fsrv9v"),te(n,"-webkit-mask","url("+t[1]+") no-repeat center / contain"),te(n,"mask","url("+t[1]+") no-repeat center / contain"),w(e,"class","svelte-fsrv9v")},m(i,o){L(i,e,o),A(e,n),s||(l=G(e,"click",Be(function(){ae(t[0])&&t[0].apply(this,arguments)})),s=!0)},p(i,[o]){t=i,o&2&&te(n,"-webkit-mask","url("+t[1]+") no-repeat center / contain"),o&2&&te(n,"mask","url("+t[1]+") no-repeat center / contain")},i:Y,o:Y,d(i){i&&_(e),s=!1,l()}}}function Le(t,e,n){let{onClick:s=()=>{}}=e,{url:l=""}=e;return t.$$set=i=>{"onClick"in i&&n(0,s=i.onClick),"url"in i&&n(1,l=i.url)},[s,l]}class re extends x{constructor(e){super(),ee(this,e,Le,Oe,$,{onClick:0,url:1})}}function Pe(t){let e,n,s,l,i,o,m,u,f;return o=new re({props:{url:oe+"/images/svg/cancel.svg",onClick:t[2]}}),{c(){e=D("div"),n=D("button"),s=D("input"),l=X(),i=D("div"),j(o.$$.fragment),this.h()},l(a){e=M(a,"DIV",{class:!0});var g=S(e);n=M(g,"BUTTON",{class:!0});var c=S(n);s=M(c,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),l=H(c),i=M(c,"DIV",{class:!0});var b=S(i);J(o.$$.fragment,b),b.forEach(_),c.forEach(_),g.forEach(_),this.h()},h(){w(s,"autocorrect","off"),w(s,"autocomplete","off"),w(s,"spellcheck","false"),w(s,"type","text"),w(s,"class","svelte-1b8k07a"),w(i,"class","close-button svelte-1b8k07a"),w(n,"class","tab svelte-1b8k07a"),U(n,"active",t[1]),w(e,"class","container svelte-1b8k07a")},m(a,g){L(a,e,g),A(e,n),A(n,s),t[6](s),le(s,t[0]),A(n,l),A(n,i),K(o,i,null),m=!0,u||(f=[G(s,"input",t[7]),G(n,"dblclick",fe(t[8])),G(n,"click",function(){ae(t[3])&&t[3].apply(this,arguments)}),G(n,"mousedown",fe(function(){ae(t[4])&&t[4].apply(this,arguments)}))],u=!0)},p(a,[g]){t=a,g&1&&s.value!==t[0]&&le(s,t[0]);const c={};g&4&&(c.onClick=t[2]),o.$set(c),(!m||g&2)&&U(n,"active",t[1])},i(a){m||(O(o.$$.fragment,a),m=!0)},o(a){N(o.$$.fragment,a),m=!1},d(a){a&&_(e),t[6](null),Q(o),u=!1,_e(f)}}}function Ue(t,e,n){let{title:s=""}=e,{active:l=!1}=e,{onClose:i=()=>{}}=e,{onClick:o=()=>{}}=e,{onMousedown:m=c=>{}}=e,u;function f(c){Z[c?"unshift":"push"](()=>{u=c,n(5,u)})}function a(){s=this.value,n(0,s)}const g=()=>u.select();return t.$$set=c=>{"title"in c&&n(0,s=c.title),"active"in c&&n(1,l=c.active),"onClose"in c&&n(2,i=c.onClose),"onClick"in c&&n(3,o=c.onClick),"onMousedown"in c&&n(4,m=c.onMousedown)},[s,l,i,o,m,u,f,a,g]}class qe extends x{constructor(e){super(),ee(this,e,Ue,Pe,$,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}const P=We({tabs:[],activeIndex:0,placeholderIndex:-1}),R={newTab:t=>{const{title:e="Untitled",text:n="",callback:s=()=>{}}=t||{};P.update(l=>(l.tabs.push({title:e,text:n}),l.activeIndex=l.tabs.length-1,l)),s()},removeTab:t=>{P.update(e=>(e.tabs.splice(t,1),e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1),e))},setActiveIndex:t=>{P.update(e=>(e.activeIndex=t<0||t>=e.tabs.length?0:t,e))},setPlaceholderIndex:t=>{P.update(e=>(e.placeholderIndex=t===void 0||t<0||t>=e.tabs.length?-1:t,e))},swapTabs:(t,e,n=()=>{})=>{P.update(s=>{const l=s.tabs[t];return s.tabs[t]=s.tabs[e],s.tabs[e]=l,s.activeIndex==t?s.activeIndex=e:s.activeIndex==e&&(s.activeIndex=t),s.placeholderIndex==t?s.placeholderIndex=e:s.placeholderIndex==e&&(s.placeholderIndex=t),s}),n()}};function ce(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function he(t){const e=t-1;return e*e*e+1}const se=(t,e)=>{const{duration:n=300,easing:s=ce,onEnd:l=()=>{},onStep:i=()=>{},css:o}=e;let m;function u(f){m===void 0&&(m=f);const a=s((f-m)/n),g=1-a;a<1?(t.style.cssText=o(a,g),i(a,g),requestAnimationFrame(u)):(t.style.cssText="",l())}requestAnimationFrame(u)};function ge(t,e,n){const s=t.slice();return s[32]=e[n],s[33]=e,s[34]=n,s}function Xe(t){let e,n,s,l,i,o,m;function u(){return t[13](t[34])}function f(){return t[14](t[34])}function a(...b){return t[15](t[34],...b)}function g(b){t[16](b,t[34])}let c={active:t[6].activeIndex==t[34],onClose:u,onClick:f,onMousedown:a};return t[6].tabs[t[34]].title!==void 0&&(c.title=t[6].tabs[t[34]].title),n=new qe({props:c}),Z.push(()=>Ee(n,"title",g)),{c(){e=D("div"),j(n.$$.fragment),l=X(),this.h()},l(b){e=M(b,"DIV",{class:!0});var p=S(e);J(n.$$.fragment,p),l=H(p),p.forEach(_),this.h()},h(){w(e,"class","tab-container svelte-2l1k8y"),U(e,"lockMaxWidth",t[1]>0),U(e,"unlockingWidth",t[2])},m(b,p){L(b,e,p),K(n,e,null),A(e,l),i=!0,o||(m=Ve(t[9].call(null,e)),o=!0)},p(b,p){t=b;const E={};p[0]&64&&(E.active=t[6].activeIndex==t[34]),p[0]&64&&(E.onClose=u),p[0]&64&&(E.onClick=f),p[0]&64&&(E.onMousedown=a),!s&&p[0]&64&&(s=!0,E.title=t[6].tabs[t[34]].title,ke(()=>s=!1)),n.$set(E),(!i||p[0]&2)&&U(e,"lockMaxWidth",t[1]>0),(!i||p[0]&4)&&U(e,"unlockingWidth",t[2])},i(b){i||(O(n.$$.fragment,b),i=!0)},o(b){N(n.$$.fragment,b),i=!1},d(b){b&&_(e),Q(n),o=!1,m()}}}function He(t){let e;return{c(){e=D("div"),this.h()},l(n){e=M(n,"DIV",{class:!0}),S(e).forEach(_),this.h()},h(){w(e,"class","tab-container placeholder svelte-2l1k8y"),U(e,"lockMaxWidth",t[1]>0)},m(n,s){L(n,e,s)},p(n,s){s[0]&2&&U(e,"lockMaxWidth",n[1]>0)},i:Y,o:Y,d(n){n&&_(e)}}}function me(t,e){let n,s,l,i,o;const m=[He,Xe],u=[];function f(a,g){return a[6].placeholderIndex==a[34]?0:1}return s=f(e),l=u[s]=m[s](e),{key:t,first:null,c(){n=ne(),l.c(),i=ne(),this.h()},l(a){n=ne(),l.l(a),i=ne(),this.h()},h(){this.first=n},m(a,g){L(a,n,g),u[s].m(a,g),L(a,i,g),o=!0},p(a,g){e=a;let c=s;s=f(e),s===c?u[s].p(e,g):(we(),N(u[c],1,1,()=>{u[c]=null}),Ie(),l=u[s],l?l.p(e,g):(l=u[s]=m[s](e),l.c()),O(l,1),l.m(i.parentNode,i))},i(a){o||(O(l),o=!0)},o(a){N(l),o=!1},d(a){a&&(_(n),_(i)),u[s].d(a)}}}function be(t){let e;return{c(){e=D("div"),this.h()},l(n){e=M(n,"DIV",{draggable:!0,class:!0}),S(e).forEach(_),this.h()},h(){w(e,"draggable","true"),w(e,"class","cloned-tab tab-container svelte-2l1k8y")},m(n,s){L(n,e,s),t[19](e)},p:Y,d(n){n&&_(e),t[19](null)}}}function Ye(t){let e,n,s,l=[],i=new Map,o,m,u,f,a,g,c,b,p,E=de(t[6].tabs);const T=d=>d[32];for(let d=0;d<E.length;d+=1){let h=ge(t,E,d),y=T(h);i.set(y,l[d]=me(y,h))}u=new re({props:{url:oe+"/images/svg/plus.svg",onClick:t[8]}}),a=new re({props:{url:oe+"/images/svg/swap.svg",onClick:t[18]}});let v=t[4]&&be(t);return{c(){e=D("div"),n=D("div"),s=D("div");for(let d=0;d<l.length;d+=1)l[d].c();o=X(),m=D("div"),j(u.$$.fragment),f=X(),j(a.$$.fragment),g=X(),c=D("div"),b=X(),v&&v.c(),this.h()},l(d){e=M(d,"DIV",{});var h=S(e);n=M(h,"DIV",{class:!0});var y=S(n);s=M(y,"DIV",{class:!0});var q=S(s);for(let k=0;k<l.length;k+=1)l[k].l(q);q.forEach(_),o=H(y),m=M(y,"DIV",{class:!0});var W=S(m);J(u.$$.fragment,W),f=H(W),J(a.$$.fragment,W),W.forEach(_),y.forEach(_),g=H(h),c=M(h,"DIV",{class:!0}),S(c).forEach(_),b=H(h),v&&v.l(h),h.forEach(_),this.h()},h(){w(s,"class","tabs svelte-2l1k8y"),w(m,"class","buttons svelte-2l1k8y"),w(n,"class","toolbar svelte-2l1k8y"),w(c,"class","separator svelte-2l1k8y")},m(d,h){L(d,e,h),A(e,n),A(n,s);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(s,null);t[17](s),A(n,o),A(n,m),K(u,m,null),A(m,f),K(a,m,null),A(e,g),A(e,c),A(e,b),v&&v.m(e,null),t[20](e),p=!0},p(d,h){h[0]&5318&&(E=de(d[6].tabs),we(),l=Ne(l,h,T,1,d,E,i,s,Re,me,null,ge),Ie()),d[4]?v?v.p(d,h):(v=be(d),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i(d){if(!p){for(let h=0;h<E.length;h+=1)O(l[h]);O(u.$$.fragment,d),O(a.$$.fragment,d),p=!0}},o(d){for(let h=0;h<l.length;h+=1)N(l[h]);N(u.$$.fragment,d),N(a.$$.fragment,d),p=!1},d(d){d&&_(e);for(let h=0;h<l.length;h+=1)l[h].d();t[17](null),Q(u),Q(a),v&&v.d(),t[20](null)}}}const pe=200,Fe=120,ze=120,Ge=1600,Ze=12;function je(t,e,n){let s;ve(t,P,r=>n(6,s=r));let l,i=0,o=!1;const m=(r,I=300)=>{let C;return(...z)=>{clearTimeout(C),C=setTimeout(()=>{r.apply(this,z)},I)}};function u(r){R.setActiveIndex(r),l.children[r].scrollIntoView({behavior:"smooth"})}function f(){R.newTab()}function a(r){se(r,{duration:Fe,easing:he,css:(I,C)=>`width: ${I*140}px; min-width: 0;`})}const g=m(()=>{n(2,o=!0),n(1,i=0),setTimeout(()=>{n(2,o=!1)},200)},Ge);function c(r){if(s.tabs.length==1)return;r<s.tabs.length-1&&(n(1,i=l.children[0].clientWidth),l.style.setProperty("--lock-width",`${i}px`),g()),r==s.activeIndex&&R.setActiveIndex(r-1);let I=l.children[0].clientWidth;se(l.children[r],{duration:ze,easing:he,css:(C,z)=>`width: ${I*z}px; min-width: 0; margin-left: calc(${-C} * var(--tab-gaps));`,onEnd:()=>{R.removeTab(r)}})}const b=(r,I)=>{const C=l.children[r],z=l.children[I],ue=C.getBoundingClientRect().left-z.getBoundingClientRect().left;R.swapTabs(r,I,()=>{se(C,{duration:pe,easing:ce,css:(Se,ie)=>`transform: translateX(${ue*ie}px);`}),se(z,{duration:pe,easing:ce,css:(Se,ie)=>`transform: translateX(${-ue*ie}px);`})})};let p=null,E=-1,T,v=!1,d=!1,h;function y(r,I){console.log("weee!!!!");let C=h.getBoundingClientRect();if(r<C.left||r>C.right||I<C.top||I>C.bottom){d||(n(3,T.style.cssText="",T),T.addEventListener("dragstart",q),T.dispatchEvent(new Event("dragstart"))),d=!0;return}d=!1}function q(r){var I,C;console.log("dragstart"),!(!r.dataTransfer||!T)&&((I=r.dataTransfer)==null||I.setDragImage(T,0,0),(C=r.dataTransfer)==null||C.setData("text/plain",T.id),r.preventDefault())}function W(r,I){if(!r.target)return;let C=r.target;window.addEventListener("mousemove",k),window.addEventListener("mouseup",V),window.addEventListener("blur",V),R.setActiveIndex(I),n(3,T=C.cloneNode(!0)),p=[r.clientX,r.clientY],C.getBoundingClientRect().left-r.clientX,C.getBoundingClientRect().top-r.clientY,E=I}function k(r){if(v){y(r.clientX,r.clientY);return}p===null||Math.hypot(p[0]-r.clientX,p[1]-r.clientY)<Ze||(n(4,v=!0),R.setPlaceholderIndex(E),R.setActiveIndex(E),T.classList.add("cloned-tab"),r.preventDefault(),console.log("dragging tab: ",E))}function V(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",V),window.removeEventListener("blur",V),p=null,n(4,v=!1),d=!1,E=-1,R.setPlaceholderIndex(),console.log("stop dragging")}const B=r=>c(r),F=r=>u(r),Te=(r,I)=>W(I,r);function Ce(r,I){t.$$.not_equal(s.tabs[I].title,r)&&(s.tabs[I].title=r,P.set(s))}function ye(r){Z[r?"unshift":"push"](()=>{l=r,n(0,l)})}const De=()=>{b(0,1)};function Me(r){Z[r?"unshift":"push"](()=>{T=r,n(3,T)})}function Ae(r){Z[r?"unshift":"push"](()=>{h=r,n(5,h)})}return[l,i,o,T,v,h,s,u,f,a,c,b,W,B,F,Te,Ce,ye,De,Me,Ae]}class Je extends x{constructor(e){super(),ee(this,e,je,Ye,$,{},null,[-1,-1])}}function Ke(t){let e,n,s,l;return{c(){e=D("div"),n=D("textarea"),this.h()},l(i){e=M(i,"DIV",{id:!0,class:!0});var o=S(e);n=M(o,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),S(n).forEach(_),o.forEach(_),this.h()},h(){w(n,"spellcheck","false"),w(n,"name","editor"),w(n,"id","text"),w(n,"class","svelte-7cpmmf"),w(e,"id","editor"),w(e,"class","svelte-7cpmmf")},m(i,o){L(i,e,o),A(e,n),le(n,t[0]),s||(l=G(n,"input",t[1]),s=!0)},p(i,[o]){o&1&&le(n,i[0])},i:Y,o:Y,d(i){i&&_(e),s=!1,l()}}}function Qe(t,e,n){let{text:s}=e;function l(){s=this.value,n(0,s)}return t.$$set=i=>{"text"in i&&n(0,s=i.text)},[s,l]}class $e extends x{constructor(e){super(),ee(this,e,Qe,Ke,$,{text:0})}}function xe(t){let e,n,s,l,i,o;n=new Je({});function m(f){t[1](f)}let u={};return t[0].tabs[t[0].activeIndex].text!==void 0&&(u.text=t[0].tabs[t[0].activeIndex].text),l=new $e({props:u}),Z.push(()=>Ee(l,"text",m)),{c(){e=D("div"),j(n.$$.fragment),s=X(),j(l.$$.fragment),this.h()},l(f){e=M(f,"DIV",{class:!0});var a=S(e);J(n.$$.fragment,a),s=H(a),J(l.$$.fragment,a),a.forEach(_),this.h()},h(){w(e,"class","container svelte-16qa0xo")},m(f,a){L(f,e,a),K(n,e,null),A(e,s),K(l,e,null),o=!0},p(f,[a]){const g={};!i&&a&1&&(i=!0,g.text=f[0].tabs[f[0].activeIndex].text,ke(()=>i=!1)),l.$set(g)},i(f){o||(O(n.$$.fragment,f),O(l.$$.fragment,f),o=!0)},o(f){N(n.$$.fragment,f),N(l.$$.fragment,f),o=!1},d(f){f&&_(e),Q(n),Q(l)}}}function et(t,e,n){let s;ve(t,P,i=>n(0,s=i)),R.newTab({title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.18"});function l(i){t.$$.not_equal(s.tabs[s.activeIndex].text,i)&&(s.tabs[s.activeIndex].text=i,P.set(s))}return[s,l]}class lt extends x{constructor(e){super(),ee(this,e,et,xe,$,{})}}export{lt as component};
