import{s as b,e as w,u as D,g as E,f as T,o as C}from"../chunks/scheduler.aSSXveB9.js";import{S as L,i as M,e as f,s as j,B as A,c as _,d as c,f as I,a as h,l as d,h as v,g,r as O,p as R}from"../chunks/index.NmCZx5Gl.js";import{a as U,b as S,d as y,c as $,g as V,s as k}from"../chunks/authStore.Bwvl2Oqa.js";const q=!0,x="always",H=Object.freeze(Object.defineProperty({__proto__:null,prerender:q,trailingSlash:x},Symbol.toStringTag,{value:"Module"}));function z(i){let o,l,n,r,a;const u=i[1].default,t=w(u,i,i[0],null);return{c(){o=f("meta"),l=j(),n=f("div"),r=f("div"),t&&t.c(),this.h()},l(e){const s=A("svelte-1xk05yi",document.head);o=_(s,"META",{name:!0,content:!0}),s.forEach(c),l=I(e),n=_(e,"DIV",{class:!0});var m=h(n);r=_(m,"DIV",{class:!0});var p=h(r);t&&t.l(p),p.forEach(c),m.forEach(c),this.h()},h(){d(o,"name","viewport"),d(o,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),d(r,"class","content svelte-ilt6a"),d(n,"class","container svelte-ilt6a")},m(e,s){v(document.head,o),g(e,l,s),g(e,n,s),v(n,r),t&&t.m(r,null),a=!0},p(e,[s]){t&&t.p&&(!a||s&1)&&D(t,u,e,e[0],a?T(u,e[0],s,null):E(e[0]),null)},i(e){a||(O(t,e),a=!0)},o(e){R(t,e),a=!1},d(e){e&&(c(l),c(n)),c(o),t&&t.d(e)}}}function B(i,o,l){let{$$slots:n={},$$scope:r}=o;return C(()=>{U.onAuthStateChanged(async a=>{if(!a){S.update(s=>({...s,isLoading:!1,currentUser:a}));return}const u=y($,"users",a.uid),t=await V(u);let e={text:""};if(t.exists())console.log("Fetching firestore user doc..."),e=t.data();else{console.log("Creating firestore user doc...");const s=y($,"users",a.uid);await k(s,e,{merge:!0})}S.update(s=>({...s,isLoading:!1,currentUser:a,data:e}))})}),i.$$set=a=>{"$$scope"in a&&l(0,r=a.$$scope)},[r,n]}class J extends L{constructor(o){super(),M(this,o,B,z,b,{})}}export{J as component,H as universal};
