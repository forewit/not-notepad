import{s as K,n as lt,j as ut,r as Rt,b as x,c as wt,o as Vt,a as xt,y as It}from"../chunks/scheduler.enZu1EuY.js";import{S as Q,i as $,e as T,c as E,a as A,d as w,l as v,u as nt,g as G,h as k,m as z,C as Nt,s as N,x as L,f as X,y as W,D as F,E as at,z as H,F as ht,p as P,o as R,A as O,v as Xt,r as Lt,G as yt}from"../chunks/index.CRfKgsjb.js";import{e as gt,u as Wt,o as Ht,a as it,b as pt,c as Z}from"../chunks/animate.CysUV05B.js";import{b as ct,w as Ot}from"../chunks/paths.DRI2fKZC.js";function Ut(s){let t,e,n,l;return{c(){t=T("button"),e=T("div"),this.h()},l(o){t=E(o,"BUTTON",{class:!0});var i=A(t);e=E(i,"DIV",{class:!0,style:!0}),A(e).forEach(w),i.forEach(w),this.h()},h(){v(e,"class","icon svelte-fsrv9v"),nt(e,"-webkit-mask","url("+s[1]+") no-repeat center / contain"),nt(e,"mask","url("+s[1]+") no-repeat center / contain"),v(t,"class","svelte-fsrv9v")},m(o,i){G(o,t,i),k(t,e),n||(l=z(t,"click",Nt(function(){ut(s[0])&&s[0].apply(this,arguments)})),n=!0)},p(o,[i]){s=o,i&2&&nt(e,"-webkit-mask","url("+s[1]+") no-repeat center / contain"),i&2&&nt(e,"mask","url("+s[1]+") no-repeat center / contain")},i:lt,o:lt,d(o){o&&w(t),n=!1,l()}}}function Yt(s,t,e){let{onClick:n=()=>{}}=t,{url:l=""}=t;return s.$$set=o=>{"onClick"in o&&e(0,n=o.onClick),"url"in o&&e(1,l=o.url)},[n,l]}class ft extends Q{constructor(t){super(),$(this,t,Yt,Ut,K,{onClick:0,url:1})}}function zt(s){let t,e,n,l,o,i,h,g,d;return i=new ft({props:{url:ct+"/images/svg/cancel.svg",onClick:s[2]}}),{c(){t=T("div"),e=T("button"),n=T("input"),l=N(),o=T("div"),L(i.$$.fragment),this.h()},l(f){t=E(f,"DIV",{class:!0});var _=A(t);e=E(_,"BUTTON",{class:!0});var c=A(e);n=E(c,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),l=X(c),o=E(c,"DIV",{class:!0});var C=A(o);W(i.$$.fragment,C),C.forEach(w),c.forEach(w),_.forEach(w),this.h()},h(){v(n,"autocorrect","off"),v(n,"autocomplete","off"),v(n,"spellcheck","false"),v(n,"type","text"),v(n,"class","svelte-luvzq6"),v(o,"class","close-button svelte-luvzq6"),v(e,"class","tab svelte-luvzq6"),F(e,"active",s[1]),v(t,"class","container svelte-luvzq6")},m(f,_){G(f,t,_),k(t,e),k(e,n),s[6](n),at(n,s[0]),k(e,l),k(e,o),H(i,o,null),h=!0,g||(d=[z(n,"input",s[7]),z(e,"dblclick",ht(s[8])),z(e,"click",function(){ut(s[3])&&s[3].apply(this,arguments)}),z(e,"mousedown",ht(function(){ut(s[4])&&s[4].apply(this,arguments)}))],g=!0)},p(f,[_]){s=f,_&1&&n.value!==s[0]&&at(n,s[0]);const c={};_&4&&(c.onClick=s[2]),i.$set(c),(!h||_&2)&&F(e,"active",s[1])},i(f){h||(P(i.$$.fragment,f),h=!0)},o(f){R(i.$$.fragment,f),h=!1},d(f){f&&w(t),s[6](null),O(i),g=!1,Rt(d)}}}function Ft(s,t,e){let{title:n=""}=t,{active:l=!1}=t,{onClose:o=()=>{}}=t,{onClick:i=()=>{}}=t,{onMousedown:h=c=>{}}=t,g;function d(c){x[c?"unshift":"push"](()=>{g=c,e(5,g)})}function f(){n=this.value,e(0,n)}const _=()=>g.select();return s.$$set=c=>{"title"in c&&e(0,n=c.title),"active"in c&&e(1,l=c.active),"onClose"in c&&e(2,o=c.onClose),"onClick"in c&&e(3,i=c.onClick),"onMousedown"in c&&e(4,h=c.onMousedown)},[n,l,o,i,h,g,d,f,_]}class kt extends Q{constructor(t){super(),$(this,t,Ft,zt,K,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}const q=Ot({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:s=>{const{title:t="Untitled",text:e="",callback:n=()=>{}}=s||{};q.update(l=>(l.tabs.push({title:t,text:e}),l.activeIndex=l.tabs.length-1,l)),n()},removeTab:s=>{q.update(t=>(t.tabs.splice(s,1),s==t.activeIndex-1?t.activeIndex=Math.max(0,s):t.activeIndex=Math.min(t.activeIndex,t.tabs.length-1),t))},setActiveIndex:s=>{q.update(t=>(s<0?t.activeIndex=0:s>=t.tabs.length?t.activeIndex=t.tabs.length-1:t.activeIndex=s,t))},setPlaceholderIndex:s=>{q.update(t=>(t.placeholderIndex=s===void 0||s<0||s>=t.tabs.length?-1:s,t))},swapTabs:(s,t,e=()=>{})=>{q.update(n=>{const l=n.tabs[s];return n.tabs[s]=n.tabs[t],n.tabs[t]=l,n.activeIndex==s?n.activeIndex=t:n.activeIndex==t&&(n.activeIndex=s),n.placeholderIndex==s?n.placeholderIndex=t:n.placeholderIndex==t&&(n.placeholderIndex=s),n}),e()}};function bt(s,t,e){const n=s.slice();return n[34]=t[e],n[35]=t,n[36]=e,n}function vt(s,t){let e,n,l,o,i=t[36],h,g,d;function f(){return t[12](t[36])}function _(){return t[13](t[36])}function c(...r){return t[14](t[36],...r)}function C(r){t[15](r,t[36])}let M={active:t[5].activeIndex==t[36],onClose:f,onClick:_,onMousedown:c};t[5].tabs[t[36]].title!==void 0&&(M.title=t[5].tabs[t[36]].title),n=new kt({props:M}),x.push(()=>yt(n,"title",C));const D=()=>t[16](e,i),S=()=>t[16](null,i);return{key:s,first:null,c(){e=T("div"),L(n.$$.fragment),o=N(),this.h()},l(r){e=E(r,"DIV",{class:!0});var I=A(e);W(n.$$.fragment,I),o=X(I),I.forEach(w),this.h()},h(){v(e,"class","tab-container svelte-ytq9yw"),F(e,"placeholder",t[5].placeholderIndex==t[36]),this.first=e},m(r,I){G(r,e,I),H(n,e,null),k(e,o),D(),h=!0,g||(d=xt(t[8].call(null,e)),g=!0)},p(r,I){t=r;const u={};I[0]&32&&(u.active=t[5].activeIndex==t[36]),I[0]&32&&(u.onClose=f),I[0]&32&&(u.onClick=_),I[0]&32&&(u.onMousedown=c),!l&&I[0]&32&&(l=!0,u.title=t[5].tabs[t[36]].title,It(()=>l=!1)),n.$set(u),i!==t[36]&&(S(),i=t[36],D()),(!h||I[0]&32)&&F(e,"placeholder",t[5].placeholderIndex==t[36])},i(r){h||(P(n.$$.fragment,r),h=!0)},o(r){R(n.$$.fragment,r),h=!1},d(r){r&&w(e),O(n),S(),g=!1,d()}}}function Gt(s){let t,e,n,l=[],o=new Map,i,h,g,d,f,_,c,C,M,D,S,r=gt(s[5].tabs);const I=u=>u[34];for(let u=0;u<r.length;u+=1){let m=bt(s,r,u),y=I(m);o.set(y,l[u]=vt(y,m))}return g=new ft({props:{url:ct+"/images/svg/plus.svg",onClick:s[7]}}),f=new ft({props:{url:ct+"/images/svg/swap.svg",onClick:s[18]}}),C=new kt({props:{title:"title",active:!0}}),{c(){t=T("div"),e=T("div"),n=T("div");for(let u=0;u<l.length;u+=1)l[u].c();i=N(),h=T("div"),L(g.$$.fragment),d=N(),L(f.$$.fragment),_=N(),c=T("div"),L(C.$$.fragment),M=N(),D=T("div"),this.h()},l(u){t=E(u,"DIV",{});var m=A(t);e=E(m,"DIV",{class:!0});var y=A(e);n=E(y,"DIV",{class:!0});var V=A(n);for(let Y=0;Y<l.length;Y+=1)l[Y].l(V);V.forEach(w),i=X(y),h=E(y,"DIV",{class:!0});var U=A(h);W(g.$$.fragment,U),d=X(U),W(f.$$.fragment,U),U.forEach(w),_=X(y),c=E(y,"DIV",{class:!0});var tt=A(c);W(C.$$.fragment,tt),tt.forEach(w),y.forEach(w),M=X(m),D=E(m,"DIV",{class:!0}),A(D).forEach(w),m.forEach(w),this.h()},h(){v(n,"class","tabs svelte-ytq9yw"),v(h,"class","buttons svelte-ytq9yw"),v(c,"class","clone svelte-ytq9yw"),F(c,"dragging",s[3]),v(e,"class","toolbar svelte-ytq9yw"),v(D,"class","separator svelte-ytq9yw")},m(u,m){G(u,t,m),k(t,e),k(e,n);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(n,null);s[17](n),k(e,i),k(e,h),H(g,h,null),k(h,d),H(f,h,null),k(e,_),k(e,c),H(C,c,null),s[19](c),k(t,M),k(t,D),s[20](t),S=!0},p(u,m){m[0]&2658&&(r=gt(u[5].tabs),Xt(),l=Wt(l,m,I,1,u,r,o,n,Ht,vt,null,bt),Lt()),(!S||m[0]&8)&&F(c,"dragging",u[3])},i(u){if(!S){for(let m=0;m<r.length;m+=1)P(l[m]);P(g.$$.fragment,u),P(f.$$.fragment,u),P(C.$$.fragment,u),S=!0}},o(u){for(let m=0;m<l.length;m+=1)R(l[m]);R(g.$$.fragment,u),R(f.$$.fragment,u),R(C.$$.fragment,u),S=!1},d(u){u&&w(t);for(let m=0;m<l.length;m+=1)l[m].d();s[17](null),O(g),O(f),O(C),s[19](null),s[20](null)}}}const _t=200,jt=1,st=140,J=70,rt=160,Zt=1600;function Jt(s,t,e){let n;wt(s,q,a=>e(5,n=a));let l,o=[],i=0;Vt(()=>{l.style.setProperty("--tab-max-width",`${st}px`),l.style.setProperty("--tab-min-width",`${J}px`)});const h=(a,b=300)=>{let p;return(...j)=>{clearTimeout(p),p=setTimeout(()=>{a.apply(this,j)},b)}};function g(a){B.setActiveIndex(a),l.children[a].scrollIntoView({behavior:"smooth"})}function d(){B.newTab()}function f(a){if(!l)return;const b=a.getBoundingClientRect().width;it({duration:rt,easing:Z,onStep:(p,j)=>{n.tabs.length==1?e(0,l.style.gridTemplateColumns=`minmax(${p*J}px, ${p*b}px)`,l):e(0,l.style.gridTemplateColumns=`repeat(${n.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*J}px, ${p*b}px)`,l),e(0,l.scrollLeft=l.scrollWidth,l)},onEnd:()=>{e(0,l.style.gridTemplateColumns="",l)}})}const _=h(()=>{if(!l)return;l.style.setProperty("--tab-max-width",`${st}px`);const a=o[0].getBoundingClientRect().width;it({duration:rt,easing:Z,onStep:(b,p)=>{l.style.setProperty("--tab-max-width",`${i+b*(a-i)}px`)},onEnd:()=>{l.style.setProperty("--tab-max-width",`${st}px`)}})},Zt);function c(a){n.tabs.length!=1&&(i=o[a].getBoundingClientRect().width,a<n.tabs.length-1&&i<st&&(l.style.setProperty("--tab-max-width",`${i}px`),_()),a==n.tabs.length-1?B.setActiveIndex(a-1):a==n.activeIndex&&B.setActiveIndex(a+1),it({duration:rt,easing:Z,onStep:(b,p)=>{a==0?e(0,l.style.gridTemplateColumns=`minmax(${p*J}px, ${p*i}px)`,l):e(0,l.style.gridTemplateColumns=`repeat(${a}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*J}px, ${p*i}px)`,l)},onEnd:()=>{e(0,l.style.gridTemplateColumns="",l),B.removeTab(a)}}))}const C=(a,b)=>{const p=l.children[a],j=l.children[b],mt=p.getBoundingClientRect().left-j.getBoundingClientRect().left;B.swapTabs(a,b,()=>{pt(p,{duration:_t,easing:Z,css:(Pt,ot)=>`transform: translateX(${mt*ot}px);`}),pt(j,{duration:_t,easing:Z,css:(Pt,ot)=>`transform: translateX(${-mt*ot}px);`})})};let M=null,D=-1,S,r,I=!1,u=!1,m=0,y=0,V;function U(a,b){console.log("weee!!!!"),e(2,r.style.left=`${a+m}px`,r),e(2,r.style.bottom="0",r);let p=V.getBoundingClientRect();if(a<p.left||a>p.right||b<p.top||b>p.bottom){u||(r.addEventListener("dragstart",tt),r.dispatchEvent(new Event("dragstart"))),e(2,r.style.bottom=`${-b+y}px`,r),u=!0;return}u=!1}function tt(a){console.warn("drag events not implemented"),a.dataTransfer}function Y(a,b){if(!a.target)return;window.addEventListener("mousemove",dt),window.addEventListener("mouseup",et),window.addEventListener("blur",et),B.setActiveIndex(b),S=a.target;const p=S.getBoundingClientRect();M=[a.clientX,a.clientY],m=p.left-a.clientX,y=p.bottom-a.clientY,e(2,r.style.width=`${p.width}px`,r),e(2,r.style.height=`${p.height}px`,r),e(2,r.style.left=`${a.clientX+m}px`,r),e(2,r.style.bottom="0",r),D=b}function dt(a){if(I){U(a.clientX,a.clientY);return}M===null||Math.hypot(M[0]-a.clientX,M[1]-a.clientY)<jt||(e(3,I=!0),B.setPlaceholderIndex(D),B.setActiveIndex(D),console.log("dragging tab: ",D))}function et(){window.removeEventListener("mousemove",dt),window.removeEventListener("mouseup",et),window.removeEventListener("blur",et),M=null,e(3,I=!1),u=!1,D=-1,m=0,y=0,B.setPlaceholderIndex(),console.log("stop dragging")}const Tt=a=>c(a),Et=a=>g(a),Ct=(a,b)=>Y(b,a);function At(a,b){s.$$.not_equal(n.tabs[b].title,a)&&(n.tabs[b].title=a,q.set(n))}function Dt(a,b){x[a?"unshift":"push"](()=>{o[b]=a,e(1,o)})}function Mt(a){x[a?"unshift":"push"](()=>{l=a,e(0,l)})}const St=()=>{C(0,1)};function Bt(a){x[a?"unshift":"push"](()=>{r=a,e(2,r)})}function qt(a){x[a?"unshift":"push"](()=>{V=a,e(4,V)})}return[l,o,r,I,V,n,g,d,f,c,C,Y,Tt,Et,Ct,At,Dt,Mt,St,Bt,qt]}class Kt extends Q{constructor(t){super(),$(this,t,Jt,Gt,K,{},null,[-1,-1])}}function Qt(s){let t,e,n,l;return{c(){t=T("div"),e=T("textarea"),this.h()},l(o){t=E(o,"DIV",{id:!0,class:!0});var i=A(t);e=E(i,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),A(e).forEach(w),i.forEach(w),this.h()},h(){v(e,"spellcheck","false"),v(e,"name","editor"),v(e,"id","text"),v(e,"class","svelte-7cpmmf"),v(t,"id","editor"),v(t,"class","svelte-7cpmmf")},m(o,i){G(o,t,i),k(t,e),at(e,s[0]),n||(l=z(e,"input",s[1]),n=!0)},p(o,[i]){i&1&&at(e,o[0])},i:lt,o:lt,d(o){o&&w(t),n=!1,l()}}}function $t(s,t,e){let{text:n}=t;function l(){n=this.value,e(0,n)}return s.$$set=o=>{"text"in o&&e(0,n=o.text)},[n,l]}class te extends Q{constructor(t){super(),$(this,t,$t,Qt,K,{text:0})}}function ee(s){let t,e,n,l,o,i;e=new Kt({});function h(d){s[1](d)}let g={};return s[0].tabs[s[0].activeIndex].text!==void 0&&(g.text=s[0].tabs[s[0].activeIndex].text),l=new te({props:g}),x.push(()=>yt(l,"text",h)),{c(){t=T("div"),L(e.$$.fragment),n=N(),L(l.$$.fragment),this.h()},l(d){t=E(d,"DIV",{class:!0});var f=A(t);W(e.$$.fragment,f),n=X(f),W(l.$$.fragment,f),f.forEach(w),this.h()},h(){v(t,"class","container svelte-16qa0xo")},m(d,f){G(d,t,f),H(e,t,null),k(t,n),H(l,t,null),i=!0},p(d,[f]){const _={};!o&&f&1&&(o=!0,_.text=d[0].tabs[d[0].activeIndex].text,It(()=>o=!1)),l.$set(_)},i(d){i||(P(e.$$.fragment,d),P(l.$$.fragment,d),i=!0)},o(d){R(e.$$.fragment,d),R(l.$$.fragment,d),i=!1},d(d){d&&w(t),O(e),O(l)}}}function ne(s,t,e){let n;wt(s,q,o=>e(0,n=o)),B.newTab({title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.19"});function l(o){s.$$.not_equal(n.tabs[n.activeIndex].text,o)&&(n.tabs[n.activeIndex].text=o,q.set(n))}return[n,l]}class ie extends Q{constructor(t){super(),$(this,t,ne,ee,K,{})}}export{ie as component};
