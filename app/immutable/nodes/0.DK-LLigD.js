import{s as y,e as $,u as D,g as E,f as T,o as C}from"../chunks/scheduler.aSSXveB9.js";import{S as L,i as M,e as _,s as O,B as j,c as m,d as u,f as A,a as h,l as f,h as v,g,r as I,p as R}from"../chunks/index.Od8y6qfS.js";import{a as U,b as S,d as b,c as w,g as V,s as k,t as q}from"../chunks/tabsStore.CdWy4I1r.js";const z=!0,B="always",G=Object.freeze(Object.defineProperty({__proto__:null,prerender:z,trailingSlash:B},Symbol.toStringTag,{value:"Module"}));function F(l){let o,c,r,i,a;const d=l[1].default,t=$(d,l,l[0],null);return{c(){o=_("meta"),c=O(),r=_("div"),i=_("div"),t&&t.c(),this.h()},l(e){const n=j("svelte-1xk05yi",document.head);o=m(n,"META",{name:!0,content:!0}),n.forEach(u),c=A(e),r=m(e,"DIV",{class:!0});var s=h(r);i=m(s,"DIV",{class:!0});var p=h(i);t&&t.l(p),p.forEach(u),s.forEach(u),this.h()},h(){f(o,"name","viewport"),f(o,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),f(i,"class","content svelte-nc5tww"),f(r,"class","container svelte-nc5tww")},m(e,n){v(document.head,o),g(e,c,n),g(e,r,n),v(r,i),t&&t.m(i,null),a=!0},p(e,[n]){t&&t.p&&(!a||n&1)&&D(t,d,e,e[0],a?T(d,e[0],n,null):E(e[0]),null)},i(e){a||(I(t,e),a=!0)},o(e){R(t,e),a=!1},d(e){e&&(u(c),u(r)),u(o),t&&t.d(e)}}}function J(l,o,c){let{$$slots:r={},$$scope:i}=o;return C(()=>{U.onAuthStateChanged(async a=>{if(!a){S.update(s=>({...s,isLoading:!1,currentUser:a}));return}const d=b(w,"users",a.uid),t=await V(d);let e={tabs:""};if(t.exists())console.log("Fetching firestore user doc..."),e=t.data();else{console.log("Creating firestore user doc...");const s=b(w,"users",a.uid);await k(s,e,{merge:!0})}S.update(s=>({...s,isLoading:!1,currentUser:a,data:e}));const n=JSON.parse(e.tabs);q.update(s=>({...s,tabs:n}))})}),l.$$set=a=>{"$$scope"in a&&c(0,i=a.$$scope)},[i,r]}class H extends L{constructor(o){super(),M(this,o,J,F,y,{})}}export{H as component,G as universal};
