import{s as Z,n as X,j as ae,r as Ae,b as z,c as ge,a as Se,y as _e}from"../chunks/scheduler.enZu1EuY.js";import{S as J,i as K,e as T,c as C,a as y,d as _,l as v,u as x,g as V,h as D,m as H,C as Ve,s as q,x as Y,f as O,y as F,D as N,E as se,z as G,F as ce,p as R,o as W,A as j,v as be,r as ve,q as ee,G as pe}from"../chunks/index.CRfKgsjb.js";import{e as ue,u as Be,o as Re,a as te,c as ne}from"../chunks/animate.Gnx-e8Rb.js";import{b as ie,w as We}from"../chunks/paths.CNF3kSUJ.js";function Ne(n){let e,t,s,l;return{c(){e=T("button"),t=T("div"),this.h()},l(a){e=C(a,"BUTTON",{class:!0});var r=y(e);t=C(r,"DIV",{class:!0,style:!0}),y(t).forEach(_),r.forEach(_),this.h()},h(){v(t,"class","icon svelte-fsrv9v"),x(t,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),x(t,"mask","url("+n[1]+") no-repeat center / contain"),v(e,"class","svelte-fsrv9v")},m(a,r){V(a,e,r),D(e,t),s||(l=H(e,"click",Ve(function(){ae(n[0])&&n[0].apply(this,arguments)})),s=!0)},p(a,[r]){n=a,r&2&&x(t,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),r&2&&x(t,"mask","url("+n[1]+") no-repeat center / contain")},i:X,o:X,d(a){a&&_(e),s=!1,l()}}}function Le(n,e,t){let{onClick:s=()=>{}}=e,{url:l=""}=e;return n.$$set=a=>{"onClick"in a&&t(0,s=a.onClick),"url"in a&&t(1,l=a.url)},[s,l]}class oe extends J{constructor(e){super(),K(this,e,Le,Ne,Z,{onClick:0,url:1})}}function qe(n){let e,t,s,l,a,r,g,u,f;return r=new oe({props:{url:ie+"/images/svg/cancel.svg",onClick:n[2]}}),{c(){e=T("div"),t=T("button"),s=T("input"),l=q(),a=T("div"),Y(r.$$.fragment),this.h()},l(o){e=C(o,"DIV",{class:!0});var m=y(e);t=C(m,"BUTTON",{class:!0});var c=y(t);s=C(c,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),l=O(c),a=C(c,"DIV",{class:!0});var b=y(a);F(r.$$.fragment,b),b.forEach(_),c.forEach(_),m.forEach(_),this.h()},h(){v(s,"autocorrect","off"),v(s,"autocomplete","off"),v(s,"spellcheck","false"),v(s,"type","text"),v(s,"class","svelte-luvzq6"),v(a,"class","close-button svelte-luvzq6"),v(t,"class","tab svelte-luvzq6"),N(t,"active",n[1]),v(e,"class","container svelte-luvzq6")},m(o,m){V(o,e,m),D(e,t),D(t,s),n[6](s),se(s,n[0]),D(t,l),D(t,a),G(r,a,null),g=!0,u||(f=[H(s,"input",n[7]),H(t,"dblclick",ce(n[8])),H(t,"click",function(){ae(n[3])&&n[3].apply(this,arguments)}),H(t,"mousedown",ce(function(){ae(n[4])&&n[4].apply(this,arguments)}))],u=!0)},p(o,[m]){n=o,m&1&&s.value!==n[0]&&se(s,n[0]);const c={};m&4&&(c.onClick=n[2]),r.$set(c),(!g||m&2)&&N(t,"active",n[1])},i(o){g||(R(r.$$.fragment,o),g=!0)},o(o){W(r.$$.fragment,o),g=!1},d(o){o&&_(e),n[6](null),j(r),u=!1,Ae(f)}}}function Oe(n,e,t){let{title:s=""}=e,{active:l=!1}=e,{onClose:a=()=>{}}=e,{onClick:r=()=>{}}=e,{onMousedown:g=c=>{}}=e,u;function f(c){z[c?"unshift":"push"](()=>{u=c,t(5,u)})}function o(){s=this.value,t(0,s)}const m=()=>u.select();return n.$$set=c=>{"title"in c&&t(0,s=c.title),"active"in c&&t(1,l=c.active),"onClose"in c&&t(2,a=c.onClose),"onClick"in c&&t(3,r=c.onClick),"onMousedown"in c&&t(4,g=c.onMousedown)},[s,l,a,r,g,u,f,o,m]}class Xe extends J{constructor(e){super(),K(this,e,Oe,qe,Z,{title:0,active:1,onClose:2,onClick:3,onMousedown:4})}}const B=We({tabs:[],activeIndex:0,placeholderIndex:-1}),S={newTab:n=>{const{title:e="Untitled",text:t="",callback:s=()=>{}}=n||{};B.update(l=>(l.tabs.push({title:e,text:t}),l.activeIndex=l.tabs.length-1,l)),s()},removeTab:n=>{B.update(e=>(e.tabs.splice(n,1),n==e.activeIndex-1?e.activeIndex=Math.max(0,n):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1),e))},setActiveIndex:n=>{B.update(e=>(n<0?e.activeIndex=0:n>=e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=n,e))},setPlaceholderIndex:n=>{B.update(e=>(e.placeholderIndex=n===void 0||n<0||n>=e.tabs.length?-1:n,e))},swapTabs:(n,e,t=()=>{})=>{B.update(s=>{const l=s.tabs[n];return s.tabs[n]=s.tabs[e],s.tabs[e]=l,s.activeIndex==n?s.activeIndex=e:s.activeIndex==e&&(s.activeIndex=n),s.placeholderIndex==n?s.placeholderIndex=e:s.placeholderIndex==e&&(s.placeholderIndex=n),s}),t()}};function fe(n,e,t){const s=n.slice();return s[32]=e[t],s[33]=e,s[34]=t,s}function Pe(n){let e,t,s,l,a,r,g;function u(){return n[13](n[34])}function f(){return n[14](n[34])}function o(...b){return n[15](n[34],...b)}function m(b){n[16](b,n[34])}let c={active:n[6].activeIndex==n[34],onClose:u,onClick:f,onMousedown:o};return n[6].tabs[n[34]].title!==void 0&&(c.title=n[6].tabs[n[34]].title),t=new Xe({props:c}),z.push(()=>pe(t,"title",m)),{c(){e=T("div"),Y(t.$$.fragment),l=q(),this.h()},l(b){e=C(b,"DIV",{class:!0});var p=y(e);F(t.$$.fragment,p),l=O(p),p.forEach(_),this.h()},h(){v(e,"class","tab-container svelte-2l1k8y"),N(e,"lockMaxWidth",n[1]>0),N(e,"unlockingWidth",n[2])},m(b,p){V(b,e,p),G(t,e,null),D(e,l),a=!0,r||(g=Se(n[9].call(null,e)),r=!0)},p(b,p){n=b;const E={};p[0]&64&&(E.active=n[6].activeIndex==n[34]),p[0]&64&&(E.onClose=u),p[0]&64&&(E.onClick=f),p[0]&64&&(E.onMousedown=o),!s&&p[0]&64&&(s=!0,E.title=n[6].tabs[n[34]].title,_e(()=>s=!1)),t.$set(E),(!a||p[0]&2)&&N(e,"lockMaxWidth",n[1]>0),(!a||p[0]&4)&&N(e,"unlockingWidth",n[2])},i(b){a||(R(t.$$.fragment,b),a=!0)},o(b){W(t.$$.fragment,b),a=!1},d(b){b&&_(e),j(t),r=!1,g()}}}function Ue(n){let e;return{c(){e=T("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),y(e).forEach(_),this.h()},h(){v(e,"class","tab-container placeholder svelte-2l1k8y"),N(e,"lockMaxWidth",n[1]>0)},m(t,s){V(t,e,s)},p(t,s){s[0]&2&&N(e,"lockMaxWidth",t[1]>0)},i:X,o:X,d(t){t&&_(e)}}}function de(n,e){let t,s,l,a,r;const g=[Ue,Pe],u=[];function f(o,m){return o[6].placeholderIndex==o[34]?0:1}return s=f(e),l=u[s]=g[s](e),{key:n,first:null,c(){t=ee(),l.c(),a=ee(),this.h()},l(o){t=ee(),l.l(o),a=ee(),this.h()},h(){this.first=t},m(o,m){V(o,t,m),u[s].m(o,m),V(o,a,m),r=!0},p(o,m){e=o;let c=s;s=f(e),s===c?u[s].p(e,m):(be(),W(u[c],1,1,()=>{u[c]=null}),ve(),l=u[s],l?l.p(e,m):(l=u[s]=g[s](e),l.c()),R(l,1),l.m(a.parentNode,a))},i(o){r||(R(l),r=!0)},o(o){W(l),r=!1},d(o){o&&(_(t),_(a)),u[s].d(o)}}}function he(n){let e;return{c(){e=T("div"),this.h()},l(t){e=C(t,"DIV",{draggable:!0,class:!0}),y(e).forEach(_),this.h()},h(){v(e,"draggable","true"),v(e,"class","cloned-tab tab-container svelte-2l1k8y")},m(t,s){V(t,e,s),n[19](e)},p:X,d(t){t&&_(e),n[19](null)}}}function He(n){let e,t,s,l=[],a=new Map,r,g,u,f,o,m,c,b,p,E=ue(n[6].tabs);const M=d=>d[32];for(let d=0;d<E.length;d+=1){let h=fe(n,E,d),A=M(h);a.set(A,l[d]=de(A,h))}u=new oe({props:{url:ie+"/images/svg/plus.svg",onClick:n[8]}}),o=new oe({props:{url:ie+"/images/svg/swap.svg",onClick:n[18]}});let I=n[4]&&he(n);return{c(){e=T("div"),t=T("div"),s=T("div");for(let d=0;d<l.length;d+=1)l[d].c();r=q(),g=T("div"),Y(u.$$.fragment),f=q(),Y(o.$$.fragment),m=q(),c=T("div"),b=q(),I&&I.c(),this.h()},l(d){e=C(d,"DIV",{});var h=y(e);t=C(h,"DIV",{class:!0});var A=y(t);s=C(A,"DIV",{class:!0});var Q=y(s);for(let P=0;P<l.length;P+=1)l[P].l(Q);Q.forEach(_),r=O(A),g=C(A,"DIV",{class:!0});var L=y(g);F(u.$$.fragment,L),f=O(L),F(o.$$.fragment,L),L.forEach(_),A.forEach(_),m=O(h),c=C(h,"DIV",{class:!0}),y(c).forEach(_),b=O(h),I&&I.l(h),h.forEach(_),this.h()},h(){v(s,"class","tabs svelte-2l1k8y"),v(g,"class","buttons svelte-2l1k8y"),v(t,"class","toolbar svelte-2l1k8y"),v(c,"class","separator svelte-2l1k8y")},m(d,h){V(d,e,h),D(e,t),D(t,s);for(let A=0;A<l.length;A+=1)l[A]&&l[A].m(s,null);n[17](s),D(t,r),D(t,g),G(u,g,null),D(g,f),G(o,g,null),D(e,m),D(e,c),D(e,b),I&&I.m(e,null),n[20](e),p=!0},p(d,h){h[0]&5318&&(E=ue(d[6].tabs),be(),l=Be(l,h,M,1,d,E,a,s,Re,de,null,fe),ve()),d[4]?I?I.p(d,h):(I=he(d),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i(d){if(!p){for(let h=0;h<E.length;h+=1)R(l[h]);R(u.$$.fragment,d),R(o.$$.fragment,d),p=!0}},o(d){for(let h=0;h<l.length;h+=1)W(l[h]);W(u.$$.fragment,d),W(o.$$.fragment,d),p=!1},d(d){d&&_(e);for(let h=0;h<l.length;h+=1)l[h].d();n[17](null),j(u),j(o),I&&I.d(),n[20](null)}}}const me=200,ze=200,Ye=200,Fe=1600,Ge=12;function je(n,e,t){let s;ge(n,B,i=>t(6,s=i));let l,a=0,r=!1;const g=(i,k=300)=>{let w;return(...U)=>{clearTimeout(w),w=setTimeout(()=>{i.apply(this,U)},k)}};function u(i){S.setActiveIndex(i),l.children[i].scrollIntoView({behavior:"smooth"})}function f(){S.newTab(),setTimeout(()=>{t(0,l.scrollLeft=l.scrollWidth,l)})}function o(i){te(i,{duration:ze,easing:ne,css:(k,w)=>`transform: scaleX(${k}); transform-origin: left;`})}const m=g(()=>{t(2,r=!0),t(1,a=0),setTimeout(()=>{t(2,r=!1)},200)},Fe);function c(i){if(s.tabs.length==1)return;i<s.tabs.length-1&&(t(1,a=l.children[0].clientWidth),l.style.setProperty("--lock-width",`${a}px`),m()),i==s.tabs.length-1?S.setActiveIndex(i-1):i==s.activeIndex&&S.setActiveIndex(i+1);let k=l.children[0].getBoundingClientRect().width;console.log(k),te(l.children[i],{duration:Ye,easing:ne,css:(w,U)=>`transform: scaleX(${U}); transform-origin: left;`,onEnd:()=>{S.removeTab(i)}})}const b=(i,k)=>{const w=l.children[i],U=l.children[k],re=w.getBoundingClientRect().left-U.getBoundingClientRect().left;S.swapTabs(i,k,()=>{te(w,{duration:me,easing:ne,css:(Me,le)=>`transform: translateX(${re*le}px);`}),te(U,{duration:me,easing:ne,css:(Me,le)=>`transform: translateX(${-re*le}px);`})})};let p=null,E=-1,M,I=!1,d=!1,h;function A(i,k){console.log("weee!!!!");let w=h.getBoundingClientRect();if(i<w.left||i>w.right||k<w.top||k>w.bottom){d||(t(3,M.style.cssText="",M),M.addEventListener("dragstart",Q),M.dispatchEvent(new Event("dragstart"))),d=!0;return}d=!1}function Q(i){var k,w;console.log("dragstart"),!(!i.dataTransfer||!M)&&((k=i.dataTransfer)==null||k.setDragImage(M,0,0),(w=i.dataTransfer)==null||w.setData("text/plain",M.id),i.preventDefault())}function L(i,k){if(!i.target)return;let w=i.target;window.addEventListener("mousemove",P),window.addEventListener("mouseup",$),window.addEventListener("blur",$),S.setActiveIndex(k),t(3,M=w.cloneNode(!0)),p=[i.clientX,i.clientY],w.getBoundingClientRect().left-i.clientX,w.getBoundingClientRect().top-i.clientY,E=k}function P(i){if(I){A(i.clientX,i.clientY);return}p===null||Math.hypot(p[0]-i.clientX,p[1]-i.clientY)<Ge||(t(4,I=!0),S.setPlaceholderIndex(E),S.setActiveIndex(E),M.classList.add("cloned-tab"),i.preventDefault(),console.log("dragging tab: ",E))}function $(){window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",$),window.removeEventListener("blur",$),p=null,t(4,I=!1),d=!1,E=-1,S.setPlaceholderIndex(),console.log("stop dragging")}const ke=i=>c(i),Ie=i=>u(i),we=(i,k)=>L(k,i);function Ee(i,k){n.$$.not_equal(s.tabs[k].title,i)&&(s.tabs[k].title=i,B.set(s))}function Te(i){z[i?"unshift":"push"](()=>{l=i,t(0,l)})}const Ce=()=>{b(0,1)};function De(i){z[i?"unshift":"push"](()=>{M=i,t(3,M)})}function ye(i){z[i?"unshift":"push"](()=>{h=i,t(5,h)})}return[l,a,r,M,I,h,s,u,f,o,c,b,L,ke,Ie,we,Ee,Te,Ce,De,ye]}class Ze extends J{constructor(e){super(),K(this,e,je,He,Z,{},null,[-1,-1])}}function Je(n){let e,t,s,l;return{c(){e=T("div"),t=T("textarea"),this.h()},l(a){e=C(a,"DIV",{id:!0,class:!0});var r=y(e);t=C(r,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),y(t).forEach(_),r.forEach(_),this.h()},h(){v(t,"spellcheck","false"),v(t,"name","editor"),v(t,"id","text"),v(t,"class","svelte-7cpmmf"),v(e,"id","editor"),v(e,"class","svelte-7cpmmf")},m(a,r){V(a,e,r),D(e,t),se(t,n[0]),s||(l=H(t,"input",n[1]),s=!0)},p(a,[r]){r&1&&se(t,a[0])},i:X,o:X,d(a){a&&_(e),s=!1,l()}}}function Ke(n,e,t){let{text:s}=e;function l(){s=this.value,t(0,s)}return n.$$set=a=>{"text"in a&&t(0,s=a.text)},[s,l]}class Qe extends J{constructor(e){super(),K(this,e,Ke,Je,Z,{text:0})}}function $e(n){let e,t,s,l,a,r;t=new Ze({});function g(f){n[1](f)}let u={};return n[0].tabs[n[0].activeIndex].text!==void 0&&(u.text=n[0].tabs[n[0].activeIndex].text),l=new Qe({props:u}),z.push(()=>pe(l,"text",g)),{c(){e=T("div"),Y(t.$$.fragment),s=q(),Y(l.$$.fragment),this.h()},l(f){e=C(f,"DIV",{class:!0});var o=y(e);F(t.$$.fragment,o),s=O(o),F(l.$$.fragment,o),o.forEach(_),this.h()},h(){v(e,"class","container svelte-16qa0xo")},m(f,o){V(f,e,o),G(t,e,null),D(e,s),G(l,e,null),r=!0},p(f,[o]){const m={};!a&&o&1&&(a=!0,m.text=f[0].tabs[f[0].activeIndex].text,_e(()=>a=!1)),l.$set(m)},i(f){r||(R(t.$$.fragment,f),R(l.$$.fragment,f),r=!0)},o(f){W(t.$$.fragment,f),W(l.$$.fragment,f),r=!1},d(f){f&&_(e),j(t),j(l)}}}function xe(n,e,t){let s;ge(n,B,a=>t(0,s=a)),S.newTab({title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.18"});function l(a){n.$$.not_equal(s.tabs[s.activeIndex].text,a)&&(s.tabs[s.activeIndex].text=a,B.set(s))}return[s,l]}class lt extends J{constructor(e){super(),K(this,e,xe,$e,Z,{})}}export{lt as component};
