import{r as lt,s as H,n as J,i as ot,b as Y,c as ct,y as rt,f as vt}from"../chunks/scheduler._-uiodl9.js";import{l as V,n as O,S as L,i as G,e as E,c as D,a as $,d as w,o as k,p as j,g as q,h as S,z as N,A as _t,s as W,u as P,f as z,v as F,B as K,C as Q,w as X,D as ut,x,q as pt,m as gt,E as ft,F as bt,G as kt}from"../chunks/index.4ZfS5K5C.js";import{b as dt,w as wt}from"../chunks/paths.CE9iWTZ9.js";function st(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function It(n,t){V(n,1,1,()=>{t.delete(n.key)})}function Ct(n,t,e,s,i,a,l,m,p,u,c,r){let g=n.length,f=a.length,v=g;const A={};for(;v--;)A[n[v].key]=v;const d=[],h=new Map,I=new Map,B=[];for(v=f;v--;){const _=r(i,a,v),y=e(_);let T=l.get(y);T?B.push(()=>T.p(_,t)):(T=u(y,_),T.c()),h.set(y,d[v]=T),y in A&&I.set(y,Math.abs(v-A[y]))}const o=new Set,b=new Set;function C(_){O(_,1),_.m(m,c),l.set(_.key,_),c=_.first,f--}for(;g&&f;){const _=d[f-1],y=n[g-1],T=_.key,R=y.key;_===y?(c=_.first,g--,f--):h.has(R)?!l.has(T)||o.has(T)?C(_):b.has(R)?g--:I.get(T)>I.get(R)?(b.add(T),C(_)):(o.add(R),g--):(p(y,l),g--)}for(;g--;){const _=n[g];h.has(_.key)||p(_,l)}for(;f;)C(d[f-1]);return lt(B),d}function Tt(n){let t,e,s,i;return{c(){t=E("button"),e=E("div"),this.h()},l(a){t=D(a,"BUTTON",{class:!0});var l=$(t);e=D(l,"DIV",{class:!0,style:!0}),$(e).forEach(w),l.forEach(w),this.h()},h(){k(e,"class","icon svelte-fsrv9v"),j(e,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),j(e,"mask","url("+n[1]+") no-repeat center / contain"),k(t,"class","svelte-fsrv9v")},m(a,l){q(a,t,l),S(t,e),s||(i=N(t,"click",_t(function(){ot(n[0])&&n[0].apply(this,arguments)})),s=!0)},p(a,[l]){n=a,l&2&&j(e,"-webkit-mask","url("+n[1]+") no-repeat center / contain"),l&2&&j(e,"mask","url("+n[1]+") no-repeat center / contain")},i:J,o:J,d(a){a&&w(t),s=!1,i()}}}function yt(n,t,e){let{onClick:s=()=>{}}=t,{url:i=""}=t;return n.$$set=a=>{"onClick"in a&&e(0,s=a.onClick),"url"in a&&e(1,i=a.url)},[s,i]}class ht extends L{constructor(t){super(),G(this,t,yt,Tt,H,{onClick:0,url:1})}}function Et(n){let t,e,s,i,a,l,m,p,u;return l=new ht({props:{url:dt+"/images/svg/cancel.svg",onClick:n[2]}}),{c(){t=E("div"),e=E("button"),s=E("input"),i=W(),a=E("div"),P(l.$$.fragment),this.h()},l(c){t=D(c,"DIV",{class:!0});var r=$(t);e=D(r,"BUTTON",{class:!0});var g=$(e);s=D(g,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),i=z(g),a=D(g,"DIV",{class:!0});var f=$(a);F(l.$$.fragment,f),f.forEach(w),g.forEach(w),r.forEach(w),this.h()},h(){k(s,"autocorrect","off"),k(s,"autocomplete","off"),k(s,"spellcheck","false"),k(s,"type","text"),k(s,"class","svelte-i6zefg"),k(a,"class","close-button svelte-i6zefg"),k(e,"class","tab svelte-i6zefg"),K(e,"active",n[1]),k(t,"class","container svelte-i6zefg")},m(c,r){q(c,t,r),S(t,e),S(e,s),n[5](s),Q(s,n[0]),S(e,i),S(e,a),X(l,a,null),m=!0,p||(u=[N(s,"input",n[6]),N(e,"dblclick",ut(n[7])),N(e,"click",function(){ot(n[3])&&n[3].apply(this,arguments)})],p=!0)},p(c,[r]){n=c,r&1&&s.value!==n[0]&&Q(s,n[0]);const g={};r&4&&(g.onClick=n[2]),l.$set(g),(!m||r&2)&&K(e,"active",n[1])},i(c){m||(O(l.$$.fragment,c),m=!0)},o(c){V(l.$$.fragment,c),m=!1},d(c){c&&w(t),n[5](null),x(l),p=!1,lt(u)}}}function Dt(n,t,e){let{title:s=""}=t,{active:i=!1}=t,{onClose:a=()=>{}}=t,{onClick:l=()=>{}}=t,m;function p(r){Y[r?"unshift":"push"](()=>{m=r,e(4,m)})}function u(){s=this.value,e(0,s)}const c=()=>m.select();return n.$$set=r=>{"title"in r&&e(0,s=r.title),"active"in r&&e(1,i=r.active),"onClose"in r&&e(2,a=r.onClose),"onClick"in r&&e(3,l=r.onClick)},[s,i,a,l,m,p,u,c]}class At extends L{constructor(t){super(),G(this,t,Dt,Et,H,{title:0,active:1,onClose:2,onClick:3})}}const M=wt({tabs:[],activeIndex:0}),U={newTab:({title:n="Untitled",text:t=""}={})=>{M.update(e=>(e.tabs.push({title:n,text:t}),e.activeIndex=e.tabs.length-1,e))},removeTab:n=>{M.update(t=>(t.tabs.splice(n,1),t.activeIndex=Math.min(t.activeIndex,t.tabs.length-1),t))},setActiveIndex:n=>{M.update(t=>(t.activeIndex=n<0||n>=t.tabs.length?0:n,t))},swapTabs:(n,t,e)=>{M.update(s=>{const i=s.tabs[n];return s.tabs[n]=s.tabs[t],s.tabs[t]=i,s.activeIndex==n?s.activeIndex=t:s.activeIndex==t&&(s.activeIndex=n),s}),e&&e()}};function St(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function $t(n){return n*n*n}function Mt(n){const t=n-1;return t*t*t+1}function it(n,t,e){const s=n.slice();return s[17]=t[e],s[18]=t,s[19]=e,s}function at(n,t){let e,s,i,a,l,m,p;function u(){return t[9](t[19])}function c(){return t[10](t[19])}function r(f){t[11](f,t[19])}let g={active:t[2].activeIndex==t[19],onClose:u,onClick:c};return t[2].tabs[t[19]].title!==void 0&&(g.title=t[2].tabs[t[19]].title),s=new At({props:g}),Y.push(()=>ft(s,"title",r)),{key:n,first:null,c(){e=E("div"),P(s.$$.fragment),a=W(),this.h()},l(f){e=D(f,"DIV",{class:!0});var v=$(e);F(s.$$.fragment,v),a=z(v),v.forEach(w),this.h()},h(){k(e,"class","tab-container svelte-1x40tdd"),K(e,"lockMaxWidth",t[1]>0),this.first=e},m(f,v){q(f,e,v),X(s,e,null),S(e,a),p=!0},p(f,v){t=f;const A={};v&4&&(A.active=t[2].activeIndex==t[19]),v&4&&(A.onClose=u),v&4&&(A.onClick=c),!i&&v&4&&(i=!0,A.title=t[2].tabs[t[19]].title,rt(()=>i=!1)),s.$set(A),(!p||v&2)&&K(e,"lockMaxWidth",t[1]>0)},i(f){p||(O(s.$$.fragment,f),f&&vt(()=>{p&&(m&&m.end(1),l=bt(e,t[3],{}),l.start())}),p=!0)},o(f){V(s.$$.fragment,f),l&&l.invalidate(),f&&(m=kt(e,t[4],{})),p=!1},d(f){f&&w(e),x(s),f&&m&&m.end()}}}function Vt(n){let t,e,s,i=[],a=new Map,l,m,p,u,c,r,g,f,v=st(n[2].tabs);const A=d=>d[17];for(let d=0;d<v.length;d+=1){let h=it(n,v,d),I=A(h);a.set(I,i[d]=at(I,h))}return p=new ht({props:{url:dt+"/images/svg/plus.svg",onClick:n[6]}}),{c(){t=E("div"),e=E("div"),s=E("div");for(let d=0;d<i.length;d+=1)i[d].c();l=W(),m=E("div"),P(p.$$.fragment),u=W(),c=E("div"),this.h()},l(d){t=D(d,"DIV",{});var h=$(t);e=D(h,"DIV",{class:!0});var I=$(e);s=D(I,"DIV",{class:!0});var B=$(s);for(let b=0;b<i.length;b+=1)i[b].l(B);B.forEach(w),l=z(I),m=D(I,"DIV",{class:!0});var o=$(m);F(p.$$.fragment,o),o.forEach(w),I.forEach(w),u=z(h),c=D(h,"DIV",{class:!0}),$(c).forEach(w),h.forEach(w),this.h()},h(){k(s,"class","tabs svelte-1x40tdd"),k(m,"class","buttons svelte-1x40tdd"),k(e,"class","toolbar svelte-1x40tdd"),k(c,"class","separator svelte-1x40tdd")},m(d,h){q(d,t,h),S(t,e),S(e,s);for(let I=0;I<i.length;I+=1)i[I]&&i[I].m(s,null);n[12](s),S(e,l),S(e,m),X(p,m,null),S(t,u),S(t,c),r=!0,g||(f=N(e,"click",ut(n[13])),g=!0)},p(d,[h]){h&166&&(v=st(d[2].tabs),pt(),i=Ct(i,h,A,1,d,v,a,s,It,at,null,it),gt())},i(d){if(!r){for(let h=0;h<v.length;h+=1)O(i[h]);O(p.$$.fragment,d),r=!0}},o(d){for(let h=0;h<i.length;h+=1)V(i[h]);V(p.$$.fragment,d),r=!1},d(d){d&&w(t);for(let h=0;h<i.length;h+=1)i[h].d();n[12](null),x(p),g=!1,f()}}}const Ot=200,Bt=120,Nt=80;function qt(n,t,e){let s;ct(n,M,o=>e(2,s=o));let i,a=0;const l=(o,b=300)=>{let C;return(..._)=>{clearTimeout(C),C=setTimeout(()=>{o.apply(this,_)},b)}};function m(o){let b=o.getBoundingClientRect();return{duration:Bt,easing:Mt,css:C=>`width: ${b.width*C}px;`}}function p(o){var C;let b=o.getBoundingClientRect();return(C=o.querySelector(".tab"))==null||C.classList.remove("active"),{duration:Nt,easing:$t,css:_=>`width: ${b.width*_}px;`}}function u(o){U.setActiveIndex(o),i.children[o].scrollIntoView({behavior:"smooth"})}function c(){U.newTab(),setTimeout(()=>{i.scrollBy({left:i.scrollWidth,behavior:"smooth"})})}const r=l(()=>{e(1,a=0)},1e3);function g(o){s.tabs.length!=1&&(o<s.tabs.length-1&&(e(1,a=i.children[0].clientWidth),i.style.setProperty("--lock-width",`${a}px`),r()),U.removeTab(o))}function f(o,b,C){const _=getComputedStyle(o),y=_.transform==="none"?"":_.transform,[T,R]=_.transformOrigin.split(" ").map(parseFloat),mt=b.left+b.width*T/C.width-(C.left+T);let Z;function tt(et){Z===void 0&&(Z=et);const nt=1-St((et-Z)/Ot);nt>0?(o.style.cssText=`transform: ${y} translateX(${mt*nt}px);`,requestAnimationFrame(tt)):o.style.cssText=""}requestAnimationFrame(tt)}const v=(o,b)=>{const C=i.children[o],_=i.children[b],y=C.getBoundingClientRect(),T=_.getBoundingClientRect();console.log("swapping "+o+" and "+b),U.swapTabs(o,b,()=>{f(C,y,T),f(_,T,y)})},A=o=>g(o),d=o=>u(o);function h(o,b){n.$$.not_equal(s.tabs[b].title,o)&&(s.tabs[b].title=o,M.set(s))}function I(o){Y[o?"unshift":"push"](()=>{i=o,e(0,i)})}return[i,a,s,m,p,u,c,g,v,A,d,h,I,()=>{v(0,1)}]}class Rt extends L{constructor(t){super(),G(this,t,qt,Vt,H,{})}}function Ut(n){let t,e,s,i;return{c(){t=E("div"),e=E("textarea"),this.h()},l(a){t=D(a,"DIV",{id:!0,class:!0});var l=$(t);e=D(l,"TEXTAREA",{spellcheck:!0,name:!0,id:!0,class:!0}),$(e).forEach(w),l.forEach(w),this.h()},h(){k(e,"spellcheck","false"),k(e,"name","editor"),k(e,"id","text"),k(e,"class","svelte-7cpmmf"),k(t,"id","editor"),k(t,"class","svelte-7cpmmf")},m(a,l){q(a,t,l),S(t,e),Q(e,n[0]),s||(i=N(e,"input",n[1]),s=!0)},p(a,[l]){l&1&&Q(e,a[0])},i:J,o:J,d(a){a&&w(t),s=!1,i()}}}function Wt(n,t,e){let{text:s}=t;function i(){s=this.value,e(0,s)}return n.$$set=a=>{"text"in a&&e(0,s=a.text)},[s,i]}class Pt extends L{constructor(t){super(),G(this,t,Wt,Ut,H,{text:0})}}function zt(n){let t,e,s,i,a,l;e=new Rt({});function m(u){n[1](u)}let p={};return n[0].tabs[n[0].activeIndex].text!==void 0&&(p.text=n[0].tabs[n[0].activeIndex].text),i=new Pt({props:p}),Y.push(()=>ft(i,"text",m)),{c(){t=E("div"),P(e.$$.fragment),s=W(),P(i.$$.fragment),this.h()},l(u){t=D(u,"DIV",{class:!0});var c=$(t);F(e.$$.fragment,c),s=z(c),F(i.$$.fragment,c),c.forEach(w),this.h()},h(){k(t,"class","container svelte-16qa0xo")},m(u,c){q(u,t,c),X(e,t,null),S(t,s),X(i,t,null),l=!0},p(u,[c]){const r={};!a&&c&1&&(a=!0,r.text=u[0].tabs[u[0].activeIndex].text,rt(()=>a=!1)),i.$set(r)},i(u){l||(O(e.$$.fragment,u),O(i.$$.fragment,u),l=!0)},o(u){V(e.$$.fragment,u),V(i.$$.fragment,u),l=!1},d(u){u&&w(t),x(e),x(i)}}}function Ft(n,t,e){let s;ct(n,M,a=>e(0,s=a)),U.newTab({title:"Hello ðŸ‘‹",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.16"});function i(a){n.$$.not_equal(s.tabs[s.activeIndex].text,a)&&(s.tabs[s.activeIndex].text=a,M.set(s))}return[s,i]}class Lt extends L{constructor(t){super(),G(this,t,Ft,zt,H,{})}}export{Lt as component};
