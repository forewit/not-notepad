import{s as de,n as K,r as Ne,j as se,y as Oe,b as V,c as Ee,o as Ie,a as We,z as De}from"../chunks/scheduler.DVqiRabw.js";import{S as ce,i as he,e as L,s as X,c as H,a as P,f as U,k as Ce,d as I,l as y,C as N,g as $,h as D,D as me,m as q,E as ve,F as Xe,G as ae,x as le,y as oe,z as re,v as Ue,q as Ye,r as Z,p as x,A as ue,H as Le}from"../chunks/index.BanqFhYS.js";import{e as _e,u as Fe,o as Qe,a as ge,c as G,b as we}from"../chunks/animate.C9o6I5aN.js";/* empty css                      */import{b as fe,w as ze}from"../chunks/paths.C-gRqcSc.js";import{_ as Ge}from"../chunks/preload-helper.D6kgxu3v.js";function je(a){let e,t,s,n,l,c=`<span class="close-icon svelte-1fkoqn4" style="-webkit-mask: url(${fe}/images/svg/cancel.svg) no-repeat center / contain; mask: url(${fe}/images/svg/cancel.svg) no-repeat center / contain;"></span>`,g,f;return{c(){e=L("div"),t=L("div"),s=L("input"),n=X(),l=L("button"),l.innerHTML=c,this.h()},l(o){e=H(o,"DIV",{class:!0});var b=P(e);t=H(b,"DIV",{role:!0,tabindex:!0,class:!0,draggable:!0});var h=P(t);s=H(h,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),n=U(h),l=H(h,"BUTTON",{class:!0,draggable:!0,"data-svelte-h":!0}),Ce(l)!=="svelte-97uq8h"&&(l.innerHTML=c),h.forEach(I),b.forEach(I),this.h()},h(){y(s,"autocorrect","off"),y(s,"autocomplete","off"),y(s,"spellcheck","false"),y(s,"type","text"),y(s,"class","svelte-1fkoqn4"),y(l,"class","close-button svelte-1fkoqn4"),y(l,"draggable","true"),y(t,"role","button"),y(t,"tabindex","0"),y(t,"class","tab svelte-1fkoqn4"),y(t,"draggable","true"),N(t,"active",a[1]),y(e,"class","container svelte-1fkoqn4"),N(e,"preventHover",a[2])},m(o,b){$(o,e,b),D(e,t),D(t,s),a[8](s),me(s,a[0]),D(t,n),D(t,l),g||(f=[q(s,"input",a[9]),q(l,"click",ve(function(){se(a[3])&&a[3].apply(this,arguments)})),q(l,"dragstart",ve(Xe(a[7]))),q(t,"dblclick",ae(a[10])),q(t,"mousedown",ae(function(){se(a[4])&&a[4].apply(this,arguments)})),q(t,"touchstart",ae(function(){se(a[4])&&a[4].apply(this,arguments)})),q(t,"dragstart",ae(function(){se(a[5])&&a[5].apply(this,arguments)}))],g=!0)},p(o,[b]){a=o,b&1&&s.value!==a[0]&&me(s,a[0]),b&2&&N(t,"active",a[1]),b&4&&N(e,"preventHover",a[2])},i:K,o:K,d(o){o&&I(e),a[8](null),g=!1,Ne(f)}}}function Je(a,e,t){let{title:s=""}=e,{active:n=!1}=e,{preventHover:l=!1}=e,{onClose:c=()=>{}}=e,{onPointerdown:g=r=>{}}=e,{onDragstart:f=r=>{}}=e,o;function b(r){Oe.call(this,a,r)}function h(r){V[r?"unshift":"push"](()=>{o=r,t(6,o)})}function d(){s=this.value,t(0,s)}const C=()=>o.select();return a.$$set=r=>{"title"in r&&t(0,s=r.title),"active"in r&&t(1,n=r.active),"preventHover"in r&&t(2,l=r.preventHover),"onClose"in r&&t(3,c=r.onClose),"onPointerdown"in r&&t(4,g=r.onPointerdown),"onDragstart"in r&&t(5,f=r.onDragstart)},[s,n,l,c,g,f,o,b,h,d,C]}class He extends ce{constructor(e){super(),he(this,e,Je,je,de,{title:0,active:1,preventHover:2,onClose:3,onPointerdown:4,onDragstart:5})}}let Ke=0;const R=ze({tabs:[],activeIndex:0,placeholderIndex:-1}),B={newTab:a=>{const{data:e={id:Ke++,title:"Untitled",text:""},index:t=-1,callback:s=()=>{}}=a||{};R.update(n=>(n.tabs.some(l=>l.id==e.id)||(t<0?(n.tabs.push(e),n.activeIndex=n.tabs.length-1):(n.tabs.splice(t,0,e),n.activeIndex=t)),n)),s()},removeTab:a=>{R.update(e=>(a<0||a>=e.tabs.length||(e.placeholderIndex==a&&(e.placeholderIndex=-1),e.tabs.splice(a,1),a==e.activeIndex-1?e.activeIndex=Math.max(0,a):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:a=>{R.update(e=>(a<0?e.activeIndex=0:a>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=a,e))},setPlaceholderIndex:a=>{R.update(e=>(e.placeholderIndex=a===void 0||a<0||a>=e.tabs.length?-1:a,e))},moveTab:(a,e,t=()=>{})=>{a!=e&&(R.update(s=>{if(a<0||a>=s.tabs.length||e<0||e>=s.tabs.length)return s;const n=s.tabs[a];return s.tabs.splice(a,1),s.tabs.splice(e,0,n),s.activeIndex==a&&(s.activeIndex=e),s.placeholderIndex==a&&(s.placeholderIndex=e),s}),t())}};function ye(a,e,t){const s=a.slice();return s[38]=e[t],s[39]=e,s[40]=t,s}function Te(a,e){let t,s,n,l,c=e[40],g,f,o;function b(){return e[14](e[40])}function h(..._){return e[15](e[40],..._)}function d(_){e[16](_,e[40])}let C={active:e[8].activeIndex==e[40],preventHover:e[7],onClose:b,onPointerdown:h,onDragstart:e[12]};e[8].tabs[e[40]].title!==void 0&&(C.title=e[8].tabs[e[40]].title),s=new He({props:C}),V.push(()=>Le(s,"title",d));const r=()=>e[17](t,c),A=()=>e[17](null,c);return{key:a,first:null,c(){t=L("div"),le(s.$$.fragment),l=X(),this.h()},l(_){t=H(_,"DIV",{class:!0});var w=P(t);oe(s.$$.fragment,w),l=U(w),w.forEach(I),this.h()},h(){y(t,"class","tab-container svelte-iyobkf"),N(t,"placeholder",e[8].placeholderIndex==e[40]),this.first=t},m(_,w){$(_,t,w),re(s,t,null),D(t,l),r(),g=!0,f||(o=We(e[11].call(null,t)),f=!0)},p(_,w){e=_;const E={};w[0]&256&&(E.active=e[8].activeIndex==e[40]),w[0]&128&&(E.preventHover=e[7]),w[0]&256&&(E.onClose=b),w[0]&256&&(E.onPointerdown=h),!n&&w[0]&256&&(n=!0,E.title=e[8].tabs[e[40]].title,De(()=>n=!1)),s.$set(E),c!==e[40]&&(A(),c=e[40],r()),(!g||w[0]&256)&&N(t,"placeholder",e[8].placeholderIndex==e[40])},i(_){g||(Z(s.$$.fragment,_),g=!0)},o(_){x(s.$$.fragment,_),g=!1},d(_){_&&I(t),ue(s),A(),f=!1,o()}}}function Ze(a){let e,t,s,n=[],l=new Map,c,g,f,o=`<div class="new-tab-icon svelte-iyobkf" style="-webkit-mask: url(${fe}/images/svg/plus.svg) no-repeat center / contain; mask: url(${fe}/images/svg/plus.svg) no-repeat center / contain;"></div>`,b,h,d,C,r,A,_,w,E=_e(a[8].tabs);const O=v=>v[38];for(let v=0;v<E.length;v+=1){let m=ye(a,E,v),T=O(m);l.set(T,n[v]=Te(T,m))}return d=new He({props:{title:a[3].title,active:!a[5],preventHover:!0}}),{c(){e=L("div"),t=L("div"),s=L("div");for(let v=0;v<n.length;v+=1)n[v].c();c=X(),g=L("div"),f=L("button"),f.innerHTML=o,b=X(),h=L("div"),le(d.$$.fragment),C=X(),r=L("div"),this.h()},l(v){e=H(v,"DIV",{});var m=P(e);t=H(m,"DIV",{class:!0});var T=P(t);s=H(T,"DIV",{class:!0});var ee=P(s);for(let Y=0;Y<n.length;Y+=1)n[Y].l(ee);ee.forEach(I),c=U(T),g=H(T,"DIV",{class:!0});var te=P(g);f=H(te,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(f)!=="svelte-15g65px"&&(f.innerHTML=o),te.forEach(I),b=U(T),h=H(T,"DIV",{class:!0});var ne=P(h);oe(d.$$.fragment,ne),ne.forEach(I),T.forEach(I),C=U(m),r=H(m,"DIV",{class:!0}),P(r).forEach(I),m.forEach(I),this.h()},h(){y(s,"class","tabs svelte-iyobkf"),y(f,"class","new-tab-button svelte-iyobkf"),y(g,"class","buttons svelte-iyobkf"),y(h,"class","clone svelte-iyobkf"),N(h,"dragging",a[0]),y(t,"class","toolbar svelte-iyobkf"),y(r,"class","separator svelte-iyobkf")},m(v,m){$(v,e,m),D(e,t),D(t,s);for(let T=0;T<n.length;T+=1)n[T]&&n[T].m(s,null);a[18](s),D(t,c),D(t,g),D(g,f),D(t,b),D(t,h),re(d,h,null),a[19](h),D(e,C),D(e,r),a[20](e),A=!0,_||(w=q(f,"click",a[9]),_=!0)},p(v,m){m[0]&13700&&(E=_e(v[8].tabs),Ue(),n=Fe(n,m,O,1,v,E,l,s,Qe,Te,null,ye),Ye());const T={};m[0]&8&&(T.title=v[3].title),m[0]&32&&(T.active=!v[5]),d.$set(T),(!A||m[0]&1)&&N(h,"dragging",v[0])},i(v){if(!A){for(let m=0;m<E.length;m+=1)Z(n[m]);Z(d.$$.fragment,v),A=!0}},o(v){for(let m=0;m<n.length;m+=1)x(n[m]);x(d.$$.fragment,v),A=!1},d(v){v&&I(e);for(let m=0;m<n.length;m+=1)n[m].d();a[18](null),ue(d),a[19](null),a[20](null),_=!1,w()}}}const xe=12,ie=140,j=70,J=200,$e=1600,ke=.3;function et(a,e,t){let s;Ee(a,R,i=>t(8,s=i));let n,l=[],c=0,g=null,f=-1,o={id:-1,title:"",text:""},b,h,d,C=!1,r=!1,A=0,_=0,w=0,E,O=!1;const v=(i,u=300)=>{let p;return(...k)=>{clearTimeout(p),p=setTimeout(()=>{i.apply(this,k)},u)}};function m(){B.newTab()}const T=i=>{if(!l[i]){console.warn("Cannot close tab!");return}c=l[i].getBoundingClientRect().width,i<s.tabs.length-1&&(n.style.setProperty("--tab-max-width",`${c}px`),ee()),i==s.tabs.length-1?B.setActiveIndex(i-1):i==s.activeIndex&&B.setActiveIndex(i+1),ge({duration:J,easing:G,onStep:(u,p)=>{i==0?t(1,n.style.gridTemplateColumns=`minmax(${p*j}px, ${p*c}px)`,n):t(1,n.style.gridTemplateColumns=`repeat(${i}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*j}px, ${p*c}px)`,n)},onEnd:()=>{t(1,n.style.gridTemplateColumns="",n),B.removeTab(i)}})},ee=v(()=>{n&&(n.style.setProperty("--tab-max-width",`${ie}px`),ge({duration:J,easing:G,onStep:(i,u)=>{n.style.setProperty("--tab-max-width",`${c+i*(ie-c)}px`)},onEnd:()=>{n.style.setProperty("--tab-max-width",`${ie}px`)}}))},$e);function te(i){if(!n)return;const u=i.getBoundingClientRect().width;ge({duration:J,easing:G,onStep:(p,k)=>{s.tabs.length==1?t(1,n.style.gridTemplateColumns=`minmax(${p*j}px, ${p*u}px)`,n):t(1,n.style.gridTemplateColumns=`repeat(${s.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*j}px, ${p*u}px)`,n),t(1,n.scrollLeft=n.scrollWidth,n)},onEnd:()=>{t(1,n.style.gridTemplateColumns="",n)}})}const ne=(i,u)=>{const p=l[0].getBoundingClientRect().width;B.moveTab(i,u,()=>{if(i>u)for(let k=u;k<i;k++)we(l[k],{duration:J,easing:G,css:(Q,S)=>`transform: translateX(-${S*p}px);`});if(i<u)for(let k=u;k>i;k--)we(l[k],{duration:J,easing:G,css:(Q,S)=>`transform: translateX(${S*p}px);`})})};function Y(i){!i.target||!i.dataTransfer||(i.dataTransfer.setData("text/plain",JSON.stringify(o)),i.dataTransfer.setDragImage(new Image,0,0))}function Ae(i,u){if(i==0&&u==0){t(4,d.style.left="-1000px",d),t(4,d.style.top="-1000px",d);return}let p=E.getBoundingClientRect();if(i<p.left||i>p.right||u<p.top||u>p.bottom){r||(w=0),t(4,d.style.left=`${i+A}px`,d),t(4,d.style.top=`${u+_}px`,d),t(5,r=!0);return}r&&t(5,r=!1),t(4,d.style.left=`${i+A}px`,d),t(4,d.style.top=`${h.top}px`,d);const k=-n.scrollLeft,Q=l[0].getBoundingClientRect().width;let S=-1;if(i>k+s.tabs.length*Q)S=s.tabs.length-1;else for(let z=0;z<s.tabs.length;z++)if(i>k+z*Q&&i<k+(z+1)*Q){S=z;break}i<20?(w=-ke,requestAnimationFrame(pe)):i>n.clientWidth-10?(w=ke,requestAnimationFrame(pe)):w=0,!(S==-1||S==s.placeholderIndex)&&ne(s.placeholderIndex,S)}let F=0;function pe(i){if(!C||w==0){F=0;return}F==0&&(F=i);const u=i-F;F=i,n.scrollBy({left:w*u}),requestAnimationFrame(pe)}function be(i,u){if(!i.target)return;let p,k;i instanceof TouchEvent?(p=i.touches[0].clientX,k=i.touches[0].clientY,i.preventDefault()):(p=i.clientX,k=i.clientY),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",M),window.addEventListener("mousemove",W),window.addEventListener("mouseup",M),window.addEventListener("drag",W),window.addEventListener("dragend",M),window.addEventListener("blur",M),B.setActiveIndex(u),b=i.target,h=b.getBoundingClientRect(),g=[p,k],A=h.left-p,_=h.top-k,t(4,d.style.width=`${h.width}px`,d),t(4,d.style.left=`${h.left}px`,d),t(4,d.style.top=`${h.top}px`,d),t(3,o={...s.tabs[u]}),f=u}function W(i){let u,p;if(i instanceof TouchEvent?(u=i.touches[0].clientX,p=i.touches[0].clientY,i.preventDefault()):(u=i.clientX,p=i.clientY),C){Ae(u,p);return}g===null||Math.hypot(g[0]-u,g[1]-p)<xe||(t(0,C=!0),B.setPlaceholderIndex(f),B.setActiveIndex(f))}function M(){window.removeEventListener("touchmove",W),window.removeEventListener("touchend",M),window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",M),window.removeEventListener("drag",W),window.removeEventListener("dragend",M),window.removeEventListener("blur",M),g=null,t(5,r=!1),f=-1,A=0,_=0,B.setPlaceholderIndex(),t(0,C=!1)}Ie(()=>{n.style.setProperty("--tab-max-width",`${ie}px`),n.style.setProperty("--tab-min-width",`${j}px`)});const Pe=i=>T(i),Be=(i,u)=>be(u,i);function Se(i,u){a.$$.not_equal(s.tabs[u].title,i)&&(s.tabs[u].title=i,R.set(s))}function Me(i,u){V[i?"unshift":"push"](()=>{l[u]=i,t(2,l)})}function qe(i){V[i?"unshift":"push"](()=>{n=i,t(1,n)})}function Re(i){V[i?"unshift":"push"](()=>{d=i,t(4,d)})}function Ve(i){V[i?"unshift":"push"](()=>{E=i,t(6,E)})}return a.$$.update=()=>{a.$$.dirty[0]&1&&(C?t(7,O=!0):setTimeout(()=>t(7,O=!1),20))},[C,n,l,o,d,r,E,O,s,m,T,te,Y,be,Pe,Be,Se,Me,qe,Re,Ve]}class tt extends ce{constructor(e){super(),he(this,e,et,Ze,de,{},null,[-1,-1])}}function nt(a){let e,t;return{c(){e=L("div"),t=L("div"),this.h()},l(s){e=H(s,"DIV",{id:!0,class:!0});var n=P(e);t=H(n,"DIV",{}),P(t).forEach(I),n.forEach(I),this.h()},h(){y(e,"id","quill-editor-wrapper"),y(e,"class","svelte-1o313h3")},m(s,n){$(s,e,n),D(e,t),a[2](t)},p:K,i:K,o:K,d(s){s&&I(e),a[2](null)}}}function st(){}function at(a,e,t){let{text:s}=e,n,l;async function c(){const{default:f}=await Ge(()=>import("../chunks/quill.BqYzQad1.js"),[],import.meta.url);l&&(n=new f(l,{modules:{toolbar:[["bold","italic","underline","strike"],[{list:"bullet"}]]},formats:["bold","italic","underline","strike","code"],theme:"snow"}),n.on("text-change",st))}Ie(()=>{c().then(()=>{n.keyboard.addBinding({key:"/",ctrlKey:!0},()=>{})})});function g(f){V[f?"unshift":"push"](()=>{l=f,t(0,l)})}return a.$$set=f=>{"text"in f&&t(1,s=f.text)},[l,s,g]}class it extends ce{constructor(e){super(),he(this,e,at,nt,de,{text:1})}}function lt(a){let e,t,s,n,l,c;t=new tt({});function g(o){a[2](o)}let f={};return a[0].text!==void 0&&(f.text=a[0].text),n=new it({props:f}),V.push(()=>Le(n,"text",g)),{c(){e=L("div"),le(t.$$.fragment),s=X(),le(n.$$.fragment),this.h()},l(o){e=H(o,"DIV",{class:!0});var b=P(e);oe(t.$$.fragment,b),s=U(b),oe(n.$$.fragment,b),b.forEach(I),this.h()},h(){y(e,"class","container svelte-1gpimha")},m(o,b){$(o,e,b),re(t,e,null),D(e,s),re(n,e,null),c=!0},p(o,[b]){const h={};!l&&b&1&&(l=!0,h.text=o[0].text,De(()=>l=!1)),n.$set(h)},i(o){c||(Z(t.$$.fragment,o),Z(n.$$.fragment,o),c=!0)},o(o){x(t.$$.fragment,o),x(n.$$.fragment,o),c=!1},d(o){o&&I(e),ue(t),ue(n)}}}function ot(a,e,t){let s,n;Ee(a,R,c=>t(1,n=c)),B.newTab({data:{id:-1,title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.22"}});function l(c){a.$$.not_equal(s.text,c)&&(s.text=c,t(0,s),t(1,n))}return a.$$.update=()=>{a.$$.dirty&2&&t(0,s=n.tabs.length>0?n.tabs[n.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[s,n,l]}class pt extends ce{constructor(e){super(),he(this,e,ot,lt,de,{})}}export{pt as component};
