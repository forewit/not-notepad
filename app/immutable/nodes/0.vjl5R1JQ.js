import{s as D,q as E,u as C,v as I,w as k,c as A,o as M}from"../chunks/scheduler.cfeIpFhx.js";import{S as H,i as j,H as U,s as q,D as O,h as F,j as $,a as b,t as v,g as u,e as h,p as R,E as V,c as g,q as z,w as p,k as L,r as P,u as W,d as w}from"../chunks/index.CYgsW0Pc.js";import{b as B,a as _,d as S,c as y,g as G,s as J}from"../chunks/firebaseStore.DyXcdWP_.js";import{t as T}from"../chunks/tabsStore.DRX0qT0K.js";import{g as K}from"../chunks/entry.B6pO5MCG.js";import{b as Q}from"../chunks/paths.C34Vadu8.js";import{s as X}from"../chunks/settingsStore.CsEF9e5P.js";import{t as Y}from"../chunks/themes.LNe2Z8xO.js";const Z=!0,x="always",de=Object.freeze(Object.defineProperty({__proto__:null,prerender:Z,trailingSlash:x},Symbol.toStringTag,{value:"Module"}));function N(i){let a,r,s;const l=i[3].default,t=E(l,i,i[2],null);return{c(){a=new U(!1),r=q(),t&&t.c(),this.h()},l(e){a=O(e,!1),r=F(e),t&&t.l(e),this.h()},h(){a.a=r},m(e,o){a.m(i[0],e,o),$(e,r,o),t&&t.m(e,o),s=!0},p(e,[o]){(!s||o&1)&&a.p(e[0]),t&&t.p&&(!s||o&4)&&C(t,l,e,e[2],s?k(l,e[2],o,null):I(e[2]),null)},i(e){s||(b(t,e),s=!0)},o(e){v(t,e),s=!1},d(e){e&&(a.d(),u(r)),t&&t.d(e)}}}function ee(i,a,r){let s,l;A(i,X,n=>r(1,l=n));let{$$slots:t={},$$scope:e}=a;function o(n){const c=n==="Custom"?l.customTheme:Y.find(f=>f.name===n);return c?`<style>
    :root {
    --bg: ${c.bg};
    --bg-alt: ${c.bgAlt};
    --main: ${c.main};
    --caret: ${c.caret};
    --error: ${c.error};
    --sub: ${c.sub};
    --text: ${c.text};
    }
    </style>`:""}return i.$$set=n=>{"$$scope"in n&&r(2,e=n.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&r(0,s=o(l.theme))},[s,l,e,t]}class te extends H{constructor(a){super(),j(this,a,ee,N,D,{})}}function se(i){let a,r,s;const l=i[2].default,t=E(l,i,i[3],null);return{c(){a=h("div"),r=h("div"),t&&t.c(),this.h()},l(e){a=g(e,"DIV",{class:!0});var o=w(a);r=g(o,"DIV",{class:!0});var n=w(r);t&&t.l(n),n.forEach(u),o.forEach(u),this.h()},h(){p(r,"class","content svelte-1kodcgf"),p(a,"class","container svelte-1kodcgf")},m(e,o){$(e,a,o),L(a,r),t&&t.m(r,null),s=!0},p(e,o){t&&t.p&&(!s||o&8)&&C(t,l,e,e[3],s?k(l,e[3],o,null):I(e[3]),null)},i(e){s||(b(t,e),s=!0)},o(e){v(t,e),s=!1},d(e){e&&u(a),t&&t.d(e)}}}function ae(i){let a,r,s,l;return s=new te({props:{$$slots:{default:[se]},$$scope:{ctx:i}}}),{c(){a=h("meta"),r=q(),R(s.$$.fragment),this.h()},l(t){const e=V("svelte-1xk05yi",document.head);a=g(e,"META",{name:!0,content:!0}),e.forEach(u),r=F(t),z(s.$$.fragment,t),this.h()},h(){p(a,"name","viewport"),p(a,"content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover")},m(t,e){L(document.head,a),$(t,r,e),P(s,t,e),l=!0},p(t,[e]){const o={};e&8&&(o.$$scope={dirty:e,ctx:t}),s.$set(o)},i(t){l||(b(s.$$.fragment,t),l=!0)},o(t){v(s.$$.fragment,t),l=!1},d(t){t&&u(r),u(a),W(s,t)}}}function re(i,a,r){let s;A(i,_,n=>r(1,s=n));let{$$slots:l={},$$scope:t}=a;function e(n){n.length!==0&&n.forEach(c=>{try{T.newTabFromString(c)}catch(f){console.warn("Failed to parse tab!",c,f);return}})}let o=!1;return M(()=>{B.onAuthStateChanged(async n=>{if(!n){_.update(m=>({...m,isLoading:!1,currentUser:n})),r(0,o=!0);return}const c=S(y,"users",n.uid),f=await G(c);let d={tabs:[],activeIndex:0};if(f.exists())console.log("Fetching firestore user doc..."),d=f.data();else{console.log("Creating firestore user doc...");const m=S(y,"users",n.uid);await J(m,d,{merge:!0})}e(d.tabs),T.setActiveIndex(d.activeIndex),_.update(m=>({...m,isLoading:!1,currentUser:n,data:d})),r(0,o=!0)})}),i.$$set=n=>{"$$scope"in n&&r(3,t=n.$$scope)},i.$$.update=()=>{i.$$.dirty&3&&!s.currentUser&&o&&K(Q+"/login")},[o,s,l,t]}class pe extends H{constructor(a){super(),j(this,a,re,ae,D,{})}}export{pe as component,de as universal};
