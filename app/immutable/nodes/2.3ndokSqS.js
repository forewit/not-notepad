import{s as ce,n as le,r as Ve,j as ne,y as Ne,b as V,c as Ee,o as We,a as Oe,z as Ie,l as Xe}from"../chunks/scheduler.DVqiRabw.js";import{S as de,i as he,e as L,s as X,c as H,a as M,f as U,k as De,d as I,l as _,C as N,g as x,h as D,D as ve,m as B,E as me,F as Ue,G as se,x as ie,y as oe,z as re,v as Ye,r as Fe,p as K,o as Q,A as ue,H as Ce}from"../chunks/index.CFDFe1_f.js";import{e as _e,u as ze,o as Ge,a as ge,c as j,b as we}from"../chunks/animate.BOGdB0XF.js";import{b as fe,w as je}from"../chunks/paths.BQ-PCNc_.js";function Je(n){let e,t,s,a,i,o=`<span class="close-icon svelte-1fkoqn4" style="-webkit-mask: url(${fe}/images/svg/cancel.svg) no-repeat center / contain; mask: url(${fe}/images/svg/cancel.svg) no-repeat center / contain;"></span>`,d,m;return{c(){e=L("div"),t=L("div"),s=L("input"),a=X(),i=L("button"),i.innerHTML=o,this.h()},l(r){e=H(r,"DIV",{class:!0});var g=M(e);t=H(g,"DIV",{role:!0,tabindex:!0,class:!0,draggable:!0});var h=M(t);s=H(h,"INPUT",{autocorrect:!0,autocomplete:!0,spellcheck:!0,type:!0,class:!0}),a=U(h),i=H(h,"BUTTON",{class:!0,draggable:!0,"data-svelte-h":!0}),De(i)!=="svelte-97uq8h"&&(i.innerHTML=o),h.forEach(I),g.forEach(I),this.h()},h(){_(s,"autocorrect","off"),_(s,"autocomplete","off"),_(s,"spellcheck","false"),_(s,"type","text"),_(s,"class","svelte-1fkoqn4"),_(i,"class","close-button svelte-1fkoqn4"),_(i,"draggable","true"),_(t,"role","button"),_(t,"tabindex","0"),_(t,"class","tab svelte-1fkoqn4"),_(t,"draggable","true"),N(t,"active",n[1]),_(e,"class","container svelte-1fkoqn4"),N(e,"preventHover",n[2])},m(r,g){x(r,e,g),D(e,t),D(t,s),n[8](s),ve(s,n[0]),D(t,a),D(t,i),d||(m=[B(s,"input",n[9]),B(i,"click",me(function(){ne(n[3])&&n[3].apply(this,arguments)})),B(i,"dragstart",me(Ue(n[7]))),B(t,"dblclick",se(n[10])),B(t,"mousedown",se(function(){ne(n[4])&&n[4].apply(this,arguments)})),B(t,"touchstart",se(function(){ne(n[4])&&n[4].apply(this,arguments)})),B(t,"dragstart",se(function(){ne(n[5])&&n[5].apply(this,arguments)}))],d=!0)},p(r,[g]){n=r,g&1&&s.value!==n[0]&&ve(s,n[0]),g&2&&N(t,"active",n[1]),g&4&&N(e,"preventHover",n[2])},i:le,o:le,d(r){r&&I(e),n[8](null),d=!1,Ve(m)}}}function Ze(n,e,t){let{title:s=""}=e,{active:a=!1}=e,{preventHover:i=!1}=e,{onClose:o=()=>{}}=e,{onPointerdown:d=u=>{}}=e,{onDragstart:m=u=>{}}=e,r;function g(u){Ne.call(this,n,u)}function h(u){V[u?"unshift":"push"](()=>{r=u,t(6,r)})}function c(){s=this.value,t(0,s)}const C=()=>r.select();return n.$$set=u=>{"title"in u&&t(0,s=u.title),"active"in u&&t(1,a=u.active),"preventHover"in u&&t(2,i=u.preventHover),"onClose"in u&&t(3,o=u.onClose),"onPointerdown"in u&&t(4,d=u.onPointerdown),"onDragstart"in u&&t(5,m=u.onDragstart)},[s,a,i,o,d,m,r,g,h,c,C]}class Le extends de{constructor(e){super(),he(this,e,Ze,Je,ce,{title:0,active:1,preventHover:2,onClose:3,onPointerdown:4,onDragstart:5})}}let Ke=0;const R=je({tabs:[],activeIndex:0,placeholderIndex:-1}),P={newTab:n=>{const{data:e={id:Ke++,title:"Untitled",text:""},index:t=-1,callback:s=()=>{}}=n||{};R.update(a=>(a.tabs.some(i=>i.id==e.id)||(t<0?(a.tabs.push(e),a.activeIndex=a.tabs.length-1):(a.tabs.splice(t,0,e),a.activeIndex=t)),a)),s()},removeTab:n=>{R.update(e=>(n<0||n>=e.tabs.length||(e.placeholderIndex==n&&(e.placeholderIndex=-1),e.tabs.splice(n,1),n==e.activeIndex-1?e.activeIndex=Math.max(0,n):e.activeIndex=Math.min(e.activeIndex,e.tabs.length-1)),e))},setActiveIndex:n=>{R.update(e=>(n<0?e.activeIndex=0:n>e.tabs.length?e.activeIndex=e.tabs.length-1:e.activeIndex=n,e))},setPlaceholderIndex:n=>{R.update(e=>(e.placeholderIndex=n===void 0||n<0||n>=e.tabs.length?-1:n,e))},moveTab:(n,e,t=()=>{})=>{n!=e&&(R.update(s=>{if(n<0||n>=s.tabs.length||e<0||e>=s.tabs.length)return s;const a=s.tabs[n];return s.tabs.splice(n,1),s.tabs.splice(e,0,a),s.activeIndex==n&&(s.activeIndex=e),s.placeholderIndex==n&&(s.placeholderIndex=e),s}),t())}};function Te(n,e,t){const s=n.slice();return s[38]=e[t],s[39]=e,s[40]=t,s}function ye(n,e){let t,s,a,i,o=e[40],d,m,r;function g(){return e[14](e[40])}function h(...w){return e[15](e[40],...w)}function c(w){e[16](w,e[40])}let C={active:e[8].activeIndex==e[40],preventHover:e[7],onClose:g,onPointerdown:h,onDragstart:e[12]};e[8].tabs[e[40]].title!==void 0&&(C.title=e[8].tabs[e[40]].title),s=new Le({props:C}),V.push(()=>Ce(s,"title",c));const u=()=>e[17](t,o),A=()=>e[17](null,o);return{key:n,first:null,c(){t=L("div"),ie(s.$$.fragment),i=X(),this.h()},l(w){t=H(w,"DIV",{class:!0});var T=M(t);oe(s.$$.fragment,T),i=U(T),T.forEach(I),this.h()},h(){_(t,"class","tab-container svelte-iyobkf"),N(t,"placeholder",e[8].placeholderIndex==e[40]),this.first=t},m(w,T){x(w,t,T),re(s,t,null),D(t,i),u(),d=!0,m||(r=Oe(e[11].call(null,t)),m=!0)},p(w,T){e=w;const E={};T[0]&256&&(E.active=e[8].activeIndex==e[40]),T[0]&128&&(E.preventHover=e[7]),T[0]&256&&(E.onClose=g),T[0]&256&&(E.onPointerdown=h),!a&&T[0]&256&&(a=!0,E.title=e[8].tabs[e[40]].title,Ie(()=>a=!1)),s.$set(E),o!==e[40]&&(A(),o=e[40],u()),(!d||T[0]&256)&&N(t,"placeholder",e[8].placeholderIndex==e[40])},i(w){d||(K(s.$$.fragment,w),d=!0)},o(w){Q(s.$$.fragment,w),d=!1},d(w){w&&I(t),ue(s),A(),m=!1,r()}}}function Qe(n){let e,t,s,a=[],i=new Map,o,d,m,r=`<div class="new-tab-icon svelte-iyobkf" style="-webkit-mask: url(${fe}/images/svg/plus.svg) no-repeat center / contain; mask: url(${fe}/images/svg/plus.svg) no-repeat center / contain;"></div>`,g,h,c,C,u,A,w,T,E=_e(n[8].tabs);const W=v=>v[38];for(let v=0;v<E.length;v+=1){let b=Te(n,E,v),y=W(b);i.set(y,a[v]=ye(y,b))}return c=new Le({props:{title:n[3].title,active:!n[5],preventHover:!0}}),{c(){e=L("div"),t=L("div"),s=L("div");for(let v=0;v<a.length;v+=1)a[v].c();o=X(),d=L("div"),m=L("button"),m.innerHTML=r,g=X(),h=L("div"),ie(c.$$.fragment),C=X(),u=L("div"),this.h()},l(v){e=H(v,"DIV",{});var b=M(e);t=H(b,"DIV",{class:!0});var y=M(t);s=H(y,"DIV",{class:!0});var $=M(s);for(let Y=0;Y<a.length;Y+=1)a[Y].l($);$.forEach(I),o=U(y),d=H(y,"DIV",{class:!0});var ee=M(d);m=H(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),De(m)!=="svelte-15g65px"&&(m.innerHTML=r),ee.forEach(I),g=U(y),h=H(y,"DIV",{class:!0});var te=M(h);oe(c.$$.fragment,te),te.forEach(I),y.forEach(I),C=U(b),u=H(b,"DIV",{class:!0}),M(u).forEach(I),b.forEach(I),this.h()},h(){_(s,"class","tabs svelte-iyobkf"),_(m,"class","new-tab-button svelte-iyobkf"),_(d,"class","buttons svelte-iyobkf"),_(h,"class","clone svelte-iyobkf"),N(h,"dragging",n[0]),_(t,"class","toolbar svelte-iyobkf"),_(u,"class","separator svelte-iyobkf")},m(v,b){x(v,e,b),D(e,t),D(t,s);for(let y=0;y<a.length;y+=1)a[y]&&a[y].m(s,null);n[18](s),D(t,o),D(t,d),D(d,m),D(t,g),D(t,h),re(c,h,null),n[19](h),D(e,C),D(e,u),n[20](e),A=!0,w||(T=B(m,"click",n[9]),w=!0)},p(v,b){b[0]&13700&&(E=_e(v[8].tabs),Ye(),a=ze(a,b,W,1,v,E,i,s,Ge,ye,null,Te),Fe());const y={};b[0]&8&&(y.title=v[3].title),b[0]&32&&(y.active=!v[5]),c.$set(y),(!A||b[0]&1)&&N(h,"dragging",v[0])},i(v){if(!A){for(let b=0;b<E.length;b+=1)K(a[b]);K(c.$$.fragment,v),A=!0}},o(v){for(let b=0;b<a.length;b+=1)Q(a[b]);Q(c.$$.fragment,v),A=!1},d(v){v&&I(e);for(let b=0;b<a.length;b+=1)a[b].d();n[18](null),ue(c),n[19](null),n[20](null),w=!1,T()}}}const xe=12,ae=140,J=70,Z=200,$e=1600,ke=.3;function et(n,e,t){let s;Ee(n,R,l=>t(8,s=l));let a,i=[],o=0,d=null,m=-1,r={id:-1,title:"",text:""},g,h,c,C=!1,u=!1,A=0,w=0,T=0,E,W=!1;const v=(l,f=300)=>{let p;return(...k)=>{clearTimeout(p),p=setTimeout(()=>{l.apply(this,k)},f)}};function b(){P.newTab()}const y=l=>{if(!i[l]){console.warn("Cannot close tab!");return}o=i[l].getBoundingClientRect().width,l<s.tabs.length-1&&(a.style.setProperty("--tab-max-width",`${o}px`),$()),l==s.tabs.length-1?P.setActiveIndex(l-1):l==s.activeIndex&&P.setActiveIndex(l+1),ge({duration:Z,easing:j,onStep:(f,p)=>{l==0?t(1,a.style.gridTemplateColumns=`minmax(${p*J}px, ${p*o}px)`,a):t(1,a.style.gridTemplateColumns=`repeat(${l}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*J}px, ${p*o}px)`,a)},onEnd:()=>{t(1,a.style.gridTemplateColumns="",a),P.removeTab(l)}})},$=v(()=>{a&&(a.style.setProperty("--tab-max-width",`${ae}px`),ge({duration:Z,easing:j,onStep:(l,f)=>{a.style.setProperty("--tab-max-width",`${o+l*(ae-o)}px`)},onEnd:()=>{a.style.setProperty("--tab-max-width",`${ae}px`)}}))},$e);function ee(l){if(!a)return;const f=l.getBoundingClientRect().width;ge({duration:Z,easing:j,onStep:(p,k)=>{s.tabs.length==1?t(1,a.style.gridTemplateColumns=`minmax(${p*J}px, ${p*f}px)`,a):t(1,a.style.gridTemplateColumns=`repeat(${s.tabs.length-1}, minmax(var(--tab-min-width), var(--tab-max-width))) minmax(${p*J}px, ${p*f}px)`,a),t(1,a.scrollLeft=a.scrollWidth,a)},onEnd:()=>{t(1,a.style.gridTemplateColumns="",a)}})}const te=(l,f)=>{const p=i[0].getBoundingClientRect().width;P.moveTab(l,f,()=>{if(l>f)for(let k=f;k<l;k++)we(i[k],{duration:Z,easing:j,css:(z,S)=>`transform: translateX(-${S*p}px);`});if(l<f)for(let k=f;k>l;k--)we(i[k],{duration:Z,easing:j,css:(z,S)=>`transform: translateX(${S*p}px);`})})};function Y(l){!l.target||!l.dataTransfer||(l.dataTransfer.setData("text/plain",JSON.stringify(r)),l.dataTransfer.setDragImage(new Image,0,0))}function He(l,f){if(l==0&&f==0){t(4,c.style.left="-1000px",c),t(4,c.style.top="-1000px",c);return}let p=E.getBoundingClientRect();if(l<p.left||l>p.right||f<p.top||f>p.bottom){u||(T=0),t(4,c.style.left=`${l+A}px`,c),t(4,c.style.top=`${f+w}px`,c),t(5,u=!0);return}u&&t(5,u=!1),t(4,c.style.left=`${l+A}px`,c),t(4,c.style.top=`${h.top}px`,c);const k=-a.scrollLeft,z=i[0].getBoundingClientRect().width;let S=-1;if(l>k+s.tabs.length*z)S=s.tabs.length-1;else for(let G=0;G<s.tabs.length;G++)if(l>k+G*z&&l<k+(G+1)*z){S=G;break}l<20?(T=-ke,requestAnimationFrame(pe)):l>a.clientWidth-10?(T=ke,requestAnimationFrame(pe)):T=0,!(S==-1||S==s.placeholderIndex)&&te(s.placeholderIndex,S)}let F=0;function pe(l){if(!C||T==0){F=0;return}F==0&&(F=l);const f=l-F;F=l,a.scrollBy({left:T*f}),requestAnimationFrame(pe)}function be(l,f){if(!l.target)return;let p,k;l instanceof TouchEvent?(p=l.touches[0].clientX,k=l.touches[0].clientY,l.preventDefault()):(p=l.clientX,k=l.clientY),window.addEventListener("touchmove",O,{passive:!1}),window.addEventListener("touchend",q),window.addEventListener("mousemove",O),window.addEventListener("mouseup",q),window.addEventListener("drag",O),window.addEventListener("dragend",q),window.addEventListener("blur",q),P.setActiveIndex(f),g=l.target,h=g.getBoundingClientRect(),d=[p,k],A=h.left-p,w=h.top-k,t(4,c.style.width=`${h.width}px`,c),t(4,c.style.left=`${h.left}px`,c),t(4,c.style.top=`${h.top}px`,c),t(3,r={...s.tabs[f]}),m=f}function O(l){let f,p;if(l instanceof TouchEvent?(f=l.touches[0].clientX,p=l.touches[0].clientY,l.preventDefault()):(f=l.clientX,p=l.clientY),C){He(f,p);return}d===null||Math.hypot(d[0]-f,d[1]-p)<xe||(t(0,C=!0),P.setPlaceholderIndex(m),P.setActiveIndex(m))}function q(){window.removeEventListener("touchmove",O),window.removeEventListener("touchend",q),window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",q),window.removeEventListener("drag",O),window.removeEventListener("dragend",q),window.removeEventListener("blur",q),d=null,t(5,u=!1),m=-1,A=0,w=0,P.setPlaceholderIndex(),t(0,C=!1)}We(()=>{a.style.setProperty("--tab-max-width",`${ae}px`),a.style.setProperty("--tab-min-width",`${J}px`)});const Ae=l=>y(l),Me=(l,f)=>be(f,l);function Pe(l,f){n.$$.not_equal(s.tabs[f].title,l)&&(s.tabs[f].title=l,R.set(s))}function Se(l,f){V[l?"unshift":"push"](()=>{i[f]=l,t(2,i)})}function Be(l){V[l?"unshift":"push"](()=>{a=l,t(1,a)})}function qe(l){V[l?"unshift":"push"](()=>{c=l,t(4,c)})}function Re(l){V[l?"unshift":"push"](()=>{E=l,t(6,E)})}return n.$$.update=()=>{n.$$.dirty[0]&1&&(C?t(7,W=!0):setTimeout(()=>t(7,W=!1),20))},[C,a,i,r,c,u,E,W,s,b,y,ee,Y,be,Ae,Me,Pe,Se,Be,qe,Re]}class tt extends de{constructor(e){super(),he(this,e,et,Qe,ce,{},null,[-1,-1])}}function nt(n){let e,t,s,a;return{c(){e=L("div"),t=L("div"),this.h()},l(i){e=H(i,"DIV",{class:!0});var o=M(e);t=H(o,"DIV",{class:!0,spellcheck:!0,placeholder:!0,contenteditable:!0,role:!0}),M(t).forEach(I),o.forEach(I),this.h()},h(){_(t,"class","editor svelte-8nddl0"),_(t,"spellcheck","false"),_(t,"placeholder","Enter text here"),_(t,"contenteditable","true"),_(t,"role","textbox"),n[0]===void 0&&Xe(()=>n[3].call(t)),_(e,"class","container svelte-8nddl0")},m(i,o){x(i,e,o),D(e,t),n[2](t),n[0]!==void 0&&(t.innerHTML=n[0]),s||(a=B(t,"input",n[3]),s=!0)},p(i,[o]){o&1&&i[0]!==t.innerHTML&&(t.innerHTML=i[0])},i:le,o:le,d(i){i&&I(e),n[2](null),s=!1,a()}}}function st(n,e,t){let{text:s}=e,a;function i(d){V[d?"unshift":"push"](()=>{a=d,t(1,a)})}function o(){s=this.innerHTML,t(0,s)}return n.$$set=d=>{"text"in d&&t(0,s=d.text)},[s,a,i,o]}class at extends de{constructor(e){super(),he(this,e,st,nt,ce,{text:0})}}function lt(n){let e,t,s,a,i,o;t=new tt({});function d(r){n[2](r)}let m={};return n[0].text!==void 0&&(m.text=n[0].text),a=new at({props:m}),V.push(()=>Ce(a,"text",d)),{c(){e=L("div"),ie(t.$$.fragment),s=X(),ie(a.$$.fragment),this.h()},l(r){e=H(r,"DIV",{class:!0});var g=M(e);oe(t.$$.fragment,g),s=U(g),oe(a.$$.fragment,g),g.forEach(I),this.h()},h(){_(e,"class","container svelte-16qa0xo")},m(r,g){x(r,e,g),re(t,e,null),D(e,s),re(a,e,null),o=!0},p(r,[g]){const h={};!i&&g&1&&(i=!0,h.text=r[0].text,Ie(()=>i=!1)),a.$set(h)},i(r){o||(K(t.$$.fragment,r),K(a.$$.fragment,r),o=!0)},o(r){Q(t.$$.fragment,r),Q(a.$$.fragment,r),o=!1},d(r){r&&I(e),ue(t),ue(a)}}}function it(n,e,t){let s,a;Ee(n,R,o=>t(1,a=o)),P.newTab({data:{id:-1,title:"Hello 👋",text:"Welcome to notep... not notepad. Something completely different (Microsoft, don't sue me). v0.22"}});function i(o){n.$$.not_equal(s.text,o)&&(s.text=o,t(0,s),t(1,a))}return n.$$.update=()=>{n.$$.dirty&2&&t(0,s=a.tabs.length>0?a.tabs[a.activeIndex]:{text:"Click the ➕ above to create a new tab."})},[s,a,i]}class ct extends de{constructor(e){super(),he(this,e,it,lt,ce,{})}}export{ct as component};
