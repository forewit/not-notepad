import{w as d}from"./entry.3XbTT2o4.js";function o(){return crypto.randomUUID()}function p(e){let t;try{t=JSON.parse(e)}catch(s){throw s}if(!t||!t.id||!t.title||!t.ops)throw new Error("Invalid tab data!");l({data:t})}function l(e){const{data:t={id:o(),title:"Untitled",ops:[]},index:s=-1,callback:a=()=>{}}=e||{};i.update(n=>(n.tabs.some(b=>b.id==t.id)||(s<0?(n.tabs.push(t),n.activeIndex=n.tabs.length-1):(n.tabs.splice(s,0,t),n.activeIndex=s)),n)),a()}function h(e){i.update(t=>(e<0||e>=t.tabs.length||(t.placeholderIndex==e&&(t.placeholderIndex=-1),t.tabs.splice(e,1),e==t.activeIndex-1?t.activeIndex=Math.max(0,e):t.activeIndex=Math.min(t.activeIndex,t.tabs.length-1)),t))}function v(e){i.update(t=>(e<0?t.activeIndex=0:e>t.tabs.length?t.activeIndex=t.tabs.length-1:t.activeIndex=e,t))}function f(e){i.update(t=>(t.placeholderIndex=e===void 0||e<0||e>=t.tabs.length?-1:e,t))}function I(e,t,s=()=>{}){e!=t&&(i.update(a=>{if(e<0||e>=a.tabs.length||t<0||t>=a.tabs.length)return a;const n=a.tabs[e];return a.tabs.splice(e,1),a.tabs.splice(t,0,n),a.activeIndex==e&&(a.activeIndex=t),a.placeholderIndex==e&&(a.placeholderIndex=t),a}),s())}const i=d({tabs:[],activeIndex:0,placeholderIndex:-1}),w={newTabFromString:p,newTab:l,removeTab:h,setActiveIndex:v,setPlaceholderIndex:f,moveTab:I};export{i as a,w as t};
